<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MatchTree &mdash; GuessIt 0.7.2.dev0 documentation</title>
    
    <link rel="stylesheet" href="../_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.7.2.dev0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="GuessIt 0.7.2.dev0 documentation" href="../index.html" />
    <link rel="next" title="Matchers" href="matcher.html" />
    <link rel="prev" title="Guess" href="guess.html" />
   
  <link href='http://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="matcher.html" title="Matchers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="guess.html" title="Guess"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">GuessIt 0.7.2.dev0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-guessit.matchtree">
<span id="matchtree"></span><h1>MatchTree<a class="headerlink" href="#module-guessit.matchtree" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="guessit.matchtree.BaseMatchTree">
<em class="property">class </em><tt class="descclassname">guessit.matchtree.</tt><tt class="descname">BaseMatchTree</tt><big>(</big><em>string=''</em>, <em>span=None</em>, <em>parent=None</em><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree" title="Permalink to this definition">¶</a></dt>
<dd><p>A BaseMatchTree is a tree covering the filename, where each
node represents a substring in the filename and can have a <tt class="docutils literal"><span class="pre">Guess</span></tt>
associated with it that contains the information that has been guessed
in this node. Nodes can be further split into subnodes until a proper
split has been found.</p>
<dl class="docutils">
<dt>Each node has the following attributes:</dt>
<dd><ul class="first last simple">
<li>string = the original string of which this node represents a region</li>
<li>span = a pair of (begin, end) indices delimiting the substring</li>
<li>parent = parent node</li>
<li>children = list of children nodes</li>
<li>guess = Guess()</li>
</ul>
</dd>
</dl>
<p>BaseMatchTrees are displayed in the following way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;Movies/Dark City (1998)/Dark.City.(1998).DC.BDRip.720p.DTS.X264-CHD.mkv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">guessit</span><span class="o">.</span><span class="n">IterativeMatcher</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">match_tree</span><span class="p">)</span>
<span class="go">000000 1111111111111111 2222222222222222222222222222222222222222222 333</span>
<span class="go">000000 0000000000111111 0000000000111111222222222222222222222222222 000</span>
<span class="go">                 011112           011112000011111222222222222222222 000</span>
<span class="go">                                                 011112222222222222</span>
<span class="go">                                                      0000011112222</span>
<span class="go">                                                      01112    0111</span>
<span class="go">Movies/__________(____)/Dark.City.(____).DC._____.____.___.____-___.___</span>
<span class="go">       tttttttttt yyyy             yyyy     fffff ssss aaa vvvv rrr ccc</span>
<span class="go">Movies/Dark City (1998)/Dark.City.(1998).DC.BDRip.720p.DTS.X264-CHD.mkv</span>
</pre></div>
</div>
<p>The last line contains the filename, which you can use a reference.
The previous line contains the type of property that has been found.
The line before that contains the filename, where all the found groups
have been blanked. Basically, what is left on this line are the leftover
groups which could not be identified.</p>
<p>The lines before that indicate the indices of the groups in the tree.</p>
<p>For instance, the part of the filename &#8216;BDRip&#8217; is the leaf with index
<tt class="docutils literal"><span class="pre">(2,</span> <span class="pre">2,</span> <span class="pre">1)</span></tt> (read from top to bottom), and its meaning is &#8216;format&#8217;
(as shown by the <tt class="docutils literal"><span class="pre">f</span></tt>&#8216;s on the last-but-one line).</p>
<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.add_child">
<tt class="descname">add_child</tt><big>(</big><em>span</em><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.add_child" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new child node to this node with the given span.</p>
</dd></dl>

<dl class="attribute">
<dt id="guessit.matchtree.BaseMatchTree.clean_value">
<tt class="descname">clean_value</tt><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.clean_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a cleaned value of the matched substring, with better
presentation formatting (punctuation marks removed, duplicate
spaces, ...)</p>
</dd></dl>

<dl class="attribute">
<dt id="guessit.matchtree.BaseMatchTree.depth">
<tt class="descname">depth</tt><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.depth" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the depth of this node.</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.get_partition_spans">
<tt class="descname">get_partition_spans</tt><big>(</big><em>indices</em><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.get_partition_spans" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of absolute spans for the regions of the original
string defined by splitting this node at the given indices (relative
to this node)</p>
</dd></dl>

<dl class="attribute">
<dt id="guessit.matchtree.BaseMatchTree.info">
<tt class="descname">info</tt><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dict containing all the info guessed by this node,
subnodes included.</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.is_leaf">
<tt class="descname">is_leaf</tt><big>(</big><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.is_leaf" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether this node is a leaf or not.</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.leaves">
<tt class="descname">leaves</tt><big>(</big><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.leaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a generator over all the nodes that are leaves.</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.next_leaf">
<tt class="descname">next_leaf</tt><big>(</big><em>leaf</em><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.next_leaf" title="Permalink to this definition">¶</a></dt>
<dd><p>Return next leaf for this node</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.next_leaves">
<tt class="descname">next_leaves</tt><big>(</big><em>leaf</em><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.next_leaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Return next leaves for this node</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.node_at">
<tt class="descname">node_at</tt><big>(</big><em>idx</em><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.node_at" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the node at the given index in the subtree rooted at
this node.</p>
</dd></dl>

<dl class="attribute">
<dt id="guessit.matchtree.BaseMatchTree.node_idx">
<tt class="descname">node_idx</tt><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.node_idx" title="Permalink to this definition">¶</a></dt>
<dd><p>Return this node&#8217;s index in the tree, as a tuple.
If this node is the root of the tree, then return ().</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.nodes">
<tt class="descname">nodes</tt><big>(</big><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all the nodes and subnodes in this tree.</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.nodes_at_depth">
<tt class="descname">nodes_at_depth</tt><big>(</big><em>depth</em><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.nodes_at_depth" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all the nodes at a given depth in the tree</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.partition">
<tt class="descname">partition</tt><big>(</big><em>indices</em><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Partition this node by splitting it at the given indices,
relative to this node.</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.previous_leaf">
<tt class="descname">previous_leaf</tt><big>(</big><em>leaf</em><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.previous_leaf" title="Permalink to this definition">¶</a></dt>
<dd><p>Return previous leaf for this node</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.previous_leaves">
<tt class="descname">previous_leaves</tt><big>(</big><em>leaf</em><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.previous_leaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Return previous leaves for this node</p>
</dd></dl>

<dl class="attribute">
<dt id="guessit.matchtree.BaseMatchTree.root">
<tt class="descname">root</tt><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.root" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the root node of the tree.</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.BaseMatchTree.to_string">
<tt class="descname">to_string</tt><big>(</big><big>)</big><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a readable string representation of this tree.</p>
<dl class="docutils">
<dt>The result is a multi-line string, where the lines are:</dt>
<dd><ul class="first last simple">
<li>line 1 -&gt; N-2: each line contains the nodes at the given depth in the tree</li>
<li>line N-2: original string where all the found groups have been blanked</li>
<li>line N-1: type of property that has been found</li>
<li>line N: the original string, which you can use a reference.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="guessit.matchtree.BaseMatchTree.value">
<tt class="descname">value</tt><a class="headerlink" href="#guessit.matchtree.BaseMatchTree.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the substring that this node matches.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="guessit.matchtree.MatchTree">
<em class="property">class </em><tt class="descclassname">guessit.matchtree.</tt><tt class="descname">MatchTree</tt><big>(</big><em>string=''</em>, <em>span=None</em>, <em>parent=None</em><big>)</big><a class="headerlink" href="#guessit.matchtree.MatchTree" title="Permalink to this definition">¶</a></dt>
<dd><p>The MatchTree contains a few &#8220;utility&#8221; methods which are not necessary
for the BaseMatchTree, but add a lot of convenience for writing
higher-level rules.</p>
<dl class="method">
<dt id="guessit.matchtree.MatchTree.first_leaf_containing">
<tt class="descname">first_leaf_containing</tt><big>(</big><em>property_name</em><big>)</big><a class="headerlink" href="#guessit.matchtree.MatchTree.first_leaf_containing" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first leaf containing the given property.</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.MatchTree.is_explicit">
<tt class="descname">is_explicit</tt><big>(</big><big>)</big><a class="headerlink" href="#guessit.matchtree.MatchTree.is_explicit" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether the group was explicitly enclosed by
parentheses/square brackets/etc.</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.MatchTree.leaves_containing">
<tt class="descname">leaves_containing</tt><big>(</big><em>property_name</em><big>)</big><a class="headerlink" href="#guessit.matchtree.MatchTree.leaves_containing" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a generator of leaves that guessed the given property.</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.MatchTree.matched">
<tt class="descname">matched</tt><big>(</big><big>)</big><a class="headerlink" href="#guessit.matchtree.MatchTree.matched" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a single guess that contains all the info found in the
nodes of this tree, trying to merge properties as good as possible.</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.MatchTree.previous_leaves_containing">
<tt class="descname">previous_leaves_containing</tt><big>(</big><em>node</em>, <em>property_name</em><big>)</big><a class="headerlink" href="#guessit.matchtree.MatchTree.previous_leaves_containing" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a generator of leaves containing the given property that are
before the given node (in the string).</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.MatchTree.previous_unidentified_leaves">
<tt class="descname">previous_unidentified_leaves</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#guessit.matchtree.MatchTree.previous_unidentified_leaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a generator of non-empty leaves that are before the given
node (in the string).</p>
</dd></dl>

<dl class="method">
<dt id="guessit.matchtree.MatchTree.unidentified_leaves">
<tt class="descname">unidentified_leaves</tt><big>(</big><em>valid=&lt;function MatchTree.&lt;lambda&gt; at 0x110744268&gt;</em><big>)</big><a class="headerlink" href="#guessit.matchtree.MatchTree.unidentified_leaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a generator of leaves that are not empty.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/guessit-logo.png" alt="Logo"/>
  </a>
</p>
<p>
<iframe src="http://ghbtns.com/github-btn.html?user=wackou&repo=guessit&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>

<p>
  GuessIt is a python library that tries to extract as much information
  as possible from a file.
</p><h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="guess.html" title="previous chapter">Guess</a></li>
      <li>Next: <a href="matcher.html" title="next chapter">Matchers</a></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; Copyright 2014 Nicolas Wack.
    </div>
  </body>
</html>