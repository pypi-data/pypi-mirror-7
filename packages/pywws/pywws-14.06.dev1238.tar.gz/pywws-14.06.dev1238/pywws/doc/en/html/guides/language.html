<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to use pywws in another language &mdash; pywws 14.06.dev1238 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '14.06.dev1238',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/pywws_logo.ico"/>
    <link rel="top" title="pywws 14.06.dev1238 documentation" href="../index.html" />
    <link rel="up" title="User guides" href="index.html" />
    <link rel="next" title="weather.ini - configuration file format" href="weather_ini.html" />
    <link rel="prev" title="How to configure pywws to post messages to Twitter" href="twitter.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="weather_ini.html" title="weather.ini - configuration file format"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="twitter.html" title="How to configure pywws to post messages to Twitter"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">pywws 14.06.dev1238 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">User guides</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="how-to-use-pywws-in-another-language">
<h1>How to use pywws in another language<a class="headerlink" href="#how-to-use-pywws-in-another-language" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Some parts of pywws can be configured to use your local language instead of British English.
This requires an appropriate language file which contains translations of the various strings used in pywws.
The pywws project relies on users to provide these translations.</p>
<p>The pywws documentation can also be translated into other languages.
This is a lot more work, but could be very useful to potential users who do not read English very well.</p>
</div>
<div class="section" id="using-an-existing-language-file">
<h2>Using an existing language file<a class="headerlink" href="#using-an-existing-language-file" title="Permalink to this headline">¶</a></h2>
<p>There may already be a pywws translation for your preferred language.
First you need to choose the appropriate two-letter code from the list at <a class="reference external" href="http://www.w3schools.com/tags/ref_language_codes.asp">http://www.w3schools.com/tags/ref_language_codes.asp</a>.
For example, <tt class="docutils literal"><span class="pre">fr</span></tt> is the code for French.
Now use the <a class="reference internal" href="../api/pywws.Localisation.html#module-pywws.Localisation" title="pywws.Localisation"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.Localisation</span></tt></a> module to do a quick test:</p>
<div class="highlight-python"><div class="highlight"><pre>python -m pywws.Localisation -t fr
</pre></div>
</div>
<p>This should produce output something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>Locale changed from (None, None) to (&#39;fr_FR&#39;, &#39;UTF-8&#39;)
Translation set OK
Locale
  decimal point: 23,2
  date &amp; time: lundi, 17 décembre (17/12/2012 16:00:48)
Translations
  &#39;NNW&#39; =&gt; &#39;NNO&#39;
  &#39;rising very rapidly&#39; =&gt; &#39;en hausse très rapide&#39;
  &#39;Rain at times, very unsettled&#39; =&gt; &#39;Quelques précipitations, très perturbé&#39;
</pre></div>
</div>
<p>This shows that pywws is already able to generate French output, and that your installation is correctly configured.
Now you can edit the language entry in your <tt class="docutils literal"><span class="pre">weather.ini</span></tt> file to use your language code.</p>
<p>If the above test shows no translations into your language then you need to create a new language file, as described below.</p>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>As well as the pywws software you need to install the Babel python library (see <a class="reference internal" href="../essentials/dependencies.html#dependencies-translations"><em>dependencies</em></a>).
This is used to convert the language file you create into code that is used when the pywws software is run.
You also need to download and extract the pywws software instead of installing it with pip.
See <a class="reference internal" href="getstarted.html"><em>How to get started with pywws</em></a>.
It&#8217;s probably better to use the most recent &#8220;snapshot&#8221; release rather than the ever changing GitHub repository.</p>
</div>
<div class="section" id="translating-the-easy-way-the-transifex-web-site">
<span id="using-transifex"></span><h2>Translating the easy way - the Transifex web site<a class="headerlink" href="#translating-the-easy-way-the-transifex-web-site" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://www.transifex.com/">Transifex</a> is a web based system for coordinating teams of translators.
It is free to use for open source projects such as pywws.
In May 2014 I created a <a class="reference external" href="https://www.transifex.com/organization/jim-easterbrook">pywws project</a> on Transifex.
If you&#8217;d like to use Transifex to help translate pywws, please create an account and join the appropriate language team.</p>
<p>Visit the newest pywws project page on Transifex and click on your language, then click on the &#8220;resource&#8221; you want to translate.
(<tt class="docutils literal"><span class="pre">pywws</span></tt> contains the program strings used when running pywws, the others contain strings from the pywws documentation.)
This opens a dialog where you can choose to download a file to work on or translate the strings online.
Please read <a class="reference internal" href="#translator-notes"><em>Notes for translators</em></a> before you start.</p>
<p>When you&#8217;ve finished translating <tt class="docutils literal"><span class="pre">pywws</span></tt> select the &#8220;download for use&#8221; option and save the file to <tt class="docutils literal"><span class="pre">pywws/lang/fr/LC_MESSAGES/pywws.po</span></tt> (replace <tt class="docutils literal"><span class="pre">fr</span></tt> with your language code).
Now you can <a class="reference internal" href="#test-translation"><em>Test the pywws translation</em></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 14.05.dev1221: </span>pywws now includes a config file for the <tt class="docutils literal"><span class="pre">transifex-client</span></tt> program (see <a class="reference internal" href="../essentials/dependencies.html#dependencies-translations"><em>dependencies</em></a>).
This simplifies the process of downloading files for testing (or uploading files you&#8217;ve been editing on your computer).</p>
</div>
<p>For example, this command downloads any updated files for the French language:</p>
<div class="highlight-python"><div class="highlight"><pre>tx pull -l fr
</pre></div>
</div>
</div>
<div class="section" id="translating-the-hard-way-using-local-files">
<h2>Translating the hard way - using local files<a class="headerlink" href="#translating-the-hard-way-using-local-files" title="Permalink to this headline">¶</a></h2>
<p>If you prefer not to use the Transifex web site you can edit language files on your own computer.
This is done in several stages, as follows.</p>
<div class="section" id="extract-source-strings">
<h3>Extract source strings<a class="headerlink" href="#extract-source-strings" title="Permalink to this headline">¶</a></h3>
<p>Program messages are marked in the Python source with an underscore character.
These strings are extracted using setup.py:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py extract_messages
</pre></div>
</div>
<p>This creates the file <tt class="docutils literal"><span class="pre">build/gettext/pywws.pot</span></tt>.
This is a &#8220;portable object template&#8221; file that contains the English language strings to be translated.</p>
</div>
<div class="section" id="create-language-files">
<h3>Create language files<a class="headerlink" href="#create-language-files" title="Permalink to this headline">¶</a></h3>
<p>The .pot files have headers that need to be initialised.
This can be done manually, but the Babel library has an <tt class="docutils literal"><span class="pre">init_catalog</span></tt> command to simplify the process:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py init_catalog --locale fr
</pre></div>
</div>
<p>If a .po file for your language already exists, but needs updating with new source strings, you should use the <tt class="docutils literal"><span class="pre">update_catalog</span></tt> command instead:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py update_catalog --locale fr
</pre></div>
</div>
<p>Now you can open the <tt class="docutils literal"><span class="pre">pywws/lang/fr/LC_MESSAGES/pywws.po</span></tt> file in your favourite text editor and start filling in the empty <tt class="docutils literal"><span class="pre">msgstr</span></tt> strings with your translation of the corresponding <tt class="docutils literal"><span class="pre">msgid</span></tt> string.
Please read <a class="reference internal" href="#translator-notes"><em>Notes for translators</em></a> before you start.</p>
</div>
</div>
<div class="section" id="test-the-pywws-translation">
<span id="test-translation"></span><h2>Test the pywws translation<a class="headerlink" href="#test-the-pywws-translation" title="Permalink to this headline">¶</a></h2>
<p>After you&#8217;ve edited your language file it needs to be compiled so that pywws can use it.
This is done with setup.py:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py compile_catalog --locale fr
</pre></div>
</div>
<p>After compilation you can test the translation:</p>
<div class="highlight-python"><div class="highlight"><pre>python -m pywws.Localisation -t fr
</pre></div>
</div>
<p>Don&#8217;t forget to do this every time you edit a language file.</p>
</div>
<div class="section" id="notes-for-translators">
<span id="translator-notes"></span><h2>Notes for translators<a class="headerlink" href="#notes-for-translators" title="Permalink to this headline">¶</a></h2>
<p>The pywws program strings (<tt class="docutils literal"><span class="pre">pywws.po</span></tt>) are quite simple.
They comprise simple weather forecasts (&#8220;Fine weather&#8221;), air pressure changes (&#8220;rising quickly&#8221;) and the 16 points of the compass (&#8220;NNE&#8221;).
Leave the &#8220;(%Z)&#8221; in &#8220;Time (%Z)&#8221; unchanged and make sure your translation&#8217;s punctuation matches the original.</p>
<p>The other files contain strings from the pywws documentation.
These are in <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a>.
This is mostly plain text, but uses characters such as backquotes (`), colons (:) and asterisks (*) for special purposes.
You need to take care to preserve this special punctuation.
Do not translate program source, computer instructions and cross-references like these:</p>
<div class="highlight-python"><div class="highlight"><pre>`pip &lt;http://www.pip-installer.org/&gt;`_
:py:class:`datetime.datetime`
:obj:`ParamStore &lt;pywws.DataStore.ParamStore&gt;`\\ (root_dir, file_name)
pywws.Forecast
``pywws-livelog``
</pre></div>
</div>
<p>Translating all of the pywws documentation is a lot of work.
However, when the documentation is &#8220;compiled&#8221; any untranslated strings revert to their English original.
This means that a partial translation could still be useful &#8211; I suggest starting with the documentation front page, <tt class="docutils literal"><span class="pre">index.po</span></tt>.</p>
</div>
<div class="section" id="send-jim-the-translation">
<h2>Send Jim the translation<a class="headerlink" href="#send-jim-the-translation" title="Permalink to this headline">¶</a></h2>
<p>I&#8217;m sure you would like others to benefit from the work you&#8217;ve done in translating pywws.
If you&#8217;ve been using Transifex then please send me an email (<a class="reference external" href="mailto:jim&#37;&#52;&#48;jim-easterbrook&#46;me&#46;uk">jim<span>&#64;</span>jim-easterbrook<span>&#46;</span>me<span>&#46;</span>uk</a>) to let me know there&#8217;s a new translation available.
Otherwise, please email me any .po files you create.
Please include details of which version of pywws your work is based on &#8211; the easiest way to do this is to include the value of <tt class="docutils literal"><span class="pre">_commit</span></tt> from the file <tt class="docutils literal"><span class="pre">pywws/__init__.py</span></tt> in your email.</p>
</div>
<div class="section" id="translating-the-documentation">
<h2>Translating the documentation<a class="headerlink" href="#translating-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>The Sphinx program used to compile the pywws documentation has good support for translation into other languages, but the process is a bit complicated.
I recommend reading <a class="reference external" href="http://sphinx-doc.org/latest/intl.html">this overview</a>, but don&#8217;t follow its instructions too closely.
I&#8217;ve tried to simplify the process, as described below.</p>
<p>As before, the easiest way to contribute to the pywws documentation translations is via the Transifex web site (see <a class="reference internal" href="#using-transifex"><em>Translating the easy way - the Transifex web site</em></a>).
You don&#8217;t need to translate everything &#8211; even a partial translation could be useful.
Just let me know when you&#8217;ve done enough to be worth publishing.</p>
<p>If you prefer not to use Transifex then please follow these instructions.</p>
<div class="section" id="id1">
<h3>Extract source strings<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Documentation strings are extracted using setup.py:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py extract_messages_doc
</pre></div>
</div>
<p>This creates several .pot files in the <tt class="docutils literal"><span class="pre">build/gettext/</span></tt> directory.</p>
</div>
<div class="section" id="id2">
<h3>Create language files<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>The sphinx-intl command is used to create or update the .po files:</p>
<div class="highlight-python"><div class="highlight"><pre>sphinx-intl update --locale-dir pywws/lang -p build/gettext -l fr
</pre></div>
</div>
</div>
<div class="section" id="viewing-your-translated-documentation">
<h3>Viewing your translated documentation<a class="headerlink" href="#viewing-your-translated-documentation" title="Permalink to this headline">¶</a></h3>
<p>First compile your newly edited language file(s):</p>
<div class="highlight-python"><div class="highlight"><pre>sphinx-intl build --locale-dir pywws/lang -l fr
</pre></div>
</div>
<p>Then delete the old documentation (if it exists) and rebuild using your language:</p>
<div class="highlight-python"><div class="highlight"><pre>rm -rf pywws/doc/fr
LANG=fr python setup.py build_sphinx
</pre></div>
</div>
<p>Note that the <tt class="docutils literal"><span class="pre">build_sphinx</span></tt> command doesn&#8217;t have a <tt class="docutils literal"><span class="pre">--locale</span></tt> (or <tt class="docutils literal"><span class="pre">-l</span></tt>) option, so the language is set by a temporary environment variable.</p>
<p>Finally you can view the translated documentation by using a web browser to read the file <tt class="docutils literal"><span class="pre">pywws/doc/fr/html/index.html</span></tt>.</p>
<p>As before, please make sure you send your translation to <a class="reference external" href="mailto:jim&#37;&#52;&#48;jim-easterbrook&#46;me&#46;uk">jim<span>&#64;</span>jim-easterbrook<span>&#46;</span>me<span>&#46;</span>uk</a> so other pywws users can benefit from your work.</p>
<hr class="docutils" />
<p>Comments or questions? Please subscribe to the pywws mailing list
<a class="reference external" href="http://groups.google.com/group/pywws">http://groups.google.com/group/pywws</a> and let us know.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/pywws_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">How to use pywws in another language</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#using-an-existing-language-file">Using an existing language file</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#translating-the-easy-way-the-transifex-web-site">Translating the easy way - the Transifex web site</a></li>
<li><a class="reference internal" href="#translating-the-hard-way-using-local-files">Translating the hard way - using local files</a><ul>
<li><a class="reference internal" href="#extract-source-strings">Extract source strings</a></li>
<li><a class="reference internal" href="#create-language-files">Create language files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#test-the-pywws-translation">Test the pywws translation</a></li>
<li><a class="reference internal" href="#notes-for-translators">Notes for translators</a></li>
<li><a class="reference internal" href="#send-jim-the-translation">Send Jim the translation</a></li>
<li><a class="reference internal" href="#translating-the-documentation">Translating the documentation</a><ul>
<li><a class="reference internal" href="#id1">Extract source strings</a></li>
<li><a class="reference internal" href="#id2">Create language files</a></li>
<li><a class="reference internal" href="#viewing-your-translated-documentation">Viewing your translated documentation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="twitter.html"
                        title="previous chapter">How to configure pywws to post messages to Twitter</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="weather_ini.html"
                        title="next chapter">weather.ini - configuration file format</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="weather_ini.html" title="weather.ini - configuration file format"
             >next</a> |</li>
        <li class="right" >
          <a href="twitter.html" title="How to configure pywws to post messages to Twitter"
             >previous</a> |</li>
        <li><a href="../index.html">pywws 14.06.dev1238 documentation</a> &raquo;</li>
          <li><a href="index.html" >User guides</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-14, Jim Easterbrook.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>