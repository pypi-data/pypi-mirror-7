<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Comment intégrer divers services météorologiques à pywws &mdash; documentation pywws 13.09_r1069</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '13.09_r1069',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/pywws_logo.ico"/>
    <link rel="top" title="documentation pywws 13.09_r1069" href="../index.html" />
    <link rel="up" title="Guides utilisateur" href="index.html" />
    <link rel="next" title="Comment configurer pywws pour poster des messages sur Twitter" href="twitter.html" />
    <link rel="prev" title="Comment configurer le mode ‘live’ avec pywws" href="livelogging.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="twitter.html" title="Comment configurer pywws pour poster des messages sur Twitter"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="livelogging.html" title="Comment configurer le mode ‘live’ avec pywws"
             accesskey="P">précédent</a> |</li>
        <li><a href="../index.html">documentation pywws 13.09_r1069</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Guides utilisateur</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="how-to-integrate-pywws-with-various-weather-services">
<h1>Comment intégrer divers services météorologiques à pywws<a class="headerlink" href="#how-to-integrate-pywws-with-various-weather-services" title="Lien permanent vers ce titre">¶</a></h1>
<p>Ce guide donne de brèves instructions sur comment utiliser pywws avec d&#8217;autres services météorologiques et logiciels. Il n&#8217;est pas exhaustive, et certains services (comme Twitter) sont couverts en détail ailleurs.</p>
<div class="section" id="yowindow">
<h2>YoWindow<a class="headerlink" href="#yowindow" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="http://yowindow.com/">YoWindow</a> est un widget météo qui peut afficher des données provenant d&#8217;une source internet ou de votre station météo. Pour afficher les données de votre station, pywws a besoin d&#8217;écrire dans un fichier local, en général toutes les 48 secondes lorsque de nouvelles données sont reçues. C&#8217;est facile à faire:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Arrêter toute instance de pywws</p>
</li>
<li><p class="first">Copier le gabarit exemple <tt class="docutils literal"><span class="pre">yowindow.xml</span></tt> dans votre répertoire de gabarits text.</p>
</li>
<li><p class="first">Si ce n&#8217;est déjà fait, éditez  le fichier <tt class="docutils literal"><span class="pre">weather.ini</span></tt> et configurez la clé <tt class="docutils literal"><span class="pre">local_files</span></tt> dans la section <tt class="docutils literal"><span class="pre">[paths]</span></tt> pour un répertoire approprié pour votre fichier yowindow.</p>
</li>
<li><p class="first">Ajoutez le modèle yowindow dans les tâches <tt class="docutils literal"><span class="pre">[live]</span></tt> de <tt class="docutils literal"><span class="pre">weather.ini</span></tt>. Mettre son paramètre à <tt class="docutils literal"><span class="pre">'L'</span></tt> si le résultat est copié dans votre répertoire local au lieu d&#8217;être téléchargés sur un site ftp:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">live</span><span class="p">]</span>
<span class="n">text</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;yowindow.xml&#39;</span><span class="p">,</span> <span class="s">&#39;L&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</li>
<li><p class="first">Redémarrez l&#8217;enregistrement live de pywws.</p>
</li>
</ol>
</div></blockquote>
<p>Vous pouvez vérifier que le fichier est mis à jour toutes les 48 secondes en utilisant <tt class="docutils literal"><span class="pre">more</span></tt> ou <tt class="docutils literal"><span class="pre">cat</span></tt> pour afficher à l&#8217;écran.</p>
<p>Finallement, configurez yowindow pour l&#8217;utilisation de ce fichier. Voir <a class="reference external" href="http://yowindow.com/pws_setup.php">http://yowindow.com/pws_setup.php</a> pour les instructions pour ce faire.</p>
</div>
<div class="section" id="twitter">
<h2>Twitter<a class="headerlink" href="#twitter" title="Lien permanent vers ce titre">¶</a></h2>
<p>Voir <a class="reference internal" href="twitter.html"><em>Comment configurer pywws pour poster des messages sur Twitter</em></a> pour les instructions détaillées.</p>
</div>
<div class="section" id="weather-underground">
<h2>Weather Underground<a class="headerlink" href="#weather-underground" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="http://www.wunderground.com/">Weather Underground</a> (ou Wunderground) est l&#8217;un des plus anciens sites météorologiques dans le monde. Comme pour beaucoup d&#8217;autres services, pywws peut leur envoyer vos données météo via l&#8217;internet. Le module <a class="reference internal" href="../api/pywws.toservice.html#module-pywws.toservice" title="pywws.toservice"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.toservice</span></tt></a> gère cette communication pour toute une gamme de services en ligne .</p>
<p>La première étape consiste à vous créer un compte Weather Underground à cette adresse <a class="reference external" href="http://www.wunderground.com/members/signup.asp">http://www.wunderground.com/members/signup.asp</a>. Puis utilisez le formulaire &#8220;Add A Station&#8221; pour fournir les détails de votre station tel que la  localisation et son type. Vous devriez par la suite obtenir un identificateur de station (station ID) et un mot de passe &#8211; prenez ces informations en note.</p>
<p>Assurez vous qu&#8217;aucune autre instance de pywws ne fonctionne, puis exécutez le programme <a class="reference internal" href="../api/pywws.toservice.html#module-pywws.toservice" title="pywws.toservice"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.toservice</span></tt></a> directement:</p>
<div class="highlight-python"><div class="highlight"><pre>python -m pywws.toservice ~/weather/data underground
</pre></div>
</div>
<p>Celà devrait échouer, comme vous n&#8217;avez pas encore défini l&#8217;ID de votre station ou le mot de passe, mais ceci crée les entrées nécessaires dans le fichier <tt class="docutils literal"><span class="pre">weather.ini</span></tt> pour que vous puissiez l&#8217;éditer. Ouvrez <tt class="docutils literal"><span class="pre">weather.ini</span></tt>  et trouvez la section <tt class="docutils literal"><span class="pre">[underground]</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">underground</span><span class="p">]</span>
<span class="n">station</span> <span class="o">=</span> <span class="n">unknown</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">unknown</span>
</pre></div>
</div>
<p>Remplacez les valeures <tt class="docutils literal"><span class="pre">unknown</span></tt> par votre Station ID et votre mot de passe.</p>
<p>Maintenant, essayez <a class="reference internal" href="../api/pywws.toservice.html#module-pywws.toservice" title="pywws.toservice"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.toservice</span></tt></a> de nouveau:</p>
<div class="highlight-python"><div class="highlight"><pre>python -m pywws.toservice ~/weather/data underground
</pre></div>
</div>
<p>Si cela a fonctionné, vous pouvez télécharger votre dernier 7 jours de données. Notez que cela peut prendre un temps assez long, surtout si vous avez un intervalle d&#8217;enregistrement court.  En premier éditez <tt class="docutils literal"><span class="pre">status.ini</span></tt> et supprimez l&#8217;entrée <tt class="docutils literal"><span class="pre">underground</span></tt> de la section <tt class="docutils literal"><span class="pre">[last</span> <span class="pre">update]</span></tt>. Ensuite, exécutez  <a class="reference internal" href="../api/pywws.toservice.html#module-pywws.toservice" title="pywws.toservice"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.toservice</span></tt></a> avec l&#8217;option  &#8216;catchup&#8217; (rattrapage) et haute verbosité afin que vous puissiez voir le fonctionnement:</p>
<div class="highlight-python"><div class="highlight"><pre>python -m pywws.toservice -vvc ~/weather/data underground
</pre></div>
</div>
<p>Lorsque tout fonctionne, vous pouvez ajouter &#8216;underground&#8217; à la section des tâches <tt class="docutils literal"><span class="pre">[logged]</span></tt> du fichier <tt class="docutils literal"><span class="pre">weather.ini</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">logged</span><span class="p">]</span>
<span class="n">services</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;underground&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="rapidfire-updates">
<h3>Mise à jour &#8220;RapidFire&#8221;<a class="headerlink" href="#rapidfire-updates" title="Lien permanent vers ce titre">¶</a></h3>
<p>Weather Underground a une seconde URL de téléversement pour les mises à jour en temps réel à un interval d&#8217;aussi peu que 2.5 secondes. Si vous exécutez pywws en mode &#8216;live logging&#8217; (voir <a class="reference internal" href="livelogging.html"><em>Comment configurer le mode &#8216;live&#8217; avec pywws</em></a>) vous pouvez l&#8217;utiliser pour envoyez des mises à jour aux 48 secondes, en ajoutant &#8216;underground_rf&#8217; à la section des tâches <tt class="docutils literal"><span class="pre">[live]</span></tt> du fichier <tt class="docutils literal"><span class="pre">weather.ini</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">live</span><span class="p">]</span>
<span class="n">services</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;underground_rf&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>On ne sait ne pas si Weather Underground approuve l&#8217;envoi de mises à jour RapidFire et normales pour la même station.  (Voir <a class="reference external" href="http://wiki.wunderground.com/index.php/PWS_-_Upload_Protocol#RapidFire_Updates">http://wiki.wunderground.com/index.php/PWS_-_Upload_Protocol#RapidFire_Updates</a>.) Si vous utilisez seulement RapidFire, il y a possibilité de trouées dans l&#8217;historique de votre station, si elle devient &#8220;hors onde&#8221; pour une raison quelconque.</p>
<p>Commentaires ou questions? SVP, souscrivez à la liste d&#8217;envoi de pywws <a class="reference external" href="http://groups.google.com/group/pywws">http://groups.google.com/group/pywws</a> et laissez-le nous savoir.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/pywws_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table des Matières</a></h3>
  <ul>
<li><a class="reference internal" href="#">Comment intégrer divers services météorologiques à pywws</a><ul>
<li><a class="reference internal" href="#yowindow">YoWindow</a></li>
<li><a class="reference internal" href="#twitter">Twitter</a></li>
<li><a class="reference internal" href="#weather-underground">Weather Underground</a><ul>
<li><a class="reference internal" href="#rapidfire-updates">Mise à jour &#8220;RapidFire&#8221;</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="livelogging.html"
                        title="Chapitre précédent">Comment configurer le mode &#8216;live&#8217; avec pywws</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="twitter.html"
                        title="Chapitre suivant">Comment configurer pywws pour poster des messages sur Twitter</a></p>
<div id="searchbox" style="display: none">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="twitter.html" title="Comment configurer pywws pour poster des messages sur Twitter"
             >suivant</a> |</li>
        <li class="right" >
          <a href="livelogging.html" title="Comment configurer le mode ‘live’ avec pywws"
             >précédent</a> |</li>
        <li><a href="../index.html">documentation pywws 13.09_r1069</a> &raquo;</li>
          <li><a href="index.html" >Guides utilisateur</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-13, Jim Easterbrook.
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>