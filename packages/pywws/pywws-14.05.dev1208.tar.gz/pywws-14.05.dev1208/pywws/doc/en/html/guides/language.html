

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to use pywws in another language &mdash; pywws 14.05.dev1208 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '14.05.dev1208',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/pywws_logo.ico"/>
    <link rel="top" title="pywws 14.05.dev1208 documentation" href="../index.html" />
    <link rel="up" title="User guides" href="index.html" />
    <link rel="next" title="weather.ini - configuration file format" href="weather_ini.html" />
    <link rel="prev" title="How to configure pywws to post messages to Twitter" href="twitter.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="weather_ini.html" title="weather.ini - configuration file format"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="twitter.html" title="How to configure pywws to post messages to Twitter"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">pywws 14.05.dev1208 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">User guides</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="how-to-use-pywws-in-another-language">
<h1>How to use pywws in another language<a class="headerlink" href="#how-to-use-pywws-in-another-language" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Some parts of pywws can be configured to use your local language instead of British English.
This requires an appropriate language file which contains translations of the various strings used in pywws.
The pywws project relies on users to provide these translations.
This document describes how to create a language file.</p>
<p>The pywws documentation can also be translated into other languages.
This is a lot more work, but could be very useful to potential users who do not read English very well.</p>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>As well as the pywws software you need to install the <tt class="docutils literal"><span class="pre">gettext</span></tt> GNU internationalisation utilities package.
This is available from the standard repositories for most Linux distributions, or you can download it from <a class="reference external" href="http://www.gnu.org/software/gettext/">http://www.gnu.org/software/gettext/</a> if you need to compile it yourself.</p>
</div>
<div class="section" id="choose-your-language-code">
<h2>Choose your language code<a class="headerlink" href="#choose-your-language-code" title="Permalink to this headline">¶</a></h2>
<p>Computers use IETF language tags (see <a class="reference external" href="http://en.wikipedia.org/wiki/IETF_language_tag">http://en.wikipedia.org/wiki/IETF_language_tag</a>).
For example, in the UK we use <tt class="docutils literal"><span class="pre">en_GB</span></tt>.
This has two parts: <tt class="docutils literal"><span class="pre">en</span></tt> for English, and <tt class="docutils literal"><span class="pre">GB</span></tt> for the British version of it.
To find the correct code for your language, consult the list at <a class="reference external" href="http://www.gnu.org/software/gettext/manual/gettext.html#Language-Codes">http://www.gnu.org/software/gettext/manual/gettext.html#Language-Codes</a>.</p>
</div>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Your pywws directory should already have a subdirectory called translations.
This contains the existing set of language files, for example <tt class="docutils literal"><span class="pre">translations/sv/pywws.po</span></tt> contains the Swedish translations.
If one of these languages is what you need, then edit your weather.ini file and add a <tt class="docutils literal"><span class="pre">language</span></tt> entry to the <tt class="docutils literal"><span class="pre">[config]</span></tt> section, for example:</p>
<div class="highlight-python"><pre>[config]
day end hour = 21
gnuplot encoding = iso_8859_1
language = sv</pre>
</div>
<p>You may still need to compile and install your chosen language file.
This is done with <tt class="docutils literal"><span class="pre">setup.py</span></tt>:</p>
<div class="highlight-python"><pre>python setup.py msgfmt</pre>
</div>
<p>If there isn&#8217;t already a file for your language, the rest of this document tells you how to create one.</p>
</div>
<div class="section" id="create-a-language-file">
<h2>Create a language file<a class="headerlink" href="#create-a-language-file" title="Permalink to this headline">¶</a></h2>
<p>The first step is to create a file containing the strings you need to translate.
For example, to create a source file for the French language (code <tt class="docutils literal"><span class="pre">fr</span></tt>):</p>
<div class="highlight-python"><pre>python setup.py xgettext
python setup.py msgmerge --lang=fr</pre>
</div>
<p>This will ask you to confirm your email address, then create a <tt class="docutils literal"><span class="pre">pywws.po</span></tt> file in the directory <tt class="docutils literal"><span class="pre">translations/fr</span></tt>.
You should now edit <tt class="docutils literal"><span class="pre">pywws.po</span></tt>, filling in every <tt class="docutils literal"><span class="pre">msgstr</span></tt> line with a translation of the <tt class="docutils literal"><span class="pre">msgid</span></tt> line immediately above it.
The reason for including your email address is to allow anyone who has questions about your translation to get in touch with you.
Feel free to put in an invalid address if you are concerned about privacy.</p>
<p>After you&#8217;ve edited your new language file it needs to be compiled so that pywws can use it.
This is done with the <tt class="docutils literal"><span class="pre">msgfmt</span></tt> command:</p>
<div class="highlight-python"><pre>python setup.py msgfmt</pre>
</div>
<p>Don&#8217;t forget to do this every time you edit a language file.</p>
</div>
<div class="section" id="test-the-pywws-translation">
<h2>Test the pywws translation<a class="headerlink" href="#test-the-pywws-translation" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../api/pywws.Localisation.html#module-pywws.Localisation" title="pywws.Localisation"><tt class="xref py py-mod docutils literal"><span class="pre">Localisation</span></tt></a> module can be used to do a quick test of your language file installation:</p>
<div class="highlight-python"><pre>python -m pywws.Localisation -t fr</pre>
</div>
<p>This should produce output something like this:</p>
<div class="highlight-python"><pre>Locale changed from (None, None) to ('fr_FR', 'UTF-8')
Translation set OK
Locale
  decimal point: 23,2
  date &amp; time: lundi, 17 décembre (17/12/2012 16:00:48)
Translations
  'NNW' =&gt; 'NNO'
  'rising very rapidly' =&gt; 'en hausse très rapide'
  'Rain at times, very unsettled' =&gt; 'Quelques précipitations, très perturbé'</pre>
</div>
<p>Edit the language entry in your <tt class="docutils literal"><span class="pre">weather.ini</span></tt> file to use your language code (e.g. <tt class="docutils literal"><span class="pre">fr</span></tt>), then try using <a class="reference internal" href="../api/pywws.Plot.html#module-pywws.Plot" title="pywws.Plot"><tt class="xref py py-mod docutils literal"><span class="pre">Plot</span></tt></a> to plot a graph.
The X-axis of the graph should now be labeled in your language, using the translation you provided for &#8216;Time&#8217;, &#8216;Day&#8217; or &#8216;Date&#8217;.</p>
</div>
<div class="section" id="translating-the-documentation">
<h2>Translating the documentation<a class="headerlink" href="#translating-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>The system used to translate the strings used in pywws can also be used to translate the documentation.
The command to extract strings from the documentation is very similar:</p>
<div class="highlight-python"><pre>python setup.py xgettext_doc</pre>
</div>
<p>Note that this requires the <a class="reference external" href="http://sphinx-doc.org/">sphinx</a> package used to &#8216;compile&#8217; the documentation.
After extracting the strings, create source files for your language.
In this example the language is French, with the two letter code <tt class="docutils literal"><span class="pre">fr</span></tt>:</p>
<div class="highlight-python"><pre>python setup.py msgmerge --lang=fr</pre>
</div>
<p>This creates four files (<tt class="docutils literal"><span class="pre">index.po</span></tt>, <tt class="docutils literal"><span class="pre">essential.po</span></tt>, <tt class="docutils literal"><span class="pre">guides.po</span></tt> and <tt class="docutils literal"><span class="pre">api.po</span></tt>) that contain text strings (often whole paragraphs) extracted from the different parts of the documentation.</p>
<p>These files can be edited in a similar way to <tt class="docutils literal"><span class="pre">pywws.po</span></tt>.
Fill in each <tt class="docutils literal"><span class="pre">msgstr</span></tt> with a translation of the <tt class="docutils literal"><span class="pre">msgid</span></tt> above it.
Note that some strings (such as URLs and links to other parts of the documentation) should not be translated.
In these cases, leave the <tt class="docutils literal"><span class="pre">msgstr</span></tt> blank.</p>
<p>Translating all of the pywws documentation is a lot of work.
However, when the documentation is &#8216;compiled&#8217; any untranslated strings revert to their English original.
This means that a partial translation could still be useful &#8211; I suggest starting with the documentation front page, <tt class="docutils literal"><span class="pre">index.po</span></tt>.</p>
</div>
<div class="section" id="viewing-your-translated-documentation">
<h2>Viewing your translated documentation<a class="headerlink" href="#viewing-your-translated-documentation" title="Permalink to this headline">¶</a></h2>
<p>First convert your newly edited language files:</p>
<div class="highlight-python"><pre>python setup.py msgfmt</pre>
</div>
<p>Then delete the old documentation (if it exists) and rebuild using your language:</p>
<div class="highlight-python"><pre>rm -Rf doc/html/fr
LANG=fr python setup.py build_sphinx</pre>
</div>
<p>Note that the <tt class="docutils literal"><span class="pre">build_sphinx</span></tt> command doesn&#8217;t have a <tt class="docutils literal"><span class="pre">--lang</span></tt> option, so the language is set by a temporary environment variable.</p>
<p>Finally you can view the translated documentation by using a web browser to read the file <tt class="docutils literal"><span class="pre">doc/html/fr/index.html</span></tt>.</p>
</div>
<div class="section" id="update-the-language-files">
<h2>Update the language files<a class="headerlink" href="#update-the-language-files" title="Permalink to this headline">¶</a></h2>
<p>As pywws is extended, new strings may be added which will require your translation files to be extended as well.
This is fairly easy to do.
First you need to re-extract the strings to be translated, then merge them into your existing language files.
This is done by repeating the commands used to create the files:</p>
<div class="highlight-python"><pre>python setup.py xgettext
python setup.py xgettext_doc
python setup.py msgmerge --lang=fr</pre>
</div>
<p>This should add the new strings to your language files, without changing the strings you&#8217;ve already translated.</p>
<p>If the English language source has changed since your last translation, some strings may be marked by gettext as <tt class="docutils literal"><span class="pre">#,</span> <span class="pre">fuzzy</span></tt>.
You should check that your translation is still correct for these strings &#8211; the change may be trivial (e.g. a spelling correction) but it could be quite significant.
When you&#8217;ve checked (and corrected if necessary) the translation, remove the <tt class="docutils literal"><span class="pre">#,</span> <span class="pre">fuzzy</span></tt> line.</p>
</div>
<div class="section" id="send-jim-the-translation">
<h2>Send Jim the translation<a class="headerlink" href="#send-jim-the-translation" title="Permalink to this headline">¶</a></h2>
<p>I&#8217;m sure you would like others to benefit from the work you&#8217;ve done in translating pywws.
Please, please, please send a copy of your language file(s) (for example <tt class="docutils literal"><span class="pre">pywws.po</span></tt>) to <a class="reference external" href="mailto:jim&#37;&#52;&#48;jim-easterbrook&#46;me&#46;uk">jim<span>&#64;</span>jim-easterbrook<span>&#46;</span>me<span>&#46;</span>uk</a>.
When you send a new translation you need to include details of which pywws version it is based on &#8211; the easiest way to do this is to include the value of <tt class="docutils literal"><span class="pre">commit</span></tt> from the file <tt class="docutils literal"><span class="pre">pywws/version.py</span></tt> in your email.</p>
<p>Comments or questions? Please subscribe to the pywws mailing list <a class="reference external" href="http://groups.google.com/group/pywws">http://groups.google.com/group/pywws</a> and let us know.</p>
<hr class="docutils" />
<p>Comments or questions? Please subscribe to the pywws mailing list
<a class="reference external" href="http://groups.google.com/group/pywws">http://groups.google.com/group/pywws</a> and let us know.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/pywws_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">How to use pywws in another language</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#choose-your-language-code">Choose your language code</a></li>
<li><a class="reference internal" href="#getting-started">Getting started</a></li>
<li><a class="reference internal" href="#create-a-language-file">Create a language file</a></li>
<li><a class="reference internal" href="#test-the-pywws-translation">Test the pywws translation</a></li>
<li><a class="reference internal" href="#translating-the-documentation">Translating the documentation</a></li>
<li><a class="reference internal" href="#viewing-your-translated-documentation">Viewing your translated documentation</a></li>
<li><a class="reference internal" href="#update-the-language-files">Update the language files</a></li>
<li><a class="reference internal" href="#send-jim-the-translation">Send Jim the translation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="twitter.html"
                        title="previous chapter">How to configure pywws to post messages to Twitter</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="weather_ini.html"
                        title="next chapter">weather.ini - configuration file format</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="weather_ini.html" title="weather.ini - configuration file format"
             >next</a> |</li>
        <li class="right" >
          <a href="twitter.html" title="How to configure pywws to post messages to Twitter"
             >previous</a> |</li>
        <li><a href="../index.html">pywws 14.05.dev1208 documentation</a> &raquo;</li>
          <li><a href="index.html" >User guides</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-14, Jim Easterbrook.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>