<!DOCTYPE html>
<!-- TODO: refactor, so that the navbar and navtree are in their   -->
<!-- own templates and can be reused. Also, figure out how to get  -->
<!-- scrollspy to work. My first attempt failed. :-(               -->

<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
    <meta charset="utf-8">
    <title>Keyword Documentation - Robot Framework Hub</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" media="screen">


    <script type="text/javascript" src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>


    <link href="" type="text/css" rel="stylesheet">
    <!--[if lt IE 9]>
        <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <style type="text/css">
      body, html {
          margin: 0;
          padding-top: 60px;
          overflow: hidden;
          height:100%;
      }

      #left {
          position: absolute;
          top: 60px;
          bottom: 0;
          height:90%;
          width: 20%;
          overflow-y: scroll; 
      }
      
      #right {
          position: absolute;
          top: 60px;
          bottom: 0;
          right: 0;
          overflow-y: scroll;
          height:90%;
          width: 80%;
      }

      table.padded-table {
          margin-left: 10px;
      }
      table td {
          padding-left: 10px;
          padding-right: 10px;
      }
          table th {
          padding-left: 10px;
      }

    </style>
  </head>
  
  <body>
    <nav id="navbar" class="navbar navbar-default navbar-inverse navbar-fixed-top" 
         role="navigation">
      <div class="navbar-header">
	<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
	  <span class="sr-only">Toggle navigation</span>
	  <span class="icon-bar"></span>
	  <span class="icon-bar"></span>
	  <span class="icon-bar"></span>
	</button>
        <a class="navbar-brand" href="/dashboard/">Robot Framework Hub</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="nav navbar-nav">
          <!-- <li class="active"><a href="/">Home</a></li> -->
          <!-- <li><a href="/about">About</a></li> -->
        </ul>
      
      <!-- from http://stackoverflow.com/questions/18619740 -->
      <div class="col-sm-3 col-md-3 pull-right">
        <form class="navbar-form" role="search" action="/doc/keywords">
          <div class="input-group">
            <input type="text" class="form-control" 
                   placeholder="Search keywords" name="pattern" id="pattern">
            <div class="input-group-btn">
                <button class="btn btn-default" type="submit">
                  <i class="glyphicon glyphicon-search"></i></button>
            </div>
        </div>
        </form>
        </div>
      </div>
      
    </nav>


    <div class="well" id="left">
      <ul class="list-group list-unstyled">
        {% for item in data.hierarchy %}
          {% if data.libdoc.name == item.name %}
          <li>
            <label class="tree-toggler nav-header">{{item.name}}</label>
            <ul class="list-group list-unstyled tree">
          {% else %}
          <li>
            <label class="tree-toggler nav-header">{{item.name}}</label>
            <ul class="list-group list-unstyled tree collapse" >
          {% endif %}
              {% for kw in item.keywords %}
                <!-- FIXME: I should move the inline style to a stylesheet... -->
                <li style="margin-left: 10px">
                  <!-- this is wrong: I shouldn't be building URLs like htis... -->
                  <a href='{{kw.url}}'>{{kw.name}}</a></li>
              {% endfor %}
            </ul>
          </li>
        {% endfor %}
      </ul>
    </div>   

    <div class="well" id="right">
    {% block content %}{% endblock %}
    </div>

    <script>
      jQuery.fn.scrollTo = function(elem, speed) { 
          $(this).animate({
              scrollTop:  $(this).scrollTop() - $(this).offset().top + 
              $(elem).offset().top - 10
          }, speed == undefined ? 500 : speed); 
          return this; 
      };
    </script>
    <script>
      $(document).ready(function () {
          $('label.tree-toggler').click(function () {
              $(this).parent().children('ul.tree').toggle(200);
          });
          $("#right").scrollTo("#{{data['target']}}");
      });      
    </script>
  </body>
</html>
