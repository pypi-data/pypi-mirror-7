<!DOCTYPE html>
<!-- TODO: refactor, so that the navbar and navtree are in their   -->
<!-- own templates and can be reused. Also, figure out how to get  -->
<!-- scrollspy to work. My first attempt failed. :-(               -->

<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
    <meta charset="utf-8">
    <title>Keyword Documentation - Robot Framework Hub</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" media="screen">


    <script type="text/javascript" src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>


    <link href="" type="text/css" rel="stylesheet">
    <!--[if lt IE 9]>
        <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    
    <style type="text/css">
      body, html {
          margin: 0;
          padding-top: 60px;
          overflow: hidden;
          height:100%;
      }

      #left {
          position: absolute;
          top: 60px;
          bottom: 0;
          height:90%;
          width: 20%;
          overflow-y: scroll; 
      }
      
      #right {
          position: absolute;
          top: 60px;
          bottom: 0;
          right: 0;
          overflow-y: scroll;
          height:90%;
          width: 80%;
      }

      table.padded-table {
          margin-left: 10px;
      }
      table td {
          padding-left: 10px;
          padding-right: 10px;
      }
          table th {
          padding-left: 10px;
      }

    </style>
  </head>
  
  <body>
    <nav id="navbar" class="navbar navbar-default navbar-inverse navbar-fixed-top" 
         role="navigation">
      <div class="navbar-header">
        <a class="navbar-brand" href="/dashboard/">Robot Framework Hub</a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="nav navbar-nav">
          <!-- <li class="active"><a href="/">Home</a></li> -->
          <!-- <li><a href="/about">About</a></li> -->
        </ul>
      </div>
    </nav>


    <div class="well" id="left">
      <ul class="list-group list-unstyled">
        {% for item in data.hierarchy %}
        {#
        I should remember which items were collapsed and which
        were not, intead of collapsing everything but the 
        current one.
        #}
        {% if data.libdoc.name == item.name %}
        <li>
          <label class="tree-toggler nav-header">{{item.name}}</label>
          <ul class="list-group list-unstyled tree">
        {% else %}
        <li>
          <label class="tree-toggler nav-header">{{item.name}}</label>
          <ul class="list-group list-unstyled tree collapse" >
        {% endif %}
            {% for kw in item.keywords %}
              <!-- FIXME: I should move the inline style to a stylesheet... -->
              <li style="margin-left: 10px">
                <!-- this is wrong: I shouldn't be building URLs like htis... -->
                <a href='{{kw.url}}'>{{kw.name}}</a></li>
            {% endfor %}
          </ul>
        </li>
        {% endfor %}
      </ul>
    </div>   

    <div class="well" id="right">
      <h1>{{data.libdoc.name}}</h1>
      Version: {{data.libdoc.version}} 
      &#x2022 Scope: {{data.libdoc.scope}} 
      <!-- &#x2022 Named Arguments: {{data.libdoc.namesargs}} -->
      <h2>Introduction</h2>
      {% autoescape false %}
      {{ data.libdoc.doc }}
      {% endautoescape %}
      <p>
        <table class=example border=1>
          <tr><th>Keywords</th><th>Arguments</th><th>Documentation</th></tr>
          {% for item in data.keywords %}
          {% autoescape false %}
          <tr id='kw-{{item[0]|replace(' ','-')|lower()}}'>
            <td valign='top'><b>{{item[0]}}</b></td>
            <td valign='top'>{{item[1]}}</td>
            <td valign='top'>{{item[2]}}</td>
          </tr>
          {% endautoescape %}
          {% endfor %}
        </table>
    </div>
    <script>
      jQuery.fn.scrollTo = function(elem, speed) { 
          $(this).animate({
              scrollTop:  $(this).scrollTop() - $(this).offset().top + 
              $(elem).offset().top - 10
          }, speed == undefined ? 500 : speed); 
          return this; 
      };
    </script>
    <script>
      $(document).ready(function () {
          $('label.tree-toggler').click(function () {
              $(this).parent().children('ul.tree').toggle(200);
          });
          $("#right").scrollTo("#{{data['target']}}");
      });      
    </script>
  </body>
</html>
