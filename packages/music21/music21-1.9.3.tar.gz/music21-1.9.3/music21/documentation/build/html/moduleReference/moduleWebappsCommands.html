
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>music21.webapps.commands &mdash; music21 Documentation</title>
    
    <link rel="stylesheet" href="../_static/m21.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.9.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="top" title="music21 Documentation" href="../index.html" />
    <link rel="up" title="Module Reference" href="index.html" />
    <link rel="next" title="music21.webapps.templates" href="moduleWebappsTemplates.html" />
    <link rel="prev" title="music21.webapps.apps" href="moduleWebappsApps.html" /><link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="moduleWebappsTemplates.html" title="music21.webapps.templates"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="moduleWebappsApps.html" title="music21.webapps.apps"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">music21</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Module Reference</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="moduleWebappsApps.html"
                        title="previous chapter">music21.webapps.apps</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="moduleWebappsTemplates.html"
                        title="next chapter">music21.webapps.templates</a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">music21.webapps.commands</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
</ul>

<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Music21</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Music21 Concepts Overview</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usersGuide/index.html">Users Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../systemReference/index.html">System Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Module Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developerReference/index.html">Developer Reference</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/moduleReference/moduleWebappsCommands.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="music21-webapps-commands">
<span id="modulewebappscommands"></span><h1>music21.webapps.commands<a class="headerlink" href="#music21-webapps-commands" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-music21.webapps.commands"></span><div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="music21.webapps.commands.checkLeadSheetPitches">
<tt class="descclassname">music21.webapps.commands.</tt><tt class="descname">checkLeadSheetPitches</tt><big>(</big><em>worksheet</em>, <em>returnType=''</em><big>)</big><a class="headerlink" href="#music21.webapps.commands.checkLeadSheetPitches" title="Permalink to this definition">¶</a></dt>
<dd><p>checker routine for hack day demo lead sheet chord symbols exercise. Accepts
a stream with both the chord symbols and student&#8217;s chords, and returns the corrected
stream. if returnType=answerkey, the score is returned with the leadsheet pitches realized</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">worksheet</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">worksheet</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">harmony</span><span class="o">.</span><span class="n">ChordSymbol</span><span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">worksheet</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">harmony</span><span class="o">.</span><span class="n">ChordSymbol</span><span class="p">(</span><span class="s">&#39;G7&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">worksheet</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">harmony</span><span class="o">.</span><span class="n">ChordSymbol</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">worksheet</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">harmony</span><span class="o">.</span><span class="n">ChordSymbol</span><span class="p">(</span><span class="s">&#39;D7/A&#39;</span><span class="p">))</span> 
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">answerKey</span> <span class="o">=</span> <span class="n">webapps</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">checkLeadSheetPitches</span><span class="p">(</span> <span class="n">worksheet</span><span class="p">,</span> <span class="n">returnType</span> <span class="o">=</span> <span class="s">&#39;answerkey&#39;</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">answerKey</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
<span class="gp">... </span>    <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">pitches</span><span class="p">]</span>
<span class="go">[&#39;C3&#39;, &#39;E3&#39;, &#39;G3&#39;]</span>
<span class="go">[&#39;G2&#39;, &#39;B2&#39;, &#39;D3&#39;, &#39;F3&#39;]</span>
<span class="go">[&#39;B2&#39;, &#39;D#3&#39;, &#39;F#3&#39;]</span>
<span class="go">[&#39;A2&#39;, &#39;C3&#39;, &#39;D3&#39;, &#39;F#3&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="music21.webapps.commands.colorAllChords">
<tt class="descclassname">music21.webapps.commands.</tt><tt class="descname">colorAllChords</tt><big>(</big><em>sc</em>, <em>color</em><big>)</big><a class="headerlink" href="#music21.webapps.commands.colorAllChords" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through all chords and change their color to the given color - 
used for testing color rendering in noteflight</p>
</dd></dl>

<dl class="function">
<dt id="music21.webapps.commands.colorAllNotes">
<tt class="descclassname">music21.webapps.commands.</tt><tt class="descname">colorAllNotes</tt><big>(</big><em>sc</em>, <em>color</em><big>)</big><a class="headerlink" href="#music21.webapps.commands.colorAllNotes" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through all notes and change their color to the given color - 
used for testing color rendering in noteflight</p>
</dd></dl>

<dl class="function">
<dt id="music21.webapps.commands.correctChordSymbols">
<tt class="descclassname">music21.webapps.commands.</tt><tt class="descname">correctChordSymbols</tt><big>(</big><em>worksheet</em>, <em>studentResponse</em><big>)</big><a class="headerlink" href="#music21.webapps.commands.correctChordSymbols" title="Permalink to this definition">¶</a></dt>
<dd><p>Written for hackday demo: accepts as parameters a stream with chord symbols (the worksheet)
and the student&#8217;s attempt to write out the pitches for each chord symbol of the worksheet.
The student&#8217;s work is returned with annotations, and the percentage correct is also returned</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">worksheet</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">worksheet</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">harmony</span><span class="o">.</span><span class="n">ChordSymbol</span><span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">worksheet</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">harmony</span><span class="o">.</span><span class="n">ChordSymbol</span><span class="p">(</span><span class="s">&#39;G7&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">worksheet</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">harmony</span><span class="o">.</span><span class="n">ChordSymbol</span><span class="p">(</span><span class="s">&#39;B-&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">worksheet</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">harmony</span><span class="o">.</span><span class="n">ChordSymbol</span><span class="p">(</span><span class="s">&#39;D7/A&#39;</span><span class="p">))</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">studentResponse</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">studentResponse</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clef</span><span class="o">.</span><span class="n">TrebleClef</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">studentResponse</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chord</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;E&#39;</span><span class="p">,</span><span class="s">&#39;G&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">studentResponse</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chord</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;D5&#39;</span><span class="p">,</span> <span class="s">&#39;F5&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">studentResponse</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chord</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="s">&#39;B-&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">studentResponse</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chord</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="s">&#39;D4&#39;</span><span class="p">,</span> <span class="s">&#39;F#4&#39;</span><span class="p">,</span> <span class="s">&#39;A4&#39;</span><span class="p">,</span> <span class="s">&#39;C5&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newScore</span><span class="p">,</span> <span class="n">percentCorrect</span> <span class="o">=</span> <span class="n">webapps</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">correctChordSymbols</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">worksheet</span><span class="p">,</span> <span class="n">studentResponse</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">newScore</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
<span class="gp">... </span> <span class="n">x</span><span class="o">.</span><span class="n">lyric</span>
<span class="go">&#39;:)&#39;</span>
<span class="go">&#39;:)&#39;</span>
<span class="go">&#39;PITCHES&#39;</span>
<span class="go">&#39;INVERSION&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">percentCorrect</span>
<span class="go">50.0   </span>
</pre></div>
</div>
<p>Return object.</p>
</dd></dl>

<dl class="function">
<dt id="music21.webapps.commands.createMensuralCanon">
<tt class="descclassname">music21.webapps.commands.</tt><tt class="descname">createMensuralCanon</tt><big>(</big><em>sc</em><big>)</big><a class="headerlink" href="#music21.webapps.commands.createMensuralCanon" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements music21 example of creating a mensural canon</p>
</dd></dl>

<dl class="function">
<dt id="music21.webapps.commands.determineDissonantIdentificationAccuracy">
<tt class="descclassname">music21.webapps.commands.</tt><tt class="descname">determineDissonantIdentificationAccuracy</tt><big>(</big><em>scoreIn</em>, <em>offsetList</em>, <em>keyStr=None</em><big>)</big><a class="headerlink" href="#music21.webapps.commands.determineDissonantIdentificationAccuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>runs comparison on score to identify dissonances, then compares to the user&#8217;s offsetList of identified
dissonances. The score is colored according to the results, and appropriate information is returned
as a dictionary. See runPerceivedDissonanceAnalysis for full details and an example.</p>
<p><em>Color key</em>
* Green: the user also recognizes this as a dissonant vertical slice GREEN
* Red: the user did not recognize as a dissonant vertical slice RED
* Blue: the user recognized it as a dissonant vertical slice BLUE</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Score</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Part</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c1</span> <span class="o">=</span> <span class="n">chord</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="s">&#39;C3&#39;</span><span class="p">,</span><span class="s">&#39;E3&#39;</span><span class="p">,</span><span class="s">&#39;G3&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c1</span><span class="o">.</span><span class="n">isConsonant</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c2</span> <span class="o">=</span> <span class="n">chord</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="s">&#39;C3&#39;</span><span class="p">,</span><span class="s">&#39;B3&#39;</span><span class="p">,</span><span class="s">&#39;D#&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c2</span><span class="o">.</span><span class="n">isConsonant</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c3</span> <span class="o">=</span> <span class="n">chord</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="s">&#39;D3&#39;</span><span class="p">,</span><span class="s">&#39;F#3&#39;</span><span class="p">,</span><span class="s">&#39;A&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c3</span><span class="o">.</span><span class="n">isConsonant</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c4</span> <span class="o">=</span> <span class="n">chord</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="s">&#39;B-4&#39;</span><span class="p">,</span><span class="s">&#39;F#4&#39;</span><span class="p">,</span><span class="s">&#39;A-3&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c4</span><span class="o">.</span><span class="n">isConsonant</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">makeMeasures</span><span class="p">(</span><span class="n">inPlace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aData</span> <span class="o">=</span> <span class="n">webapps</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">determineDissonantIdentificationAccuracy</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="p">[</span><span class="mf">2.3</span><span class="p">,</span><span class="mf">3.2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span> <span class="o">=</span> <span class="n">aData</span><span class="p">[</span><span class="s">&#39;stream&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s">&#39;Chord&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="o">==</span> <span class="bp">None</span> <span class="c">#BLACK (by default)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="c">#RED</span>
<span class="go">&#39;#cc3300&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="c">#BLUE</span>
<span class="go">&#39;#0033cc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="c">#GREEN</span>
<span class="go">&#39;#00cc33&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="music21.webapps.commands.generateChords">
<tt class="descclassname">music21.webapps.commands.</tt><tt class="descname">generateChords</tt><big>(</big><em>numChords</em>, <em>kind=''</em><big>)</big><a class="headerlink" href="#music21.webapps.commands.generateChords" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomly generate a score of chords for use with the perceived dissonances
app. These chords may be dissonant or consonant. if kind = &#8216;diatonicTriads&#8217;,
only diatonic triads will be generated</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span> <span class="o">=</span> <span class="n">webapps</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">generateChords</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="s">&#39;diatonicTriads&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">webapps</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">runPerceivedDissonanceAnalysis</span><span class="p">(</span><span class="n">sc</span><span class="p">,[</span><span class="mf">1.2</span><span class="p">,</span><span class="mf">3.2</span><span class="p">,</span><span class="mf">5.2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="s">&#39;fullScore&#39;</span><span class="p">][</span><span class="s">&#39;stream&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s">&#39;Chord&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="o">!=</span> <span class="bp">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="o">!=</span> <span class="bp">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="o">!=</span> <span class="bp">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;#cc3300&#39;</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sc2</span> <span class="o">=</span> <span class="n">webapps</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">generateChords</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">webapps</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">runPerceivedDissonanceAnalysis</span><span class="p">(</span><span class="n">sc2</span><span class="p">,[</span><span class="mf">1.2</span><span class="p">,</span><span class="mf">3.2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="s">&#39;fullScore&#39;</span><span class="p">][</span><span class="s">&#39;stream&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s">&#39;Chord&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="o">!=</span> <span class="bp">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="o">!=</span> <span class="bp">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;#cc3300&#39;</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chords</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;#cc3300&#39;</span><span class="p">]</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="music21.webapps.commands.generateIntervals">
<tt class="descclassname">music21.webapps.commands.</tt><tt class="descname">generateIntervals</tt><big>(</big><em>numIntervals</em>, <em>kind=None</em>, <em>octaveSpacing=None</em><big>)</big><a class="headerlink" href="#music21.webapps.commands.generateIntervals" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="music21.webapps.commands.reduction">
<tt class="descclassname">music21.webapps.commands.</tt><tt class="descname">reduction</tt><big>(</big><em>sc</em><big>)</big><a class="headerlink" href="#music21.webapps.commands.reduction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="music21.webapps.commands.runPerceivedDissonanceAnalysis">
<tt class="descclassname">music21.webapps.commands.</tt><tt class="descname">runPerceivedDissonanceAnalysis</tt><big>(</big><em>scoreIn</em>, <em>offsetList</em>, <em>keyStr=None</em><big>)</big><a class="headerlink" href="#music21.webapps.commands.runPerceivedDissonanceAnalysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Perceived Dissonances: Demo app for NEMCOG meeting, April 28 2012</p>
<p>webapp for determining the accuracy of aural identification of dissonances
the user listens to a piece of music and clicks when they think they hear a dissonance. this
information is then passed to this method, which compares the score to the list of offsets corresponding
to when the user clicked. Music21 then identifies the dissonant vertical slices, and outputs results as a
dictionary including the score, colored by vertical slices of interest as below:</p>
<p>Green: both music21 and the user identified as dissonant
Blue: only the user identified as dissonant
Red: only music21 identified as dissonant</p>
<p>This example runs two analysis, the first is a comparison with the unmodified score and user&#8217;s offsets, the second
with the passing tones and neighbor tones of the score removed. Results are returned as nested dictionaries of the
following form:
{fullScore , nonharmonicTonesRemovedScore}
each of which is a dictionary containing these keys:
{&#8216;stream&#8217;, &#8216;numUserIdentified&#8217;, &#8216;numMusic21Identified&#8217;, &#8216;numBothIdentified&#8217;, &#8216;accuracy&#8217;, &#8216;romans&#8217;, &#8216;key&#8217;}</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">piece</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;bwv7.7&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">measures</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">offsetList</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="mf">1.1916666666666667</span><span class="p">,</span>
<span class="gp">... </span>    <span class="mf">2.3641666666666667</span><span class="p">,</span>
<span class="gp">... </span>    <span class="mf">3.6041666666666665</span><span class="p">,</span>
<span class="gp">... </span>    <span class="mf">4.5808333333333335</span><span class="p">,</span>
<span class="gp">... </span>    <span class="mf">6.131666666666667</span><span class="p">,</span>
<span class="gp">... </span>    <span class="mf">8.804166666666667</span><span class="p">,</span>
<span class="gp">... </span>    <span class="mf">10.148333333333333</span><span class="p">,</span>
<span class="gp">... </span>    <span class="mf">11.700833333333334</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">analysisDict</span> <span class="o">=</span> <span class="n">webapps</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">runPerceivedDissonanceAnalysis</span><span class="p">(</span><span class="n">piece</span><span class="p">,</span> <span class="n">offsetList</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">analysisDict</span><span class="p">[</span><span class="s">&#39;fullScore&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s">&#39;numMusic21Identified&#39;</span><span class="p">]</span>
<span class="go">7</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s">&#39;numBothIdentified&#39;</span><span class="p">]</span>
<span class="go">3</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s">&#39;numUserIdentified&#39;</span><span class="p">]</span>
<span class="go">8</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s">&#39;romans&#39;</span><span class="p">]</span>
<span class="go">[&#39;v43&#39;, &#39;iio65&#39;, &#39;bVIIb73&#39;]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">analysisDict</span><span class="p">[</span><span class="s">&#39;nonharmonicTonesRemovedScore&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s">&#39;numMusic21Identified&#39;</span><span class="p">]</span>
<span class="go">5</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s">&#39;numBothIdentified&#39;</span><span class="p">]</span>
<span class="go">2</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s">&#39;accuracy&#39;</span><span class="p">]</span>
<span class="go">40.0 </span>
</pre></div>
</div>
<p>Return dictionary.</p>
</dd></dl>

<dl class="function">
<dt id="music21.webapps.commands.writeMIDIFileToServer">
<tt class="descclassname">music21.webapps.commands.</tt><tt class="descname">writeMIDIFileToServer</tt><big>(</big><em>sc</em><big>)</big><a class="headerlink" href="#music21.webapps.commands.writeMIDIFileToServer" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through all notes and change their color to the given color - 
used for testing color rendering in noteflight</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="moduleWebappsTemplates.html" title="music21.webapps.templates"
             >next</a> |</li>
        <li class="right" >
          <a href="moduleWebappsApps.html" title="music21.webapps.apps"
             >previous</a> |</li>
        <li><a href="../index.html">music21</a> &raquo;</li>
          <li><a href="index.html" >Module Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2013, Michael Scott Cuthbert and the music21 Project.
      Last updated on Jun 25, 2014.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>