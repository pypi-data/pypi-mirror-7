

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Introduction &mdash; pybdf (&#39;0.2.4&#39;,) documentation</title>
    
    <link rel="stylesheet" href="_static/scipy.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '(&#39;0.2.4&#39;,)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pybdf (&#39;0.2.4&#39;,) documentation" href="index.html" />
    <link rel="prev" title="Welcome to pybdf’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to pybdf’s documentation!"
             accesskey="P">previous</a> |</li>
<li><a href="index.html">pybdf ('0.2.4',) documentation</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Samuele Carcagno</td>
</tr>
</tbody>
</table>
<p>pybdf is a Python library to read electroencephalographic
recordings stored in the BIOSEMI 24-bit BDF format.</p>
</div>
<div class="section" id="download-and-installation">
<h1>Download and Installation<a class="headerlink" href="#download-and-installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h2>
<p>The latest release of pybdf can be downloaded from the python package index:</p>
<p><a class="reference external" href="http://pypi.python.org/pypi/pybdf/">http://pypi.python.org/pypi/pybdf/</a></p>
<p>For developers: the source code of pybdf is hosted on
github:</p>
<p><a class="reference external" href="https://github.com/sam81/pybdf">https://github.com/sam81/pybdf</a></p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>To install pybdf you will need:</dt>
<dd><ul class="first last simple">
<li>python</li>
<li>numpy</li>
<li>a fortran compiler</li>
</ul>
</dd>
</dl>
<p>On all platforms, after having unpacked the archive
you can install pybdf by running:</p>
<div class="highlight-python"><pre>python setup.py install</pre>
</div>
<p>Note that pybdf has been built and tested only on Linux with Python3. I don&#8217;t have
enhough time to build and test binaries for Windows and Mac OS X, but if
you try, please let me know how you get on with it.</p>
</div>
</div>
</div>
<div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>To open a bdf file you need to create a <cite>bdfRecording</cite>
object as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">bdfRec</span> <span class="o">=</span> <span class="n">bdfRecording</span><span class="p">(</span><span class="s">&#39;res1.bdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>you can then query the properties of the recording stored in the BDF header using the
appropriate functions, which are fully described <a class="reference internal" href="#module-label"><em>here</em></a>.
Some examples are shown below.</p>
<p>Get the duration of the recording:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">bdfRec</span><span class="o">.</span><span class="n">recordDuration</span>
</pre></div>
</div>
<p>Get the sampling rate of each channel:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">bdfRec</span><span class="o">.</span><span class="n">sampRate</span>
</pre></div>
</div>
<p>Get the channel labels:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">bdfRec</span><span class="o">.</span><span class="n">chanLabels</span>
</pre></div>
</div>
<p>To read in the data use the following method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rec</span> <span class="o">=</span> <span class="n">bdfRec</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span>
</pre></div>
</div>
<p>this returns a python dictionary
with the following fields:</p>
<ul class="simple">
<li>data : an array of floats with dimensions nChannels X nDataPoints</li>
<li>eventTable : a dictionary with the codes, indexes and durations of triggers</li>
<li>chanLabels : a list with the channel labels</li>
</ul>
<p>For example, to get the value of the first sample of the recording,
in the first channel, you can type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rec</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>the same sample value, but for the second channel, is stored in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rec</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>The <cite>eventTable</cite> contains a list of the trigger codes for the experimental conditions:</p>
<div class="highlight-python"><pre>rec['eventTable`]['code']</pre>
</div>
<p>as well as a list of the sample numbers (or indexes) at which they started in the recording, and a list of their durations in seconds:</p>
<div class="highlight-python"><pre>rec['eventTable']['idx']
rec['eventTable`]['dur']</pre>
</div>
<p>The ActiveTwo actually stores one trigger code for each recording sample rather than
a list of trigger onsets and durations as the <cite>eventTable</cite> does. The &#8220;raw&#8221; trigger channel
with one trigger code for each recording sample can be retrieved by passing the argument <cite>trigChan = True</cite>
to the <cite>getData()</cite> function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rec</span> <span class="o">=</span> <span class="n">bdfRec</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span><span class="n">trigChan</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>the &#8220;raw&#8221; trigger channel will then be returned in <cite>rec[&#8216;trigChan&#8217;]</cite>.
Please, note that <cite>pybdf</cite> currently reads only the trigger inputs 1-8 and disregards
the trigger inputs 9-16.</p>
<p>It is also possible to retrieve additional system codes (bits 16-23 of the
status channel, see <a class="reference external" href="http://www.biosemi.com/faq/trigger_signals.htm">http://www.biosemi.com/faq/trigger_signals.htm</a>), like CMS
in/out-of range, battery low/OK. These are returned in <cite>rec[&#8216;sysCodeChan&#8217;]</cite>
when the <cite>sysCodeChan = True</cite> argument is passed to the <cite>getData()</cite> function.
No particular effort has been made to decode these system codes.</p>
<p>Other usage examples are provided in the &#8216;examples&#8217; directory inside
the pybdf source archive.</p>
<p>Beware that pybdf does not check that you have sufficient RAM to
read all the data in a bdf file. If you try to read a file that is
too big for your hardware, you system may become slow or unresponsive.
Initially try reading only a small amount of data, and check how much
RAM that uses. You can read only a portion of the data by passing the
beginning and end arguments to the getData() function.
For example, to read the first 10 seconds of the recording, use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rec</span> <span class="o">=</span> <span class="n">bdfRec</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span><span class="n">beginning</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="bugs">
<h1>Bugs<a class="headerlink" href="#bugs" title="Permalink to this headline">¶</a></h1>
<p>Please, report any bugs on github <a class="reference external" href="https://github.com/sam81/pybdf/issues">https://github.com/sam81/pybdf/issues</a></p>
<div class="section" id="known-issues">
<h2>Known issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<p>The filename or filepath of the BDF recording is currently limited
to 256 characters. That should be sufficient for most purposes.</p>
</div>
</div>
<div class="section" id="module-pybdf">
<span id="pybdf-class-to-read-biosemi-bdf-files"></span><span id="module-label"></span><h1><a class="reference internal" href="#module-pybdf" title="pybdf"><tt class="xref py py-mod docutils literal"><span class="pre">pybdf</span></tt></a> &#8211; Class to read BIOSEMI BDF files<a class="headerlink" href="#module-pybdf" title="Permalink to this headline">¶</a></h1>
<p>This module can be used to read the header and data from
24-bit Biosemi BDF files recorded with the ActiveTwo system.</p>
<p><strong>Examples</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">bdfRec</span> <span class="o">=</span> <span class="n">bdfRecording</span><span class="p">(</span><span class="s">&#39;res1.bdf&#39;</span><span class="p">)</span> <span class="c">#create bdfRecording object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bdfRec</span><span class="o">.</span><span class="n">recordDuration</span> <span class="c">#how many seconds the recording lasts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bdfRec</span><span class="o">.</span><span class="n">sampRate</span> <span class="c">#sampling rate for each channel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">#read 10 seconds of data from the first two channels</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rec</span> <span class="o">=</span> <span class="n">bdfRec</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span><span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">beginning</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<dl class="class">
<dt id="pybdf.bdfRecording">
<em class="property">class </em><tt class="descclassname">pybdf.</tt><tt class="descname">bdfRecording</tt><big>(</big><em>fileName</em><big>)</big><a class="reference internal" href="_modules/pybdf.html#bdfRecording"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybdf.bdfRecording" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for dealing with BIOSEMI 24-bit BDF files.
A bdfRecording object is created with the following syntax:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">bdfRec</span> <span class="o">=</span> <span class="n">bdfRecording</span><span class="p">(</span><span class="s">&#39;bdf_file.bdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This reads the BDF header, but not the data. You need to use
the getData() method to read the data.
The full documentation of the BDF file format can be found here:
<a class="reference external" href="http://www.biosemi.com/faq/file_format.htm">http://www.biosemi.com/faq/file_format.htm</a></p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="14%" />
<col width="68%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>idCode</td>
<td>str</td>
<td>Identification code</td>
</tr>
<tr class="row-even"><td>subjId</td>
<td>str</td>
<td>Local subject identification</td>
</tr>
<tr class="row-odd"><td>recId</td>
<td>str</td>
<td>Local recording identification</td>
</tr>
<tr class="row-even"><td>startDate</td>
<td>str</td>
<td>Recording start date</td>
</tr>
<tr class="row-odd"><td>startTime</td>
<td>str</td>
<td>Recording start time</td>
</tr>
<tr class="row-even"><td>nBytes</td>
<td>int</td>
<td>Number of bytes occupied by the bdf header</td>
</tr>
<tr class="row-odd"><td>versionDataFormat</td>
<td>str</td>
<td>Version of data format</td>
</tr>
<tr class="row-even"><td>nDataRecords</td>
<td>int</td>
<td>Number of data records &#8220;-1&#8221; if unknown</td>
</tr>
<tr class="row-odd"><td>recordDuration</td>
<td>float</td>
<td>Duration of a data record, in seconds</td>
</tr>
<tr class="row-even"><td>nChannels</td>
<td>int</td>
<td>Number of channels in data record</td>
</tr>
<tr class="row-odd"><td>chanLabels</td>
<td>list of str</td>
<td>Channel labels</td>
</tr>
<tr class="row-even"><td>transducer</td>
<td>list of str</td>
<td>Transducer type</td>
</tr>
<tr class="row-odd"><td>physDim</td>
<td>str</td>
<td>Physical dimension of channels</td>
</tr>
<tr class="row-even"><td>physMin</td>
<td>list of int</td>
<td>Physical minimum in units of physical dimension</td>
</tr>
<tr class="row-odd"><td>physMax</td>
<td>list of int</td>
<td>Physical maximum in units of physical dimension</td>
</tr>
<tr class="row-even"><td>digMin</td>
<td>list of int</td>
<td>Digital minimum</td>
</tr>
<tr class="row-odd"><td>digMax</td>
<td>list of int</td>
<td>Digital maximum</td>
</tr>
<tr class="row-even"><td>prefilt</td>
<td>list of str</td>
<td>Prefiltering</td>
</tr>
<tr class="row-odd"><td>nSampRec</td>
<td>list of int</td>
<td>Number of samples in each data record</td>
</tr>
<tr class="row-even"><td>reserved</td>
<td>list of str</td>
<td>Reserved</td>
</tr>
<tr class="row-odd"><td>scaleFactor</td>
<td>list of floats</td>
<td>Scaling factor for digital to physical dimension</td>
</tr>
<tr class="row-even"><td>sampRate</td>
<td>list of int</td>
<td>Recording sampling rate</td>
</tr>
<tr class="row-odd"><td>statusChanIdx</td>
<td>int</td>
<td>Index of the status channel</td>
</tr>
<tr class="row-even"><td>nDataChannels</td>
<td>int</td>
<td>Number of data channels containing data (rather than trigger codes)</td>
</tr>
<tr class="row-odd"><td>dataChanLabels</td>
<td>list of str</td>
<td>Labels of the channels containing data (rather than trigger codes)</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="pybdf.bdfRecording.getData">
<tt class="descname">getData</tt><big>(</big><em>beginning=0</em>, <em>end=None</em>, <em>channels=None</em>, <em>eventTable=True</em>, <em>trigChan=False</em>, <em>sysCodeChan=False</em><big>)</big><a class="reference internal" href="_modules/pybdf.html#bdfRecording.getData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybdf.bdfRecording.getData" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the data from a bdfRecording object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>beginning</strong> : int</p>
<blockquote>
<div><p>Start time of data chunk to read (seconds).</p>
</div></blockquote>
<p><strong>end</strong> : int</p>
<blockquote>
<div><p>End time of data chunk to read (seconds).</p>
</div></blockquote>
<p><strong>channels</strong> : list of integers or strings</p>
<blockquote>
<div><p>Channels to read. Both channel numbers, or channel names are accepted. Note that channel numbers are indexed starting from <em>zero</em>.</p>
</div></blockquote>
<p><strong>eventTable</strong> : boolean</p>
<blockquote>
<div><p>If True, return the triggers event table</p>
</div></blockquote>
<p><strong>trigChan</strong> : boolean</p>
<blockquote>
<div><p>If True, return the channel containing the triggers (trigger inputs 1-8 only)</p>
</div></blockquote>
<p><strong>sysCodeChan</strong> : boolean</p>
<blockquote>
<div><p>If True, return the channel containing the system codes</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>rec</strong> : a dictionary with the following keys:</p>
<blockquote class="last">
<div><ul>
<li><p class="first">data : an array of floats with dimenions nChannels X nDataPoints</p>
</li>
<li><p class="first">chanLabels : a list containing the labels of the channels that were read,
in the same order they are inserted in the data matrix</p>
</li>
<li><p class="first">trigChannel : an array of integers with the triggers in decimal format (trigger inputs 1-8 only)</p>
</li>
<li><p class="first">sysCodeChannel : an array of integers with the system codes in decimal format</p>
</li>
<li><dl class="first docutils">
<dt>eventTable <span class="classifier-delimiter">:</span> <span class="classifier">a dictionary with the following keys</span></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>code <span class="classifier-delimiter">:</span> <span class="classifier">array of ints</span></dt>
<dd><p class="first last">The trigger codes</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>idx <span class="classifier-delimiter">:</span> <span class="classifier">array of ints</span></dt>
<dd><p class="first last">The indexes of the trigger codes</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>dur <span class="classifier-delimiter">:</span> <span class="classifier">array of floats</span></dt>
<dd><p class="first last">The duration of the triggers, in seconds</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">bdfRecording</span><span class="p">(</span><span class="s">&#39;res1.bdf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rec</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span><span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">beginning</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Introduction</a></li>
<li><a class="reference internal" href="#download-and-installation">Download and Installation</a><ul>
<li><a class="reference internal" href="#download">Download</a></li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#bugs">Bugs</a><ul>
<li><a class="reference internal" href="#known-issues">Known issues</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-pybdf"><tt class="docutils literal"><span class="pre">pybdf</span></tt> &#8211; Class to read BIOSEMI BDF files</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to pybdf&#8217;s documentation!</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/intro.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<ul class="this-page-menu">
  <li><a href="/numpy/docs/numpy-docs/intro.rst">Edit page</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to pybdf’s documentation!"
             >previous</a> |</li>
<li><a href="index.html">pybdf ('0.2.4',) documentation</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Samuele Carcagno.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>