

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Event Latency &mdash; SimPy 3.0.4 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'3.0.4',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="SimPy 3.0.4 documentation" href="../index.html"/>
        <link rel="up" title="Examples" href="index.html"/>
        <link rel="next" title="API Reference" href="../api_reference/index.html"/>
        <link rel="prev" title="Process Communication" href="process_communication.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../contents.html" class="icon icon-home"> SimPy</a>
        <form class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">SimPy home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simpy_intro/index.html">SimPy in 10 Minutes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../simpy_intro/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simpy_intro/basic_concepts.html">Basic Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simpy_intro/process_interaction.html">Process Interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simpy_intro/shared_resources.html">Shared Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simpy_intro/how_to_proceed.html">How to Proceed</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../topical_guides/index.html">Topical Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../topical_guides/simpy_basics.html">SimPy basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topical_guides/environments.html">Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topical_guides/events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topical_guides/process_interaction.html">Process Interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topical_guides/porting_from_simpy2.html">Porting from SimPy 2 to 3</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#condition-events">Condition events</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#interrupts">Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#monitoring">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#resources-container">Resources: Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#resources-preemptive-resource">Resources: Preemptive Resource</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#resources-resource">Resources: Resource</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#resources-store">Resources: Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#shared-events">Shared events</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#waiting-for-other-processes">Waiting for other processes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#all-examples">All examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/simpy.html"><tt class="docutils literal"><span class="pre">simpy</span></tt> &#8212; The end user API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/simpy.core.html"><tt class="docutils literal"><span class="pre">simpy.core</span></tt> &#8212; SimPy&#8217;s core components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/simpy.events.html"><tt class="docutils literal"><span class="pre">simpy.events</span></tt> &#8212; Core event types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/simpy.monitoring.html"><tt class="docutils literal"><span class="pre">simpy.monitoring</span></tt> &#8212; Monitor SimPy simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/simpy.resources.html"><tt class="docutils literal"><span class="pre">simpy.resources</span></tt> &#8212; SimPy&#8217;s built-in resource types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/simpy.resources.base.html"><tt class="docutils literal"><span class="pre">simpy.resources.base</span></tt> &#8212; Base classes for all resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/simpy.resources.container.html"><tt class="docutils literal"><span class="pre">simpy.resources.container</span></tt> &#8212; Container type resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/simpy.resources.resource.html"><tt class="docutils literal"><span class="pre">simpy.resources.resource</span></tt> &#8211; Resource type resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/simpy.resources.store.html"><tt class="docutils literal"><span class="pre">simpy.resources.store</span></tt> &#8212; Store type resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/simpy.rt.html"><tt class="docutils literal"><span class="pre">simpy.rt</span></tt> &#8212; Real-time simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/simpy.util.html"><tt class="docutils literal"><span class="pre">simpy.util</span></tt> &#8212; Utility functions for SimPy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About SimPy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/history.html">SimPy History &amp; Change Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/acknowledgements.html">Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/ports.html">Ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/defense_of_design.html">Defense of Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/release_process.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/license.html">License</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">SimPy</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../contents.html">Docs</a> &raquo;</li>
  <li><a href="">Event Latency</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="event-latency">
<h1>Event Latency<a class="headerlink" href="#event-latency" title="Permalink to this headline">Â¶</a></h1>
<p>Covers:</p>
<ul class="simple">
<li>Resources: Store</li>
</ul>
<p>This example shows how to separate the time delay of events between processes
from the processes themselves.</p>
<dl class="docutils">
<dt>When Useful:</dt>
<dd><p class="first">When modeling physical things such as cables, RF propagation, etc.  it
better encapsulation to keep this propagation mechanism outside of the
sending and receiving processes.</p>
<p class="last">Can also be used to interconnect processes sending messages</p>
</dd>
<dt>Example by:</dt>
<dd>Keith Smith</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Event Latency example</span>

<span class="sd">Covers:</span>

<span class="sd">- Resources: Store</span>

<span class="sd">Scenario:</span>
<span class="sd">  This example shows how to separate the time delay of events between</span>
<span class="sd">  processes from the processes themselves.</span>

<span class="sd">When Useful:</span>
<span class="sd">  When modeling physical things such as cables, RF propagation, etc.  it</span>
<span class="sd">  better encapsulation to keep this propagation mechanism outside of the</span>
<span class="sd">  sending and receiving processes.</span>

<span class="sd">  Can also be used to interconnect processes sending messages</span>

<span class="sd">Example by:</span>
<span class="sd">  Keith Smith</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">simpy</span>


<span class="n">SIM_DURATION</span> <span class="o">=</span> <span class="mi">100</span>


<span class="k">class</span> <span class="nc">Cable</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class represents the propagation through a cable.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">delay</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="o">=</span> <span class="n">env</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="n">delay</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span> <span class="o">=</span> <span class="n">simpy</span><span class="o">.</span><span class="n">Store</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">latency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">timeout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delay</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">latency</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">sender</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">cable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A process which randomly generates messages.&quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="c"># wait for next transmission</span>
        <span class="k">yield</span> <span class="n">env</span><span class="o">.</span><span class="n">timeout</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">cable</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s">&#39;Sender sent this at </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">env</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">receiver</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">cable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A process which consumes messages.&quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="c"># Get event for message pipe</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">cable</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Received this at </span><span class="si">%d</span><span class="s"> while </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">now</span><span class="p">,</span> <span class="n">msg</span><span class="p">))</span>


<span class="c"># Setup and start the simulation</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;Event Latency&#39;</span><span class="p">)</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">simpy</span><span class="o">.</span><span class="n">Environment</span><span class="p">()</span>

<span class="n">cable</span> <span class="o">=</span> <span class="n">Cable</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">env</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">sender</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">cable</span><span class="p">))</span>
<span class="n">env</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">receiver</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">cable</span><span class="p">))</span>

<span class="n">env</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="n">SIM_DURATION</span><span class="p">)</span>
</pre></div>
</div>
<p>The simulation&#8217;s output:</p>
<div class="highlight-python"><div class="highlight"><pre>Event Latency
Received this at 15 while Sender sent this at 5
Received this at 20 while Sender sent this at 10
Received this at 25 while Sender sent this at 15
Received this at 30 while Sender sent this at 20
Received this at 35 while Sender sent this at 25
Received this at 40 while Sender sent this at 30
Received this at 45 while Sender sent this at 35
Received this at 50 while Sender sent this at 40
Received this at 55 while Sender sent this at 45
Received this at 60 while Sender sent this at 50
Received this at 65 while Sender sent this at 55
Received this at 70 while Sender sent this at 60
Received this at 75 while Sender sent this at 65
Received this at 80 while Sender sent this at 70
Received this at 85 while Sender sent this at 75
Received this at 90 while Sender sent this at 80
Received this at 95 while Sender sent this at 85
</pre></div>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="../api_reference/index.html" class="btn btn-neutral float-right" title="API Reference"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="process_communication.html" class="btn btn-neutral" title="Process Communication"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2002-2014, Team SimPy.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>