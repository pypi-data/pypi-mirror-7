#!/usr/bin/env python
"""Naval Fate.

Usage:
  ltcrabbit-cli worker list (--apikey=<api_key>)
  ltcrabbit-cli -h | --help
  ltcrabbit-cli --version

Options:
  -h --help     Show this screen.
  --version     Show version.
  --apikey=<api_key>      API Key

"""

from ltcrabbit import LtcRabbit, __version__
from prettytable import PrettyTable
from docopt import docopt


def worker_list(api_key):
    ltcrabbit_api = LtcRabbit(api_key)

    data = ltcrabbit_api.get_appdata()

    x = PrettyTable(["Name", "Hashrate", "Active", "Monitoring", "Algo"])

    for row in data['worker']:
        line = [row['name'], row['hashrate'], row['active'], row['monitoring'], row['algo']]
        x.add_row(line)

    print x


def main(arguments):
    api_key = arguments['--apikey']
    if arguments['worker']:
        if arguments['list']:
            worker_list(api_key)


if __name__ == '__main__':
    arguments = docopt(__doc__, version='LTCRabbit %s' % __version__)
    main(arguments)