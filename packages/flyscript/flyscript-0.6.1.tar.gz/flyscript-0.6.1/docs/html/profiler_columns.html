<html>
<head>
<link rel="stylesheet" href="ridl.css" />
<link rel="stylesheet" href="flyscript.css" />
<title>FlyScript Documentation</title>
</head>

<body>
<div class="header">
<a href="http://www.riverbed.com"><img src="rb-logo.png" align="left"></a>
<div>
<p class="headerleft">FlyScript Documentation</p>
<p class="headerright"> Version 0.6.1
 - last updated May 01, 2014 at 01:05 PM</p>

</div>

</div>

<div class="navbar">

<div class="links" markdown="1">

<p><span class="toctitle">Quick Links:</span></p>
<ul>
<li><a href="index.html">Home</a></li>
<li><a href="tutorials.html">Tutorials</a></li>
<li>Modules<ul>
<li><a href="common.html"><code>rvbd.common</code></a></li>
<li><a href="shark.html"><code>rvbd.shark</code></a></li>
<li><a href="profiler.html"><code>rvbd.profiler</code></a></li>
</ul>
</li>
<li><a href="rest_apis.html">REST APIs</a></li>
<li><a href="glossary.html">Glossary</a></li>
</ul>
</div>

<div class="toc"><span class="toctitle">On this page:</span><ul>
<li><a href="#a-note-about-columns">A Note About Columns</a></li>
</ul>
</div>
</div>

<div class="content">

<h1 id="a-note-about-columns">A Note About Columns</h1>
<p>As mentioned earlier, one of the key pieces of information <code>Profiler</code> keeps
track of are all of the different Column types, and under what context they are
appropriate.  For instance, if we are running a Traffic Summary report, then
'time' is not a valid column of data since this report type organizes its
information in other ways.</p>
<p>Column types fall into two categories: keys and values.  Keys are column types
that represent the primary organization/grouping of the data, and values are
all of the different calculations that can be made.</p>
<p>The contexts for columns that are available are defined by three values: realm,
centricity, and groupby.  A breakdown of how these three inter-relate is shown
in the following table:</p>
<div class="codehilite"><pre>    <span class="o">|-----------------------------+------------+----------------------|</span>
    <span class="o">|</span> <span class="n">realm</span>                       <span class="o">|</span> <span class="n">centricity</span> <span class="o">|</span> <span class="n">groupby</span>              <span class="o">|</span>
    <span class="o">|-----------------------------+------------+----------------------|</span>
    <span class="o">|</span> <span class="n">traffic_summary</span>             <span class="o">|</span> <span class="n">hos</span><span class="p">,</span><span class="kt">int</span>    <span class="o">|</span> <span class="n">all</span> <span class="p">(</span><span class="n">except</span> <span class="n">thu</span><span class="p">)</span>     <span class="o">|</span>
    <span class="o">|</span> <span class="n">traffic_overall_time_series</span> <span class="o">|</span> <span class="n">hos</span><span class="p">,</span><span class="kt">int</span>    <span class="o">|</span> <span class="n">tim</span>                  <span class="o">|</span>
    <span class="o">|</span> <span class="n">traffic_flow_list</span>           <span class="o">|</span> <span class="n">hos</span>        <span class="o">|</span> <span class="n">hos</span>                  <span class="o">|</span>
    <span class="o">|</span> <span class="n">identity_list</span>               <span class="o">|</span> <span class="n">hos</span>        <span class="o">|</span> <span class="n">thu</span>                  <span class="o">|</span>
    <span class="o">|-----------------------------+------------+----------------------|</span>
</pre></div>


<p>As FlyScript develops further, this table and the available permutations will expand.</p>
<p>Let's take a look at how these work a little more closely.  Startup a new
instance of your Python interpreter, similar to before:</p>
<div class="codehilite"><pre><span class="go">$ python</span>
<span class="go">Python 2.7.3 (default, Apr 19 2012, 00:55:09) </span>
<span class="go">[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">rvbd.profiler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rvbd.common.service</span> <span class="kn">import</span> <span class="n">UserAuth</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">rvbd</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">Profiler</span><span class="p">(</span><span class="s">&#39;$hostname&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">UserAuth</span><span class="p">(</span><span class="s">&#39;$username&#39;</span><span class="p">,</span> <span class="s">&#39;$password&#39;</span><span class="p">))</span>
</pre></div>


<p>Now, lets investigate which columns are available for a specific type of report:</p>
<div class="codehilite"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">realms</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;traffic_summary&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">centricities</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;hos&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groupbys</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;hos&#39;</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">columns</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">search_columns</span><span class="p">(</span><span class="n">realms</span><span class="o">=</span><span class="n">realms</span><span class="p">,</span> <span class="n">centricities</span><span class="o">=</span><span class="n">centricities</span><span class="p">,</span> <span class="n">groupbys</span><span class="o">=</span><span class="n">groupbys</span><span class="p">)</span>
</pre></div>


<p>Here we have setup three local variables, and passed them as arguments to the <code>search_columns</code> 
method on our <code>profiler</code> object.  Note the brackets around each of the definitions we made,
those mean we created a <code>list</code> object for all three variables.  In this case, the list
contains only a single object, the string.</p>
<p>Let's take a look at what that method returned:</p>
<div class="codehilite"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
<span class="go">146</span>
</pre></div>


<p>So, a total of 146 columns can be chosen for a report with those three filters!  Note your 
specific number may vary here, depending on the specific version of Profiler you are running.</p>
<div class="codehilite"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">columns</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
<span class="go">[&lt;rvbd.profiler._types.Column(cid=31, key=total_pkts, iskey=False label=Total Packets)&gt;,</span>
<span class="go"> &lt;rvbd.profiler._types.Column(cid=427, key=in_avg_conns_rsts, iskey=False label=Avg Resets/s (Rx))&gt;]</span>
</pre></div>


<p>This command uses <a href="http://stackoverflow.com/questions/509211/the-python-slice-notation">slicing</a> 
to show only the first two elements of the list.  Notice these are objects themselves,
with quite a bit of information associated with each one.  These objects are used extensively
within <code>profiler</code>, but the main thing to keep in mind is that you can refer to columns
by their text value (the 'key' attribute), by index value (the 'cid' attribute in the example
above), or by the actual object itself.</p>
<p>Another way to access one of the columns, is through the <code>profiler</code> object as an attribute:</p>
<div class="codehilite"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">total_pkts</span>
<span class="go">&lt;rvbd.profiler._types.Column(cid=31, key=total_pkts, iskey=False label=Total Packets)&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">time</span>
<span class="go">&lt;rvbd.profiler._types.Column(cid=98, key=time, iskey=True label=Time)&gt;</span>
</pre></div>


<p>To see the complete list of all column keys you could enter the following:</p>
<div class="codehilite"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">keys</span>
<span class="go">[...long list of objects...]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span>
<span class="go">[...long list of objects...]</span>
</pre></div>


</div>

<div class="footer">
Copyright &copy; 2013 Riverbed Technology
</div></body>
</html>
