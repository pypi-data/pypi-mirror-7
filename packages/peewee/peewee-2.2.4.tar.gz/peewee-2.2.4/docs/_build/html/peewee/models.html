<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Model and Fields &mdash; peewee 2.2.3 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.2.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="peewee 2.2.3 documentation" href="../index.html" />
    <link rel="next" title="Querying" href="querying.html" />
    <link rel="prev" title="Peewee Cookbook" href="cookbook.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="querying.html" title="Querying"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cookbook.html" title="Peewee Cookbook"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">peewee 2.2.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="model-and-fields">
<span id="models"></span><h1>Model and Fields<a class="headerlink" href="#model-and-fields" title="Permalink to this headline">¶</a></h1>
<p>Also of possible interest:</p>
<ul class="simple">
<li><a class="reference internal" href="api.html#model-api"><em>Models API reference</em></a></li>
<li><a class="reference internal" href="api.html#fields-api"><em>Fields API reference</em></a></li>
</ul>
<div class="section" id="id1">
<h2>Models<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Models and their fields map directly to database tables and columns.  Consider
the following:</p>
<div class="highlight-python" id="blog-models"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span>

<span class="c"># create a base model class that our application&#39;s models will extend</span>
<span class="k">class</span> <span class="nc">BaseModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Tweet</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">ForeignKeyField</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">&#39;tweets&#39;</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">()</span>
    <span class="n">created_date</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
    <span class="n">is_published</span> <span class="o">=</span> <span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This is a typical example of how to specify models with peewee.  There are several
things going on:</p>
<ol class="arabic">
<li><p class="first">Create an instance of a <a class="reference internal" href="api.html#Database" title="Database"><tt class="xref py py-class docutils literal"><span class="pre">Database</span></tt></a></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This establishes an object, <tt class="docutils literal"><span class="pre">db</span></tt>, which is used by the models to connect to and
query the database.</p>
</div></blockquote>
</li>
<li><p class="first">Create a base model class which specifies our database</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">BaseModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>
</pre></div>
</div>
<p>Model configuration is kept namespaced in a special class called <tt class="docutils literal"><span class="pre">Meta</span></tt> &#8211; this
convention is borrowed from Django.  <tt class="docutils literal"><span class="pre">Meta</span></tt> configuration
is passed on to subclasses, so our project&#8217;s models will all subclass <tt class="docutils literal"><span class="pre">BaseModel</span></tt>.</p>
</div></blockquote>
</li>
<li><p class="first">Create a model</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
</pre></div>
</div>
<p>Model definition is pretty similar to django or sqlalchemy &#8211; you subclass <a class="reference internal" href="api.html#Model" title="Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>
and add <a class="reference internal" href="api.html#Field" title="Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> instances as class attributes.</p>
<p>Models provide methods for creating/reading/updating/deleting rows in the
database.</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="creating-tables">
<h2>Creating tables<a class="headerlink" href="#creating-tables" title="Permalink to this headline">¶</a></h2>
<p>In order to start using these models, its necessary to open a connection to the
database and create the tables first:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># connect to our database</span>
<span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="c"># create the tables</span>
<span class="n">User</span><span class="o">.</span><span class="n">create_table</span><span class="p">()</span>
<span class="n">Tweet</span><span class="o">.</span><span class="n">create_table</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Strictly speaking, it is not necessary to call <a class="reference internal" href="api.html#Database.connect" title="Database.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a> but
it is good practice to be explicit.  That way if something goes wrong, the error
occurs at the connect step, rather than some arbitrary time later.</p>
</div>
</div>
<div class="section" id="model-instances">
<h2>Model instances<a class="headerlink" href="#model-instances" title="Permalink to this headline">¶</a></h2>
<p>Creating models in the interactive interpreter is a snap.</p>
<p>You can use the <a class="reference internal" href="api.html#Model.create" title="Model.create"><tt class="xref py py-meth docutils literal"><span class="pre">Model.create()</span></tt></a> classmethod:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">&#39;charlie&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tweet</span> <span class="o">=</span> <span class="n">Tweet</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">message</span><span class="o">=</span><span class="s">&#39;http://www.youtube.com/watch?v=xdhLQCYQ-nQ&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tweet</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span>
<span class="go">&#39;charlie&#39;</span>
</pre></div>
</div>
</div></blockquote>
<p>Or you can build up the instance programmatically:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="s">&#39;charlie&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="section" id="traversing-foriegn-keys">
<h3>Traversing foriegn keys<a class="headerlink" href="#traversing-foriegn-keys" title="Permalink to this headline">¶</a></h3>
<p>As you can see from above, the foreign key from <tt class="docutils literal"><span class="pre">Tweet</span></tt> to <tt class="docutils literal"><span class="pre">User</span></tt> can be
traversed automatically:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tweet</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span>
<span class="go">&#39;charlie&#39;</span>
</pre></div>
</div>
<p>The reverse is also true, we can iterate a <tt class="docutils literal"><span class="pre">User</span></tt> objects associated <tt class="docutils literal"><span class="pre">Tweets</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">tweet</span> <span class="ow">in</span> <span class="n">user</span><span class="o">.</span><span class="n">tweets</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">tweet</span><span class="o">.</span><span class="n">message</span>
<span class="gp">...</span>
<span class="go">http://www.youtube.com/watch?v=xdhLQCYQ-nQ</span>
</pre></div>
</div>
<p>Under the hood, the <tt class="docutils literal"><span class="pre">tweets</span></tt> attribute is just a <a class="reference internal" href="api.html#SelectQuery" title="SelectQuery"><tt class="xref py py-class docutils literal"><span class="pre">SelectQuery</span></tt></a> with
the where clause prepopulated to point at the right <tt class="docutils literal"><span class="pre">User</span></tt> instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span><span class="o">.</span><span class="n">tweets</span>
<span class="go">&lt;peewee.SelectQuery object at 0x151f510&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="model-options-and-table-metadata">
<h2>Model options and table metadata<a class="headerlink" href="#model-options-and-table-metadata" title="Permalink to this headline">¶</a></h2>
<p>In order not to pollute the model namespace, model-specific configuration is
placed in a special class called <tt class="docutils literal"><span class="pre">Meta</span></tt>, which is a convention borrowed from
the django framework:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">contacts_db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s">&#39;contacts.db&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">contacts_db</span>
</pre></div>
</div>
<p>This instructs peewee that whenever a query is executed on <tt class="docutils literal"><span class="pre">Person</span></tt> to use
the contacts database.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Take a look at <a class="reference internal" href="#blog-models"><em>the sample models</em></a> - you will notice that
we created a <tt class="docutils literal"><span class="pre">BaseModel</span></tt> that defined the database, and then extended.  This
is the preferred way to define a database and create models.</p>
</div>
<p>There are several options you can specify as <tt class="docutils literal"><span class="pre">Meta</span></tt> attributes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="60%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Meaning</th>
<th class="head">Inheritable?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">database</span></tt></td>
<td>database for model</td>
<td>yes</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">db_table</span></tt></td>
<td>name of the table to store data</td>
<td>no</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">indexes</span></tt></td>
<td>a list of fields to index</td>
<td>yes</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">order_by</span></tt></td>
<td>a list of fields to use for default ordering</td>
<td>yes</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">primary_key</span></tt></td>
<td>a <a class="reference internal" href="api.html#CompositeKey" title="CompositeKey"><tt class="xref py py-class docutils literal"><span class="pre">CompositeKey</span></tt></a> instance</td>
<td>yes</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">table_alias</span></tt></td>
<td>an alias to use for the table in queries</td>
<td>no</td>
</tr>
</tbody>
</table>
<div class="section" id="specifying-indexes-for-a-model">
<span id="model-indexes"></span><h3>Specifying indexes for a model<a class="headerlink" href="#specifying-indexes-for-a-model" title="Permalink to this headline">¶</a></h3>
<p>Indexes are stored in a nested tuple.  Each index is a 2-tuple, the first part
of which is another tuple of the names of the fields, the second part a boolean
indicating whether the index should be unique.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Transaction</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">from_acct</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
    <span class="n">to_acct</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="n">DecimalField</span><span class="p">()</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">(</span>
            <span class="c"># create a unique on from/to/date</span>
            <span class="p">((</span><span class="s">&#39;from_acct&#39;</span><span class="p">,</span> <span class="s">&#39;to_acct&#39;</span><span class="p">,</span> <span class="s">&#39;date&#39;</span><span class="p">),</span> <span class="bp">True</span><span class="p">),</span>

            <span class="c"># create a non-unique on from/to</span>
            <span class="p">((</span><span class="s">&#39;from_acct&#39;</span><span class="p">,</span> <span class="s">&#39;to_acct&#39;</span><span class="p">),</span> <span class="bp">False</span><span class="p">),</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="specifying-a-default-ordering">
<h3>Specifying a default ordering<a class="headerlink" href="#specifying-a-default-ordering" title="Permalink to this headline">¶</a></h3>
<p>You can specify a default ordering for your models.  It is simply a tuple of
field names. If a field should be ordered descending, prefix it with a dash (&#8220;-&#8221;).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Tweet</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">()</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="c"># order by created date descending</span>
        <span class="n">order_by</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;-created&#39;</span><span class="p">,)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This can be overridden at any time by calling <a class="reference internal" href="api.html#SelectQuery.order_by" title="SelectQuery.order_by"><tt class="xref py py-meth docutils literal"><span class="pre">SelectQuery.order_by()</span></tt></a>.</p>
</div>
</div>
<div class="section" id="inheriting-model-metadata">
<h3>Inheriting model metadata<a class="headerlink" href="#inheriting-model-metadata" title="Permalink to this headline">¶</a></h3>
<p>Some options are &#8220;inheritable&#8221; (see table above), which means that you can define a
database on one model, then subclass that model and the child models will use
the same database.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">my_db</span> <span class="o">=</span> <span class="n">PostgresqlDatabase</span><span class="p">(</span><span class="s">&#39;my_db&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">BaseModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">my_db</span>

<span class="k">class</span> <span class="nc">SomeModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">field1</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">order_by</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;field1&#39;</span><span class="p">,)</span>
        <span class="c"># no need to define database again since it will be inherited from</span>
        <span class="c"># the BaseModel</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="fields">
<span id="id2"></span><h2>Fields<a class="headerlink" href="#fields" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="api.html#Field" title="Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> class is used to describe the mapping of <a class="reference internal" href="api.html#Model" title="Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>
attributes to database columns.  Each field type has a corresponding SQL storage
class (i.e. varchar, int), and conversion between python data types and underlying
storage is handled transparently.</p>
<p>When creating a <a class="reference internal" href="api.html#Model" title="Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> class, fields are defined as class-level attributes.
This should look familiar to users of the django framework.  Here&#8217;s an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
    <span class="n">join_date</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">()</span>
    <span class="n">about_me</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">()</span>
</pre></div>
</div>
<p>There is one special type of field, <a class="reference internal" href="api.html#ForeignKeyField" title="ForeignKeyField"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyField</span></tt></a>, which allows you
to expose foreign-key relationships between models in an intuitive way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Message</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">ForeignKeyField</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">&#39;messages&#39;</span><span class="p">)</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">()</span>
    <span class="n">send_date</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">()</span>
</pre></div>
</div>
<p>This allows you to write code like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">some_message</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span>
<span class="go">Some User</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">some_user</span><span class="o">.</span><span class="n">messages</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">message</span><span class="o">.</span><span class="n">body</span>
<span class="go">some message</span>
<span class="go">another message</span>
<span class="go">yet another message</span>
</pre></div>
</div>
<p>For full documentation on fields, see the <a class="reference internal" href="api.html#fields-api"><em>Fields API notes</em></a></p>
</div>
<div class="section" id="field-initialization-arguments">
<h2>Field initialization arguments<a class="headerlink" href="#field-initialization-arguments" title="Permalink to this headline">¶</a></h2>
<p>Parameters accepted by all field types and their default values:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">null</span> <span class="pre">=</span> <span class="pre">False</span></tt> &#8211; boolean indicating whether null values are allowed to be stored</li>
<li><tt class="docutils literal"><span class="pre">index</span> <span class="pre">=</span> <span class="pre">False</span></tt> &#8211; boolean indicating whether to create an index on this column</li>
<li><tt class="docutils literal"><span class="pre">unique</span> <span class="pre">=</span> <span class="pre">False</span></tt> &#8211; boolean indicating whether to create a unique index on this column. See also <a class="reference internal" href="#model-indexes"><em>adding composite indexes</em></a>.</li>
<li><tt class="docutils literal"><span class="pre">verbose_name</span> <span class="pre">=</span> <span class="pre">None</span></tt> &#8211; string representing the &#8220;user-friendly&#8221; name of this field</li>
<li><tt class="docutils literal"><span class="pre">help_text</span> <span class="pre">=</span> <span class="pre">None</span></tt> &#8211; string representing any helpful text for this field</li>
<li><tt class="docutils literal"><span class="pre">db_column</span> <span class="pre">=</span> <span class="pre">None</span></tt> &#8211; string representing the underlying column to use if different, useful for legacy databases</li>
<li><tt class="docutils literal"><span class="pre">default</span> <span class="pre">=</span> <span class="pre">None</span></tt> &#8211; any value to use as a default for uninitialized models</li>
<li><tt class="docutils literal"><span class="pre">choices</span> <span class="pre">=</span> <span class="pre">None</span></tt> &#8211; an optional iterable containing 2-tuples of <tt class="docutils literal"><span class="pre">value</span></tt>, <tt class="docutils literal"><span class="pre">display</span></tt></li>
<li><tt class="docutils literal"><span class="pre">primary_key</span> <span class="pre">=</span> <span class="pre">False</span></tt> &#8211; whether this field is the primary key for the table</li>
<li><tt class="docutils literal"><span class="pre">sequence</span> <span class="pre">=</span> <span class="pre">None</span></tt> &#8211; sequence to populate field (if backend supports it)</li>
<li><tt class="docutils literal"><span class="pre">constraints</span> <span class="pre">=</span> <span class="pre">None</span></tt> - a list of one or more constraints, e.g. <tt class="docutils literal"><span class="pre">[Check('price</span> <span class="pre">&gt;</span> <span class="pre">0')]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">schema</span> <span class="pre">=</span> <span class="pre">None</span></tt> &#8211; optional name of the schema to use, if your db supports this.</li>
</ul>
</div>
<div class="section" id="field-types-table">
<h2>Field types table<a class="headerlink" href="#field-types-table" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="24%" />
<col width="24%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field Type</th>
<th class="head">Sqlite</th>
<th class="head">Postgresql</th>
<th class="head">MySQL</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">CharField</span></tt></td>
<td>varchar</td>
<td>varchar</td>
<td>varchar</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">TextField</span></tt></td>
<td>text</td>
<td>text</td>
<td>longtext</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">DateTimeField</span></tt></td>
<td>datetime</td>
<td>timestamp</td>
<td>datetime</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">IntegerField</span></tt></td>
<td>integer</td>
<td>integer</td>
<td>integer</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">BooleanField</span></tt></td>
<td>smallint</td>
<td>boolean</td>
<td>bool</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">FloatField</span></tt></td>
<td>real</td>
<td>real</td>
<td>real</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">DoubleField</span></tt></td>
<td>real</td>
<td>double precision</td>
<td>double precision</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">BigIntegerField</span></tt></td>
<td>integer</td>
<td>bigint</td>
<td>bigint</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">DecimalField</span></tt></td>
<td>decimal</td>
<td>numeric</td>
<td>numeric</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">PrimaryKeyField</span></tt></td>
<td>integer</td>
<td>serial</td>
<td>integer</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ForeignKeyField</span></tt></td>
<td>integer</td>
<td>integer</td>
<td>integer</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">DateField</span></tt></td>
<td>date</td>
<td>date</td>
<td>date</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">TimeField</span></tt></td>
<td>time</td>
<td>time</td>
<td>time</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">BlobField</span></tt></td>
<td>blob</td>
<td>bytea</td>
<td>blob</td>
</tr>
</tbody>
</table>
<div class="section" id="some-fields-take-special-parameters">
<h3>Some fields take special parameters...<a class="headerlink" href="#some-fields-take-special-parameters" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field type</th>
<th class="head">Special Parameters</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="api.html#CharField" title="CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a></td>
<td><tt class="docutils literal"><span class="pre">max_length</span></tt></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="api.html#DateTimeField" title="DateTimeField"><tt class="xref py py-class docutils literal"><span class="pre">DateTimeField</span></tt></a></td>
<td><tt class="docutils literal"><span class="pre">formats</span></tt></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="api.html#DateField" title="DateField"><tt class="xref py py-class docutils literal"><span class="pre">DateField</span></tt></a></td>
<td><tt class="docutils literal"><span class="pre">formats</span></tt></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="api.html#TimeField" title="TimeField"><tt class="xref py py-class docutils literal"><span class="pre">TimeField</span></tt></a></td>
<td><tt class="docutils literal"><span class="pre">formats</span></tt></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="api.html#DecimalField" title="DecimalField"><tt class="xref py py-class docutils literal"><span class="pre">DecimalField</span></tt></a></td>
<td><tt class="docutils literal"><span class="pre">max_digits</span></tt>, <tt class="docutils literal"><span class="pre">decimal_places</span></tt>,
<tt class="docutils literal"><span class="pre">auto_round</span></tt>, <tt class="docutils literal"><span class="pre">rounding</span></tt></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="api.html#ForeignKeyField" title="ForeignKeyField"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyField</span></tt></a></td>
<td><tt class="docutils literal"><span class="pre">rel_model</span></tt>, <tt class="docutils literal"><span class="pre">related_name</span></tt>, <tt class="docutils literal"><span class="pre">to_field</span></tt>,
<tt class="docutils literal"><span class="pre">on_delete</span></tt>, <tt class="docutils literal"><span class="pre">on_update</span></tt>, <tt class="docutils literal"><span class="pre">extra</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="a-note-on-validation">
<h3>A note on validation<a class="headerlink" href="#a-note-on-validation" title="Permalink to this headline">¶</a></h3>
<p>Both <tt class="docutils literal"><span class="pre">default</span></tt> and <tt class="docutils literal"><span class="pre">choices</span></tt> could be implemented at the database level as
<tt class="docutils literal"><span class="pre">DEFAULT</span></tt> and <tt class="docutils literal"><span class="pre">CHECK</span> <span class="pre">CONSTRAINT</span></tt> respectively, but any application change would
require a schema change.  Because of this, <tt class="docutils literal"><span class="pre">default</span></tt> is implemented purely in
python and <tt class="docutils literal"><span class="pre">choices</span></tt> are not validated but exist for metadata purposes only.</p>
<p>To add database (server-side) constraints, use the <tt class="docutils literal"><span class="pre">constraints</span></tt> parameter.</p>
</div>
</div>
<div class="section" id="self-referential-foreign-keys">
<h2>Self-referential Foreign Keys<a class="headerlink" href="#self-referential-foreign-keys" title="Permalink to this headline">¶</a></h2>
<p>Since the class is not available at the time the field is declared,
when creating a self-referential foreign key pass in &#8216;self&#8217; as the &#8220;to&#8221;
relation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">ForeignKeyField</span><span class="p">(</span><span class="s">&#39;self&#39;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">&#39;children&#39;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="implementing-many-to-many">
<h2>Implementing Many to Many<a class="headerlink" href="#implementing-many-to-many" title="Permalink to this headline">¶</a></h2>
<p>Peewee does not provide a &#8220;field&#8221; for many to many relationships the way that
django does &#8211; this is because the &#8220;field&#8221; really is hiding an intermediary
table.  To implement many-to-many with peewee, you will therefore create the
intermediary table yourself and query through it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Course</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">StudentCourse</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">student</span> <span class="o">=</span> <span class="n">ForeignKeyField</span><span class="p">(</span><span class="n">Student</span><span class="p">)</span>
    <span class="n">course</span> <span class="o">=</span> <span class="n">ForeignKeyField</span><span class="p">(</span><span class="n">Course</span><span class="p">)</span>
</pre></div>
</div>
<p>To query, let&#8217;s say we want to find students who are enrolled in math class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">Student</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">StudentCourse</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">Course</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">Course</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;math&#39;</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">student</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p>To query what classes a given student is enrolled in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">courses</span> <span class="o">=</span> <span class="p">(</span><span class="n">Course</span>
    <span class="o">.</span><span class="n">select</span><span class="p">()</span>
    <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">StudentCourse</span><span class="p">)</span>
    <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">Student</span><span class="p">)</span>
    <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">Student</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;da vinci&#39;</span><span class="p">))</span>

<span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">course</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p>To efficiently iterate over a many-to-many relation, i.e., list all students
and their respective courses, we will query the &#8220;through&#8221; model <tt class="docutils literal"><span class="pre">StudentCourse</span></tt>
and &#8220;precompute&#8221; the Student and Course:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">query</span> <span class="o">=</span> <span class="p">(</span><span class="n">StudentCourse</span>
    <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">StudentCourse</span><span class="p">,</span> <span class="n">Student</span><span class="p">,</span> <span class="n">Course</span><span class="p">)</span>
    <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">Course</span><span class="p">)</span>
    <span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="n">StudentCourse</span><span class="p">)</span>
    <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">Student</span><span class="p">)</span>
    <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">Student</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>To print a list of students and their courses you might do the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">last</span> <span class="o">=</span> <span class="bp">None</span>
<span class="k">for</span> <span class="n">student_course</span> <span class="ow">in</span> <span class="n">query</span><span class="p">:</span>
    <span class="n">student</span> <span class="o">=</span> <span class="n">student_course</span><span class="o">.</span><span class="n">student</span>
    <span class="k">if</span> <span class="n">student</span> <span class="o">!=</span> <span class="n">last</span><span class="p">:</span>
        <span class="n">last</span> <span class="o">=</span> <span class="n">student</span>
        <span class="k">print</span> <span class="s">&#39;Student: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">student</span><span class="o">.</span><span class="n">name</span>
    <span class="k">print</span> <span class="s">&#39;    - </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">student_course</span><span class="o">.</span><span class="n">course</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p>Since we selected all fields from <tt class="docutils literal"><span class="pre">Student</span></tt> and <tt class="docutils literal"><span class="pre">Course</span></tt> in the <tt class="docutils literal"><span class="pre">select</span></tt>
clause of the query, these foreign key traversals are &#8220;free&#8221; and we&#8217;ve done the
whole iteration with just 1 query.</p>
</div>
<div class="section" id="non-integer-primary-keys">
<span id="non-int-pks"></span><h2>Non-integer Primary Keys<a class="headerlink" href="#non-integer-primary-keys" title="Permalink to this headline">¶</a></h2>
<p>First of all, let me say that I do not think using non-integer primary keys is a
good idea.  The cost in storage is higher, the index lookups will be slower, and
foreign key joins will be more expensive.  That being said, here is how you can
use non-integer pks in peewee.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="n">Model</span><span class="p">,</span> <span class="n">PrimaryKeyField</span><span class="p">,</span> <span class="n">VarCharColumn</span>

<span class="k">class</span> <span class="nc">UUIDModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="c"># explicitly declare a primary key field, and specify the class to use</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Auto-increment IDs are, as their name says, automatically generated for you when
you insert a new row into the database.  The way peewee determines whether to
do an <tt class="docutils literal"><span class="pre">INSERT</span></tt> versus an <tt class="docutils literal"><span class="pre">UPDATE</span></tt> comes down to checking whether the primary
key value is <tt class="docutils literal"><span class="pre">None</span></tt>.  If <tt class="docutils literal"><span class="pre">None</span></tt>, it will do an insert, otherwise it does an
update on the existing value.  Since, with our uuid example, the database driver
won&#8217;t generate a new ID, we need to specify it manually.  When we call save()
for the first time, pass in <tt class="docutils literal"><span class="pre">force_insert</span> <span class="pre">=</span> <span class="pre">True</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">inst</span> <span class="o">=</span> <span class="n">UUIDModel</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()))</span>
<span class="n">inst</span><span class="o">.</span><span class="n">save</span><span class="p">()</span> <span class="c"># &lt;-- WRONG!!  this will try to do an update</span>

<span class="n">inst</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">force_insert</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c"># &lt;-- CORRECT</span>

<span class="c"># to update the instance after it has been saved once</span>
<span class="n">inst</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Any foreign keys to a model with a non-integer primary key will have the
<tt class="docutils literal"><span class="pre">ForeignKeyField</span></tt> use the same underlying storage type as the primary key
they are related to.</p>
</div>
</div>
<div class="section" id="datetimefield-datefield-and-timefield">
<h2>DateTimeField, DateField and TimeField<a class="headerlink" href="#datetimefield-datefield-and-timefield" title="Permalink to this headline">¶</a></h2>
<p>The three fields devoted to working with dates and times have special properties
which allow access to things like the year, month, hour, etc.</p>
<p><a class="reference internal" href="api.html#DateField" title="DateField"><tt class="xref py py-class docutils literal"><span class="pre">DateField</span></tt></a> has properties for:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">year</span></tt></li>
<li><tt class="docutils literal"><span class="pre">month</span></tt></li>
<li><tt class="docutils literal"><span class="pre">day</span></tt></li>
</ul>
<p><a class="reference internal" href="api.html#TimeField" title="TimeField"><tt class="xref py py-class docutils literal"><span class="pre">TimeField</span></tt></a> has properties for:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">hour</span></tt></li>
<li><tt class="docutils literal"><span class="pre">minute</span></tt></li>
<li><tt class="docutils literal"><span class="pre">second</span></tt></li>
</ul>
<p><a class="reference internal" href="api.html#DateTimeField" title="DateTimeField"><tt class="xref py py-class docutils literal"><span class="pre">DateTimeField</span></tt></a> has all of the above.</p>
<p>These properties can be used just like any other expression.  Let&#8217;s say we have
an events calendar and want to hi-lite all the days in the current month that
have an event attached:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Get the current time.</span>
<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="c"># Get days that have events for the current month.</span>
<span class="n">Event</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">Event</span><span class="o">.</span><span class="n">event_date</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s">&#39;day&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
    <span class="p">(</span><span class="n">Event</span><span class="o">.</span><span class="n">event_date</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="n">now</span><span class="o">.</span><span class="n">year</span><span class="p">)</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">Event</span><span class="o">.</span><span class="n">event_date</span><span class="o">.</span><span class="n">month</span> <span class="o">==</span> <span class="n">now</span><span class="o">.</span><span class="n">month</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-a-custom-field">
<span id="custom-fields"></span><h2>Creating a custom field<a class="headerlink" href="#creating-a-custom-field" title="Permalink to this headline">¶</a></h2>
<p>It isn&#8217;t too difficult to add support for custom field types in peewee. Let&#8217;s add
a UUID field for postgresql (which has a native UUID column type). This code is
contained in the <tt class="docutils literal"><span class="pre">playhouse.postgres_ext</span></tt> module, for reference.</p>
<p>To add a custom field type you need to first identify what type of column the field
data will be stored in.  If you just want to add &#8220;python&#8221; behavior atop, say, a
decimal field (for instance to make a currency field) you would just subclass
<a class="reference internal" href="api.html#DecimalField" title="DecimalField"><tt class="xref py py-class docutils literal"><span class="pre">DecimalField</span></tt></a>.  On the other hand, if the database offers a custom
column type you will need to let peewee know.  This is controlled by the <tt class="xref py py-attr docutils literal"><span class="pre">Field.db_field</span></tt>
attribute.</p>
<p>Let&#8217;s start by defining our UUID field:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UUIDField</span><span class="p">(</span><span class="n">Field</span><span class="p">):</span>
    <span class="n">db_field</span> <span class="o">=</span> <span class="s">&#39;uuid&#39;</span>
</pre></div>
</div>
<p>We will store the UUIDs in a native UUID column.  Since psycopg2 treats the data as
a string by default, we will add two methods to the field to handle:</p>
<ul class="simple">
<li>the data coming out of the database to be used in our application</li>
<li>the data from our python app going into the database</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">uuid</span>

<span class="k">class</span> <span class="nc">UUIDField</span><span class="p">(</span><span class="n">Field</span><span class="p">):</span>
    <span class="n">db_field</span> <span class="o">=</span> <span class="s">&#39;uuid&#39;</span>

    <span class="k">def</span> <span class="nf">db_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="c"># convert UUID to str</span>

    <span class="k">def</span> <span class="nf">python_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="c"># convert str to UUID</span>
</pre></div>
</div>
<p>Now, we need to let the database know how to map this &#8220;uuid&#8221; label to an actual &#8220;uuid&#8221;
column type in the database.  There are 2 ways of doing this:</p>
<ol class="arabic simple">
<li>Specify the overrides in the <a class="reference internal" href="api.html#Database" title="Database"><tt class="xref py py-class docutils literal"><span class="pre">Database</span></tt></a> constructor:</li>
</ol>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="n">db</span> <span class="o">=</span> <span class="n">PostgresqlDatabase</span><span class="p">(</span><span class="s">&#39;my_db&#39;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;uuid&#39;</span><span class="p">:</span> <span class="s">&#39;uuid&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Register them class-wide using <a class="reference internal" href="api.html#Database.register_fields" title="Database.register_fields"><tt class="xref py py-meth docutils literal"><span class="pre">Database.register_fields()</span></tt></a>:</li>
</ol>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="c"># will affect all instances of PostgresqlDatabase</span>
<span class="n">PostgresqlDatabase</span><span class="o">.</span><span class="n">register_fields</span><span class="p">({</span><span class="s">&#39;uuid&#39;</span><span class="p">:</span> <span class="s">&#39;uuid&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div></blockquote>
<p>That is it!  Some fields may support exotic operations, like the postgresql HStore field
acts like a key/value store and has custom operators for things like &#8220;contains&#8221; and
&#8220;update&#8221;.  You can specify &#8220;op overrides&#8221; as well.  For more information, check out
the source code for the <a class="reference internal" href="playhouse.html#HStoreField" title="HStoreField"><tt class="xref py py-class docutils literal"><span class="pre">HStoreField</span></tt></a>, in <tt class="docutils literal"><span class="pre">playhouse.postgres_ext</span></tt>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Model and Fields</a><ul>
<li><a class="reference internal" href="#id1">Models</a></li>
<li><a class="reference internal" href="#creating-tables">Creating tables</a></li>
<li><a class="reference internal" href="#model-instances">Model instances</a><ul>
<li><a class="reference internal" href="#traversing-foriegn-keys">Traversing foriegn keys</a></li>
</ul>
</li>
<li><a class="reference internal" href="#model-options-and-table-metadata">Model options and table metadata</a><ul>
<li><a class="reference internal" href="#specifying-indexes-for-a-model">Specifying indexes for a model</a></li>
<li><a class="reference internal" href="#specifying-a-default-ordering">Specifying a default ordering</a></li>
<li><a class="reference internal" href="#inheriting-model-metadata">Inheriting model metadata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fields">Fields</a></li>
<li><a class="reference internal" href="#field-initialization-arguments">Field initialization arguments</a></li>
<li><a class="reference internal" href="#field-types-table">Field types table</a><ul>
<li><a class="reference internal" href="#some-fields-take-special-parameters">Some fields take special parameters...</a></li>
<li><a class="reference internal" href="#a-note-on-validation">A note on validation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#self-referential-foreign-keys">Self-referential Foreign Keys</a></li>
<li><a class="reference internal" href="#implementing-many-to-many">Implementing Many to Many</a></li>
<li><a class="reference internal" href="#non-integer-primary-keys">Non-integer Primary Keys</a></li>
<li><a class="reference internal" href="#datetimefield-datefield-and-timefield">DateTimeField, DateField and TimeField</a></li>
<li><a class="reference internal" href="#creating-a-custom-field">Creating a custom field</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="cookbook.html"
                        title="previous chapter">Peewee Cookbook</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="querying.html"
                        title="next chapter">Querying</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/peewee/models.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="querying.html" title="Querying"
             >next</a> |</li>
        <li class="right" >
          <a href="cookbook.html" title="Peewee Cookbook"
             >previous</a> |</li>
        <li><a href="../index.html">peewee 2.2.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright charles leifer.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>