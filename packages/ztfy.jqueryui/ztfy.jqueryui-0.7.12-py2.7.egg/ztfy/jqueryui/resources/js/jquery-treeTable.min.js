(function(e){var d;e.fn.treeTable=function(i){d=e.extend({},e.fn.treeTable.defaults,i);return this.each(function(){e(this).addClass("treeTable").find("tbody tr").each(function(){if(!d.expandable||e(this)[0].className.search("child-of-")==-1){a(e(this))}else{if(d.initialState=="collapsed"){this.style.display="none"}}})})};e.fn.treeTable.defaults={childPrefix:"child-of-",clickableNodeNames:false,expandable:true,indent:19,initialState:"collapsed",treeColumn:0};e.fn.collapse=function(){e(this).addClass("collapsed");f(e(this)).each(function(){if(!e(this).hasClass("collapsed")){e(this).collapse()}e(this).hide()});return this};e.fn.expand=function(){e(this).removeClass("collapsed").addClass("expanded");f(e(this)).each(function(){a(e(this));if(e(this).is(".expanded.parent")){e(this).expand()}e(this).show()});return this};e.fn.appendBranchTo=function(i){var l=e(this);var j=h(l);var k=e.map(g(e(i)),function(m){return m.id});if(e.inArray(l[0].id,k)==-1&&(!j||(i.id!=j[0].id))&&i.id!=l[0].id){b(l,g(l).length*d.indent*-1);if(j){l.removeClass(d.childPrefix+j[0].id)}l.addClass(d.childPrefix+i.id);c(l,i);b(l,g(l).length*d.indent);return this}return false};e.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)};e.fn.toggleBranch=function(){if(e(this).hasClass("collapsed")){e(this).expand()}else{e(this).removeClass("expanded").collapse()}return this};function g(j){var i=[];while(j=h(j)){i[i.length]=j[0]}return i}function f(i){return e("table.treeTable tbody tr."+d.childPrefix+i[0].id)}function b(j,k){var i=e(j.children("td")[d.treeColumn]);var l=parseInt(i.css("padding-left"),10)+k;i.css("padding-left",+l+"px");f(j).each(function(){b(e(this),k)})}function a(j){if(!j.hasClass("initialized")){j.addClass("initialized");var l=f(j);if(!j.hasClass("parent")&&l.length>0){j.addClass("parent")}if(j.hasClass("parent")){var i=e(j.children("td")[d.treeColumn]);var k=parseInt(i.css("padding-left"),10)+d.indent;l.each(function(){e(e(this).children("td")[d.treeColumn]).css("padding-left",k+"px")});if(d.expandable){i.prepend('<span style="margin-left: -'+d.indent+"px; padding-left: "+d.indent+'px" class="expander"></span>');e(i[0].firstChild).click(function(){j.toggleBranch()});if(d.clickableNodeNames){e(i).css("cursor","pointer");e(i).click(function(m){if(m.target.className!="expander"){j.toggleBranch()}})}if(!(j.hasClass("expanded")||j.hasClass("collapsed"))){j.addClass(d.initialState)}if(j.hasClass("expanded")){j.expand()}}}}}function c(j,i){j.insertAfter(i);f(j).reverse().each(function(){c(e(this),j[0])})}function h(i){var j=i[0].className.split(" ");for(key in j){if(j[key].match("child-of-")){return e("#"+j[key].substring(9))}}}})(jQuery);