<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Grid Class &mdash; djqgrid 0.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="djqgrid 0.2 documentation" href="../index.html" />
    <link rel="up" title="Reference" href="index.html" />
    <link rel="next" title="Columns" href="columns.html" />
    <link rel="prev" title="Reference" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="columns.html" title="Columns"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Reference"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">djqgrid 0.2 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-grid-class">
<h1>The Grid Class<a class="headerlink" href="#the-grid-class" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="djqgrid.grid.Grid">
<em class="property">class </em><tt class="descclassname">djqgrid.grid.</tt><tt class="descname">Grid</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#djqgrid.grid.Grid" title="Permalink to this definition">¶</a></dt>
<dd><p>The Grid class everybody will use.</p>
<p>We use BaseGrid, and add the fields metaclass magic, as is done in the Django forms</p>
<p>Creates a Grid</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><a href="#id1"><span class="problematic" id="id2">**</span></a>kwargs: All the arguments will go to the grid&#8217;s <tt class="docutils literal"><span class="pre">option</span></tt> array.</dd>
</dl>
<p>The grid&#8217;s <tt class="docutils literal"><span class="pre">option</span></tt> array will be used to instantiate the jqGrid on the browser side:
<tt class="docutils literal"><span class="pre">$(&quot;#grid&quot;).jqGrid(options)</span></tt></p>
<p>If you want to pass handlers for events, such as <tt class="docutils literal"><span class="pre">loadComplete</span></tt>, wrap then with <tt class="docutils literal"><span class="pre">function</span></tt> so that
the options are rendered correctly in JavaScript. For example:</p>
<p><tt class="docutils literal"><span class="pre">grid</span> <span class="pre">=</span> <span class="pre">MyGrid(loadComplete=function('loadCompleteHandler'))</span></tt></p>
<p>For more information, see the <tt class="docutils literal"><span class="pre">json_helpers</span></tt> module.</p>
<dl class="method">
<dt id="djqgrid.grid.Grid._apply_query">
<tt class="descname">_apply_query</tt><big>(</big><em>queryset</em>, <em>querydict</em><big>)</big><a class="headerlink" href="#djqgrid.grid.Grid._apply_query" title="Permalink to this definition">¶</a></dt>
<dd><p>This function lets a Grid instance change the default query, if it&#8217;s ever necessary</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>queryset: The default query (<tt class="docutils literal"><span class="pre">self.model.objects</span></tt>)
querydict: The request&#8217;s query string</dd>
<dt>Returns:</dt>
<dd>The actual queryset to use</dd>
</dl>
<p>Override this function if the default query is not enough</p>
</dd></dl>

<dl class="method">
<dt id="djqgrid.grid.Grid._apply_sort">
<tt class="descname">_apply_sort</tt><big>(</big><em>queryset</em>, <em>querydict</em><big>)</big><a class="headerlink" href="#djqgrid.grid.Grid._apply_sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Applys sorting on the queryset.</p>
<p>jqGrid supports sorting, by passing <tt class="docutils literal"><span class="pre">sidx</span></tt> and <tt class="docutils literal"><span class="pre">sord</span></tt> in the request&#8217;s query string. <tt class="docutils literal"><span class="pre">_apply_sort</span></tt>
applies this sorting on a queryset.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>queryset: A queryset for the objects of tje grid
querydict: The request&#8217;s querydict with sidx and sord</dd>
<dt>Returns:</dt>
<dd>An ordered queryset.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="djqgrid.grid.Grid._get_additional_data">
<tt class="descname">_get_additional_data</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#djqgrid.grid.Grid._get_additional_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves additional data to be sent back to the client.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>model: The model of the currently rendered row</dd>
<dt>Returns:</dt>
<dd>A dictionary with more data that will be sent to the client, or <tt class="docutils literal"><span class="pre">None</span></tt> if there&#8217;s no such data</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="djqgrid.grid.Grid._get_query_results">
<tt class="descname">_get_query_results</tt><big>(</big><em>querydict</em><big>)</big><a class="headerlink" href="#djqgrid.grid.Grid._get_query_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a queryset to populate the grid</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>querydict: The request&#8217;s query dictionary</dd>
<dt>Returns:</dt>
<dd>The queryset that will be used to populate the grid. Paging will be applied by the caller.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="djqgrid.grid.Grid._model_to_dict">
<tt class="descname">_model_to_dict</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#djqgrid.grid.Grid._model_to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a model and converts it to a Python dictionary that will be sent to the jqGrid.</p>
<p>This is done by going over all the columns, and rendering each of them to both text and HTML. The text
is put in the result dictionary. The result dictionary also has an <tt class="docutils literal"><span class="pre">html</span></tt> dictionary, which contains the
HTML rendering of each column.</p>
<p>This is done to solve a bug with jqGrid&#8217;s inline editing, that couldn&#8217;t handle HTML values of cells properly.
So instead we use a formatter, called <tt class="docutils literal"><span class="pre">customHtmlFormatter</span></tt> (in <tt class="docutils literal"><span class="pre">djqgrid_utils.js</span></tt>) that can take the value
from the html dictionary.</p>
<p>Sometimes more information is required by the JavaScript code (for example, to choose row CSS styles). It
is possible to add additional information. The method <tt class="docutils literal"><span class="pre">_get_additional_data</span></tt> returns this additional information,
which is put in result JSON as well.</p>
<blockquote>
<div>So, for example, a Grid with two columns will have a JSON looking likes this:</div></blockquote>
<dl class="docutils">
<dt>{col1: &#8216;col1-text&#8217;,</dt>
<dd><p class="first">col2: &#8216;col2-text&#8217;,
html: {</p>
<blockquote>
<div>&#8216;col1&#8217;: &#8216;col1-html&#8217;,
&#8216;col2&#8217;: &#8216;col2-html&#8217;</div></blockquote>
<p class="last">},
additional: { ... }</p>
</dd>
</dl>
<p>}</p>
</dd></dl>

<dl class="classmethod">
<dt id="djqgrid.grid.Grid.get_grid_id">
<em class="property">classmethod </em><tt class="descname">get_grid_id</tt><big>(</big><big>)</big><a class="headerlink" href="#djqgrid.grid.Grid.get_grid_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the grid&#8217;s class ID.</p>
<p>This is done by computing a CRC32 of the class&#8217;s name. Using CRC32 is not a security risk - IDs are passed
in the HTTP anyway, so they are no secret and being able to generate them is not going to help an attacker.</p>
</dd></dl>

<dl class="method">
<dt id="djqgrid.grid.Grid.get_json_data">
<tt class="descname">get_json_data</tt><big>(</big><em>querydict</em><big>)</big><a class="headerlink" href="#djqgrid.grid.Grid.get_json_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a JSON string with the grid&#8217;s contents</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>querydict: The request&#8217;s query dictionary</dd>
<dt>Returns:</dt>
<dd>JSON string with the grid&#8217;s contents</dd>
</dl>
<p><em>DO NOT</em> override this method unless absolutely necessary. <tt class="docutils literal"><span class="pre">_apply_query</span></tt> and <tt class="docutils literal"><span class="pre">_get_additional_data</span></tt> should
be overridden instead.</p>
</dd></dl>

<dl class="method">
<dt id="djqgrid.grid.Grid.get_options">
<tt class="descname">get_options</tt><big>(</big><em>override=None</em><big>)</big><a class="headerlink" href="#djqgrid.grid.Grid.get_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the grid&#8217;s options - this options will be passed to the JavaScript <tt class="docutils literal"><span class="pre">jqGrid</span></tt> function</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>override: A dictionary that overrides the options provided when the grid was initialized.</dd>
<dt>Returns:</dt>
<dd>A dictionary with the grid&#8217;s options.</dd>
</dl>
<p>Some fields cannot be overridden:
- <tt class="docutils literal"><span class="pre">colNames</span></tt> are created from the grid&#8217;s <tt class="docutils literal"><span class="pre">Column</span></tt> fields
- <tt class="docutils literal"><span class="pre">colModels</span></tt> are also created from the grid&#8217;s <tt class="docutils literal"><span class="pre">Column</span></tt> fields.
- <tt class="docutils literal"><span class="pre">url</span></tt> always points to the <tt class="docutils literal"><span class="pre">djqgrid.views.query</span></tt> view with the grid&#8217;s ID.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Reference</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="columns.html"
                        title="next chapter">Columns</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/reference/grid.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="columns.html" title="Columns"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Reference"
             >previous</a> |</li>
        <li><a href="../index.html">djqgrid 0.2 documentation</a> &raquo;</li>
          <li><a href="index.html" >Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Itay Zandbank.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>