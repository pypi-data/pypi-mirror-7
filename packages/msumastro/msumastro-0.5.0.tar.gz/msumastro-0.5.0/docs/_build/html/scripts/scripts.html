

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Command-line scripts &mdash; MSUMastro toolbox 0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'0.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="MSUMastro toolbox 0.1 documentation" href="../index.html"/>
        <link rel="up" title="Automated header processing" href="automated_scripts.html"/>
        <link rel="next" title="Manual header processing" href="manual_processing.html"/>
        <link rel="prev" title="Automated header processing" href="automated_scripts.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> MSUMastro toolbox</a>
        <form class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#automated-header-processing">Automated header processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#manual-header-or-image-manipulation">Manual header or image manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#building-your-own-tools">Building your own tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#this-software">This software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="automated_scripts.html">Automated header processing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="automated_scripts.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="automated_scripts.html#intended-workflow">Intended workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="automated_scripts.html#the-intended-workflow-will-not-work-when">The intended workflow will not work when...</a></li>
<li class="toctree-l2"><a class="reference internal" href="automated_scripts.html#fixes-for-cases-that-require-intervention">Fixes for cases that require intervention</a></li>
<li class="toctree-l2"><a class="reference internal" href="automated_scripts.html#detailed-list-of-keywords-changed">Detailed list of keywords changed</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="automated_scripts.html#reference-api">Reference/API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="manual_processing.html">Manual header processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="manual_processing.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual_processing.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../image_management.html">Image Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../image_management.html#working-with-a-directory-of-images">Working with a directory of images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../image_management.html#module-msumastro.table_tree">Turning an image collection into a tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../image_management.html#module-msumastro.image">Image class that includes WCS information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../header_processing/index.html">Header processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../header_processing/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../header_processing/index.html#reference-api">Reference/API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reduction/index.html">Image Reduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xref.html">Index</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">MSUMastro toolbox</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../index.html">Docs</a> &raquo;</li>
  <li><a href="">Command-line scripts</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="command-line-scripts">
<span id="script-documentation"></span><h1>Command-line scripts<a class="headerlink" href="#command-line-scripts" title="Permalink to this headline">¶</a></h1>
<p>Each of the command-line scripts described below is also callable from python. The details of how you call it from python are described below.</p>
<p>Both these ways of invoking the script (from the command line or from python) is are wrappers around the python functions that do the real work. References to those functions, which tend to provide more control over what you can do at the expense of taking more effort to understand, are provided below where appropriate.</p>
<hr class="docutils" />
<div class="section" id="running-the-complete-standard-workflow-run-standard-header-process-py">
<span id="script-wrapper"></span><h2>Running the complete standard workflow: <tt class="docutils literal"><span class="pre">run_standard_header_process.py</span></tt><a class="headerlink" href="#running-the-complete-standard-workflow-run-standard-header-process-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="usage-summary">
<h3>Usage summary<a class="headerlink" href="#usage-summary" title="Permalink to this headline">¶</a></h3>
<pre class="literal-block">
usage: run_standard_header_process.py [-h]
                                      (--dest-root DEST_ROOT | --overwrite-source)
                                      [--scripts-only] [-r {a,t,p}]
                                      [-o OBJECT_LIST] [--quiet-console]
                                      [--silent-console] [--debug]
                                      [--quiet-log]
                                      source_root

</pre>
<dl class="docutils">
<dt>Positional arguments:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>source_root</kbd></td>
<td>All directories below this one that contain images will be processed</td></tr>
</tbody>
</table>
</dd>
<dt>Options:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--dest-root</span></kbd></td>
<td>If set, image directories below ``source-root`` will be copied into this directory tree. Only directories that contain image files will be copied; any intermediary directories required to contain directories that contain images will also be created.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--overwrite-source=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>This flag must be used to overwrite images in the course directory.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--scripts-only=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>This script will write a single shell script with the name provided in this option. No images will be modified or directories created, but the script can be run to do those things.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-r</span>, <span class="option">--run-only</span></kbd></td>
<td>Select which scripts you want to run. This can be any combination of [p]atch, [a]strometry and [t]riage.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-o</span>, <span class="option">--object-list</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Path to file containing list (and optionally coordinates of) objects that might be in these files. If not provided it defaults to looking for a file called obsinfo.txt in the directory being processed</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--quiet-console=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Log only errors (or worse) to console while running scripts</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--silent-console=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Turn off all logging output to console</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--debug=False</span></kbd></td>
<td>Turn on very detailed logging output</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--quiet-log=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Log only warnings (or worse) to FILES AND CONSOLE while running scripts</td></tr>
</tbody>
</table>
</dd>
</dl>
<span class="target" id="module-msumastro.scripts.run_standard_header_process"></span><hr class="docutils" />
</div>
</div>
<div class="section" id="header-patching-run-patch-py">
<span id="header-patching"></span><h2>Header patching: <tt class="docutils literal"><span class="pre">run_patch.py</span></tt><a class="headerlink" href="#header-patching-run-patch-py" title="Permalink to this headline">¶</a></h2>
<p>For a detailed description of which header keywords are modified see <a class="reference internal" href="automated_scripts.html#header-patch-detail"><em>Keywords purged before further processing</em></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This script OVERWRITES the image files in the directories
specified on the command line unless you use the &#8211;destination-dir
option.</p>
</div>
<div class="section" id="id1">
<h3>Usage summary<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<pre class="literal-block">
usage: run_patch.py [-h] [-v] [-d DESTINATION_DIR] [--debug] [-n]
                    [--quiet-console] [--silent-console] [-o OBJECT_LIST]
                    dir [dir ...]

</pre>
<dl class="docutils">
<dt>Positional arguments:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>dir</kbd></td>
<td>Directory to process</td></tr>
</tbody>
</table>
</dd>
<dt>Options:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-v=False</span>, <span class="option">--verbose=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>provide more information during processing</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-d</span>, <span class="option">--destination-dir</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Directory in which output from this script will be stored</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--debug=False</span></kbd></td>
<td>Turn on very detailed logging output</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-n=False</span>, <span class="option">--no-log-destination=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Do not write log files to destination directory</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--quiet-console=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Log only errors (or worse) to console while running scripts</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--silent-console=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Turn off all logging output to console</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-o</span>, <span class="option">--object-list</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Path to file containing list (and optionally coordinates of) objects that might be in these files. If not provided it defaults to looking for a file called obsinfo.txt in the directory being processed</td></tr>
</tbody>
</table>
</dd>
</dl>
<span class="target" id="module-msumastro.scripts.run_patch"></span><div class="section" id="description">
<h4>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h4>
<p>For each directory provided on the command line the
headers all of the FITS files in that directory are modified
to add information like LST, apparent object position, and more.
See the full documentation for a list of the specific keywords
that are modified.</p>
<div class="section" id="id2">
<h5>Header patching<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<p>This is basically a wrapper around the function
<tt class="xref py py-func docutils literal"><span class="pre">patch_headers.patch_headers()</span></tt> with the options set so that:</p>
<blockquote>
<div><ul class="simple">
<li>&#8220;Bad&#8221; keywords written by MaxImDL 5 are purged.</li>
<li><tt class="docutils literal"><span class="pre">IMAGETYP</span></tt> keyword is changed from default MaxIM DL style
to IRAF style (e.g. &#8220;Bias Frame&#8221; to &#8220;BIAS&#8221;)</li>
<li>Additional useful times like LST, JD are added to the header.</li>
<li>Apparent position (Alt/Az, hour angle) are added to the header.</li>
<li>Information about overscan is added to the header.</li>
<li>Files are overwritten.</li>
</ul>
</div></blockquote>
<p>For more control over what is patched and where the patched files are saved
see the documentation for <tt class="docutils literal"><span class="pre">patch_headers</span></tt> at
<tt class="xref py py-func docutils literal"><span class="pre">patch_headers.patch_headers()</span></tt>.</p>
</div>
<div class="section" id="adding-object-keyword">
<h5>Adding OBJECT keyword<a class="headerlink" href="#adding-object-keyword" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">run_patch</span></tt> also adds the name of the object being observed when
appropriate (i.e. only for light files) and possible. It needs to be
given a list of objects; looking up the coordinates for those objects
requires an Internet connection. See</p>
<p>For a detailed description of the object list file see
<tt class="xref py py-func docutils literal"><span class="pre">Object</span> <span class="pre">file</span> <span class="pre">format</span></tt>.</p>
<p>for a detailed description of the function that actually adds the object name
see <tt class="xref py py-func docutils literal"><span class="pre">patch_headers.add_object_info()</span></tt>.</p>
<p>If no object list is specified or present in the directory being processed
the <cite>OBJECT</cite> keyword is simply not added to the FITS header.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This script is <strong>NOT RECURSIVE</strong>; it will not process files in
subdirectories of the the directories supplied on the command line.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This script OVERWRITES the image files in the directories
specified on the command line unless you use the &#8211;destination-dir
option.</p>
</div>
</div>
</div>
<div class="section" id="examples">
<h4>EXAMPLES<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<p>Invoking this script from the command line:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run_patch</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">folder</span><span class="o">/</span><span class="n">of</span><span class="o">/</span><span class="n">images</span>
</pre></div>
</div>
<p>To work on the same folder from within python, do this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">msumastro.scripts</span> <span class="kn">import</span> <span class="n">run_patch</span>
<span class="n">run_patch</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s">&#39;/my/folder/of/images&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>To use the same object list for several different directories do this:</p>
<div class="highlight-python"><div class="highlight"><pre>run_patch.py --object-list path/to/list.txt dir1 dir2 dir3
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">path/to/list.txt</span></tt> is the path to your object list and <tt class="docutils literal"><span class="pre">dir1</span></tt>,
<tt class="docutils literal"><span class="pre">dir2</span></tt>, etc. are the directories you want to process.</p>
<p>From within python this would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">msumastro.scripts</span> <span class="kn">import</span> <span class="n">run_patch</span>
<span class="n">run_patch</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s">&#39;--object-list&#39;</span><span class="p">,</span> <span class="s">&#39;path/to/list.txt&#39;</span><span class="p">,</span>
               <span class="s">&#39;dir1&#39;</span><span class="p">,</span> <span class="s">&#39;dir2&#39;</span><span class="p">,</span> <span class="s">&#39;dir3&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
</div>
</div>
<div class="section" id="adding-astrometry-run-astromtery-py">
<span id="apply-astrometry"></span><h2>Adding astrometry: <tt class="docutils literal"><span class="pre">run_astromtery.py</span></tt><a class="headerlink" href="#adding-astrometry-run-astromtery-py" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This script OVERWRITES the image files in the directories
specified on the command line unless you use the &#8211;destination-dir
option.</p>
</div>
<div class="section" id="id3">
<h3>Usage summary<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<pre class="literal-block">
usage: run_astrometry.py [-h] [-v] [-d DESTINATION_DIR] [--debug] [-n]
                         [--quiet-console] [--silent-console] [-b]
                         dir [dir ...]

</pre>
<dl class="docutils">
<dt>Positional arguments:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>dir</kbd></td>
<td>Directory to process</td></tr>
</tbody>
</table>
</dd>
<dt>Options:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-v=False</span>, <span class="option">--verbose=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>provide more information during processing</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-d</span>, <span class="option">--destination-dir</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Directory in which output from this script will be stored</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--debug=False</span></kbd></td>
<td>Turn on very detailed logging output</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-n=False</span>, <span class="option">--no-log-destination=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Do not write log files to destination directory</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--quiet-console=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Log only errors (or worse) to console while running scripts</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--silent-console=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Turn off all logging output to console</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-b=False</span>, <span class="option">--blind=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Turn ON blind astrometry; disabled by default because it is so slow.</td></tr>
</tbody>
</table>
</dd>
</dl>
<span class="target" id="module-msumastro.scripts.run_astrometry"></span><div class="section" id="id4">
<h4>DESCRIPTION<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>For each directory provided on the command line add
astrometry to the light files (those with <tt class="docutils literal"><span class="pre">IMAGETYP='LIGHT'</span></tt> in
the FITS header).</p>
<p>By default, astrometry is added only for those files with pointing
information in the header (specifically, RA and Dec) because blind
astrometry is fairly slow. It may be faster to insert RA/Dec into
those files before doing astrometry.</p>
<p>The functions called by this script set the WCS reference pixel
to the center of the image, which turns out to make aligning images
a little easier.</p>
<p>For more control over the parameters see <tt class="xref py py-func docutils literal"><span class="pre">add_astrometry()</span></tt>
and for even more control, <tt class="xref py py-func docutils literal"><span class="pre">call_astrometry()</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This script is <strong>NOT RECURSIVE</strong>; it will not process files in
subdirectories of the the directories supplied on the command line.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This script OVERWRITES the image files in the directories
specified on the command line unless you use the &#8211;destination-dir
option.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="id5">
<h4>EXAMPLES<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Invoking this script from the command line:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run_astrometry</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">folder</span><span class="o">/</span><span class="n">of</span><span class="o">/</span><span class="n">images</span>
</pre></div>
</div>
<p>To work on the same folder from within python, do this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">msumastro.scripts</span> <span class="kn">import</span> <span class="n">run_astrometry</span>
<span class="n">run_astrometry</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s">&#39;/my/folder/of/images&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div></blockquote>
</div>
<hr class="docutils" />
</div>
</div>
<div class="section" id="find-problems-and-create-summary-run-triage-py">
<span id="summary-table"></span><h2>Find problems and create summary: <tt class="docutils literal"><span class="pre">run_triage.py</span></tt><a class="headerlink" href="#find-problems-and-create-summary-run-triage-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id6">
<h3>Usage summary<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<pre class="literal-block">
usage: run_triage.py [-h] [--debug] [-v] [-d DESTINATION_DIR] [-n]
                     [--quiet-console] [--silent-console] [-k KEY] [-l]
                     [-t TABLE_NAME] [-o OBJECT_NEEDED_LIST]
                     [-p POINTING_NEEDED_LIST] [-f FILTER_NEEDED_LIST]
                     [dir [dir ...]]

</pre>
<dl class="docutils">
<dt>Positional arguments:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>dir</kbd></td>
<td>Directory to process</td></tr>
</tbody>
</table>
</dd>
<dt>Options:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--debug=False</span></kbd></td>
<td>Turn on very detailed logging output</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-v=False</span>, <span class="option">--verbose=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>provide more information during processing</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-d</span>, <span class="option">--destination-dir</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Directory in which output from this script will be stored</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-n=False</span>, <span class="option">--no-log-destination=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Do not write log files to destination directory</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--quiet-console=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Log only errors (or worse) to console while running scripts</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--silent-console=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Turn off all logging output to console</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-k=[]</span>, <span class="option">--key=[]</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>FITS keyword to add to table in addition to the defaults; for multiple keywords use this option multiple times.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-l=False</span>, <span class="option">--list-default=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Print default list keywords put into table and exit</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-t=Manifest.txt</span>, <span class="option">--table-name=Manifest.txt</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Name of file in which table is saved; default is Manifest.txt</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-o=NEEDS_OBJECT_NAME.txt</span>, <span class="option">--object-needed-list=NEEDS_OBJECT_NAME.txt</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Name of file to which list of files that need object name is saved; default is NEEDS_OBJECT_NAME.txt</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-p=NEEDS_POINTING_INFO.txt</span>, <span class="option">--pointing-needed-list=NEEDS_POINTING_INFO.txt</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Name of file to which list of files that need pointing name is saved; default is NEEDS_POINTING_INFO.txt</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-f=NEEDS_FILTER.txt</span>, <span class="option">--filter-needed-list=NEEDS_FILTER.txt</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Name of file to which list of files that need filter is saved; default is NEEDS_FILTER.txt</td></tr>
</tbody>
</table>
</dd>
</dl>
<span class="target" id="module-msumastro.scripts.run_triage"></span><div class="section" id="id7">
<h4>DESCRIPTION<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>For each directory provided on the command line create a table
in that directory with one row for each FITS file in the directory.
The columns are FITS keywords extracted from the header of each
file.</p>
<p>The list of default keywords extracted is available through the command
line option <tt class="docutils literal"><span class="pre">--list-default</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature is available only from the command line.</p>
</div>
<p>For more control over the parameters see <tt class="xref py py-func docutils literal"><span class="pre">triage_fits_files()</span></tt></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This script is <strong>NOT RECURSIVE</strong>; it will not process files in
subdirectories of the the directories supplied on the command line.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="id8">
<h4>EXAMPLES<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Invoking this script from the command line:</p>
<div class="highlight-python"><div class="highlight"><pre>python run_triage.py /my/folder/of/images
</pre></div>
</div>
<p>Get list of default keywords included in summary table:</p>
<div class="highlight-python"><div class="highlight"><pre>python run_triage.py --list-default
</pre></div>
</div>
<p>To work on the same folder from within python, do this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">msumastro.scripts</span> <span class="kn">import</span> <span class="n">run_triage</span>
<span class="n">run_triage</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s">&#39;/my/folder/of/images&#39;</span><span class="p">])</span>
<span class="c"># or...</span>
<span class="n">run_triage</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s">&#39;--list-default&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div></blockquote>
</div>
<hr class="docutils" />
</div>
</div>
<div class="section" id="manual-intervention-quick-add-keys-to-file-py">
<span id="header-quick-fix"></span><h2>Manual intervention: <tt class="docutils literal"><span class="pre">quick_add_keys_to_file.py</span></tt><a class="headerlink" href="#manual-intervention-quick-add-keys-to-file-py" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This script OVERWRITES the image files in the directories
specified on the command line. There is NO WAY TO DISABLE
this behavior.</p>
</div>
<div class="section" id="id9">
<h3>Usage summary<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<pre class="literal-block">
usage: quick_add_keys_to_file.py [-h] [--file-list FILE_LIST]
                                 (--key-file KEY_FILE | --key-value KEY_VALUE KEY_VALUE)
                                 [files [files ...]]

</pre>
<dl class="docutils">
<dt>Positional arguments:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>files</kbd></td>
<td>Files in which to add/change keywords</td></tr>
</tbody>
</table>
</dd>
<dt>Options:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--file-list</span></kbd></td>
<td>File with list of files in which keywords are to be changed</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--key-file</span></kbd></td>
<td>File with keywords and values to be set</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--key-value</span></kbd></td>
<td>Keyword to add/change</td></tr>
</tbody>
</table>
</dd>
</dl>
<span class="target" id="module-msumastro.scripts.quick_add_keys_to_file"></span><p>Add/modify keywords in FITS files.</p>
<div class="section" id="id10">
<h4>DESCRIPTION<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Add each of the keywords in either the <tt class="docutils literal"><span class="pre">key_file</span></tt> or specified on the
command line to each of the files either listed in the file <tt class="docutils literal"><span class="pre">file_list</span></tt> or
specified on the command line. If the keyword is already present its value
is updated to the value in <tt class="docutils literal"><span class="pre">key_file</span></tt>. A HISTORY comment is added to the
header for each keyword indicating which keyword was modified.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This script OVERWRITES the image files in the list specified on the
command line. There is NO WAY to override this behavior.</p>
</div>
</div></blockquote>
</div>
<hr class="docutils" />
</div>
</div>
<div class="section" id="sorting-files-based-on-image-properties">
<span id="sort-files"></span><h2>Sorting files based on image properties<a class="headerlink" href="#sorting-files-based-on-image-properties" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>By default this script makes a copy of the images being sorted. There is
an option for moving the files instead.</p>
<p class="last">This type of sorting is handy for working with images in GUI software like
AstroImageJ or MaxImDL, but will make it harder to process the data
programmatically in python.</p>
</div>
<div class="section" id="id11">
<h3>Usage summary<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<pre class="literal-block">
usage: sort_files.py [-h] [-v] [-d DESTINATION_DIR] [--debug] [-n]
                     [--quiet-console] [--silent-console] [--move]
                     dir [dir ...]

</pre>
<dl class="docutils">
<dt>Positional arguments:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>dir</kbd></td>
<td>Directory to process</td></tr>
</tbody>
</table>
</dd>
<dt>Options:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-v=False</span>, <span class="option">--verbose=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>provide more information during processing</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-d</span>, <span class="option">--destination-dir</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Directory in which output from this script will be stored</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--debug=False</span></kbd></td>
<td>Turn on very detailed logging output</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-n=False</span>, <span class="option">--no-log-destination=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Do not write log files to destination directory</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--quiet-console=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Log only errors (or worse) to console while running scripts</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--silent-console=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Turn off all logging output to console</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--move=False</span>, <span class="option">-m=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Move files instead of copying them.</td></tr>
</tbody>
</table>
</dd>
</dl>
<span class="target" id="module-msumastro.scripts.sort_files"></span><div class="section" id="id12">
<h4>DESCRIPTION<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>For the directory provided on the command line sort the FITS files in this
way:</p>
<div class="highlight-python"><div class="highlight"><pre>destination
    |
    |
    |
    |---&#39;BIAS&#39;
    |
    |---&#39;DARK&#39;
    |     |---exposure_time_1
    |     |---exposure_time_2, etc.
    |
    |---&#39;FLAT&#39;
    |      |---filter_1
    |      |    |---exposure_time_1
    |      |    |---exposure_time_2, etc.
    |      |
    |      |---filter_2, etc.
    |
    |---&#39;LIGHT&#39;
            |---object_1
            |       |---filter_1
            |       |    |---exposure_time_1
            |       |    |---exposure_time_2, etc.
            |       |
            |       |---filter_2, etc.
            |
            |---object_2
            |       |---filter_1
            |       |---filter_2, etc.
            |
            |---object_3, etc.
            |
            |---&#39;no_object&#39;
                    |---filter_1
                    |---filter_2, etc.
</pre></div>
</div>
<p>The names in single quites, like <cite>&#8216;bias&#8217;</cite>, appear exactly as written in the
directory tree created. Names like <cite>exposure_time_1</cite> are replaced with a
value, for example 30.0 if the first dark exposure time is 30.0 seconds.</p>
<p>The directory <tt class="docutils literal"><span class="pre">destination/calibration/flat/R</span></tt> will contain all of the
FITS files that are R-band flats.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This script is <strong>NOT RECURSIVE</strong>; it will not process files in
subdirectories of the the directories supplied on the command line.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Unless you explicitly supply a destination using the &#8211;destination-dir
option the files will be copied/moved in the directory in which they
currently exist. While this <em>should not</em> lead to information loss,
since files are moved or copied but never deleted, you have been
warned.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="id13">
<h4>EXAMPLES<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
</div>
</div>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="manual_processing.html" class="btn btn-neutral float-right" title="Manual header processing"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="automated_scripts.html" class="btn btn-neutral" title="Automated header processing"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2011-2013, Matt Craig.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>