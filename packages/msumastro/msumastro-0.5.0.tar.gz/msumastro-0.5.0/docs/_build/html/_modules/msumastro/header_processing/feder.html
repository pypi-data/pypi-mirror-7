

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>msumastro.header_processing.feder &mdash; MSUMastro toolbox 0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../../../',
        VERSION:'0.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="MSUMastro toolbox 0.1 documentation" href="../../../index.html"/>
        <link rel="up" title="Module code" href="../../index.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../../index.html" class="icon icon-home"> MSUMastro toolbox</a>
        <form class="wy-form" action="../../../search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../overview.html#automated-header-processing">Automated header processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview.html#manual-header-or-image-manipulation">Manual header or image manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview.html#building-your-own-tools">Building your own tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#this-software">This software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts/automated_scripts.html">Automated header processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../scripts/automated_scripts.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../scripts/automated_scripts.html#intended-workflow">Intended workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../scripts/automated_scripts.html#the-intended-workflow-will-not-work-when">The intended workflow will not work when...</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../scripts/automated_scripts.html#fixes-for-cases-that-require-intervention">Fixes for cases that require intervention</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../scripts/automated_scripts.html#detailed-list-of-keywords-changed">Detailed list of keywords changed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../scripts/automated_scripts.html#reference-api">Reference/API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts/manual_processing.html">Manual header processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../scripts/manual_processing.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../scripts/manual_processing.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../image_management.html">Image Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../image_management.html#working-with-a-directory-of-images">Working with a directory of images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../image_management.html#module-msumastro.table_tree">Turning an image collection into a tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../image_management.html#module-msumastro.image">Image class that includes WCS information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../header_processing/index.html">Header processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../header_processing/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../header_processing/index.html#reference-api">Reference/API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../reduction/index.html">Image Reduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../xref.html">Index</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">MSUMastro toolbox</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../../../index.html">Docs</a> &raquo;</li>
  <li><a href="">msumastro.header_processing.feder</a></li>
  
</ul>
<hr/>

          
  <h1>Source code for msumastro.header_processing.feder</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="kn">from</span> <span class="nn">astropysics</span> <span class="kn">import</span> <span class="n">obstools</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">fitskeyword</span> <span class="kn">import</span> <span class="n">FITSKeyword</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;FederSite&#39;</span><span class="p">,</span> <span class="s">&#39;ImageSoftware&#39;</span><span class="p">,</span> <span class="s">&#39;Instrument&#39;</span><span class="p">,</span> <span class="s">&#39;ApogeeAltaU9&#39;</span><span class="p">,</span>
           <span class="s">&#39;MaximDL4&#39;</span><span class="p">,</span> <span class="s">&#39;MaximDL5&#39;</span><span class="p">]</span>


<div class="viewcode-block" id="FederSite"><a class="viewcode-back" href="../../../api/msumastro.header_processing.feder.FederSite.html#msumastro.header_processing.feder.FederSite">[docs]</a><span class="k">class</span> <span class="nc">FederSite</span><span class="p">(</span><span class="n">obstools</span><span class="o">.</span><span class="n">Site</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Feder Observatory site.</span>

<span class="sd">    An astropysics site with the observatory location and name pre-set to:</span>

<span class="sd">        + `lat` = 46.86678 degrees North</span>
<span class="sd">        + `long` = -96.453278 degrees East</span>
<span class="sd">        + `alt` = 311.8 meters</span>
<span class="sd">        + `name` = Feder Observatory</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">obstools</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                               <span class="n">lat</span><span class="o">=</span><span class="mf">46.86678</span><span class="p">,</span>
                               <span class="nb">long</span><span class="o">=-</span><span class="mf">96.453278</span><span class="p">,</span>
                               <span class="n">alt</span><span class="o">=</span><span class="mf">311.8</span><span class="p">,</span>
                               <span class="n">name</span><span class="o">=</span><span class="s">&#39;Feder Observatory&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="FederSite.localSiderialTime"><a class="viewcode-back" href="../../../api/msumastro.header_processing.feder.FederSite.html#msumastro.header_processing.feder.FederSite.localSiderialTime">[docs]</a>    <span class="k">def</span> <span class="nf">localSiderialTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seconds_decimal</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kwd</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">return_type</span> <span class="o">=</span> <span class="n">kwd</span><span class="p">[</span><span class="s">&#39;returntype&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">return_type</span> <span class="o">=</span> <span class="s">&#39;hours&#39;</span>

        <span class="k">if</span> <span class="n">return_type</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">return_type</span> <span class="o">==</span> <span class="s">&#39;hours&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">FederSite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">localSiderialTime</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">,</span>
                                                            <span class="o">**</span><span class="n">kwd</span><span class="p">)</span>

        <span class="n">return_type</span> <span class="o">=</span> <span class="n">kwd</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&#39;returntype&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">FederSite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">localSiderialTime</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">,</span>
                                                       <span class="n">returntype</span><span class="o">=</span><span class="s">&#39;datetime&#39;</span><span class="p">,</span>
                                                       <span class="o">**</span><span class="n">kwd</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">seconds_decimal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">seconds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">lst</span><span class="o">.</span><span class="n">second</span> <span class="o">+</span> <span class="n">lst</span><span class="o">.</span><span class="n">microsecond</span> <span class="o">/</span> <span class="mf">1e6</span><span class="p">,</span>
                               <span class="n">seconds_decimal</span><span class="p">)</span>
            <span class="n">sec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
            <span class="n">microsec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">((</span><span class="n">seconds</span> <span class="o">-</span> <span class="n">sec</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">))</span>
            <span class="n">lst</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="n">lst</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="n">lst</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="n">sec</span><span class="p">,</span> <span class="n">microsec</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">return_type</span> <span class="o">==</span> <span class="s">&#39;string&#39;</span><span class="p">:</span>
            <span class="n">lst</span> <span class="o">=</span> <span class="n">lst</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">lst</span>

</div></div>
<div class="viewcode-block" id="Instrument"><a class="viewcode-back" href="../../../api/msumastro.header_processing.feder.Instrument.html#msumastro.header_processing.feder.Instrument">[docs]</a><span class="k">class</span> <span class="nc">Instrument</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Telescope instrument with simple properties.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        Name of the instrument.</span>
<span class="sd">    fits_names : list of str</span>
<span class="sd">        List of names by which the instrument is known in FITS headers</span>
<span class="sd">    rows : int</span>
<span class="sd">        Number of rows in an image produced by this instrument, including</span>
<span class="sd">        overscan.</span>
<span class="sd">    columns : int</span>
<span class="sd">        Number of columns in an image produced by this instrument, including</span>
<span class="sd">        overscan.</span>
<span class="sd">    overscan_start : int</span>
<span class="sd">        Position at which the overscan starts. The overscan region is assumed</span>
<span class="sd">        to extend from this starting position to the edge of the image.</span>
<span class="sd">    overscan_axis : one of (1, 2)</span>
<span class="sd">        Axis along which the overscan varies. Numbers correspond to ``NAXIS1``</span>
<span class="sd">        and ``NAXIS2`` in the FITS header.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    Consider an image whose dimensions as given in its FITS header are</span>
<span class="sd">    ``NAXIS1 = 3085`` and ``NAXIS2 = 2048`` with an overscan region that</span>
<span class="sd">    begins at position 3073 along axis 1. The correct overscan settings for</span>
<span class="sd">    this instrument are::</span>

<span class="sd">        overscan_start = 3073</span>
<span class="sd">        overscan_axis = 1</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">fits_names</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">rows</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">overscan_start</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">overscan_axis</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fits_names</span> <span class="o">=</span> <span class="n">fits_names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">=</span> <span class="n">rows</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">columns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overscan_start</span> <span class="o">=</span> <span class="n">overscan_start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overscan_axis</span> <span class="o">=</span> <span class="n">overscan_axis</span>

<div class="viewcode-block" id="Instrument.has_overscan"><a class="viewcode-back" href="../../../api/msumastro.header_processing.feder.Instrument.html#msumastro.header_processing.feder.Instrument.has_overscan">[docs]</a>    <span class="k">def</span> <span class="nf">has_overscan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image_dimensions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determine whether an image taken by this instrument has overscan</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        image_dimensions : list-like with two elements</span>
<span class="sd">            Shape of the image; can be any type as long as it has two elements.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            Indicates whether or not image has overscan present.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">image_dimensions</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">overscan_axis</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">overscan_start</span><span class="p">):</span>

            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

</div></div>
<div class="viewcode-block" id="ApogeeAltaU9"><a class="viewcode-back" href="../../../api/msumastro.header_processing.feder.ApogeeAltaU9.html#msumastro.header_processing.feder.ApogeeAltaU9">[docs]</a><span class="k">class</span> <span class="nc">ApogeeAltaU9</span><span class="p">(</span><span class="n">Instrument</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Apogee Alta U9</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Instrument</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Apogee Alta U9&quot;</span><span class="p">,</span>
                            <span class="n">fits_names</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Apogee Alta&quot;</span><span class="p">,</span> <span class="s">&quot;Apogee USB/Net&quot;</span><span class="p">],</span>
                            <span class="n">rows</span><span class="o">=</span><span class="mi">2048</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="mi">3085</span><span class="p">,</span>
                            <span class="n">overscan_start</span><span class="o">=</span><span class="mi">3073</span><span class="p">,</span>
                            <span class="n">overscan_axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="ImageSoftware"><a class="viewcode-back" href="../../../api/msumastro.header_processing.feder.ImageSoftware.html#msumastro.header_processing.feder.ImageSoftware">[docs]</a><span class="k">class</span> <span class="nc">ImageSoftware</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents software that takes images at telescope.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        Name of the software. Can be the same is the name in the FITS file,</span>
<span class="sd">        or not.</span>
<span class="sd">    fits_keyword : str</span>
<span class="sd">        Name of the FITS keyword that contains the name of the software.</span>
<span class="sd">    fits_name : list of str</span>
<span class="sd">        Name of the software as written in the FITS file</span>
<span class="sd">    major_version : int</span>
<span class="sd">        Major version number of the software.</span>
<span class="sd">    minor_version : int</span>
<span class="sd">        Minor version number of the software.</span>
<span class="sd">    bad_keywords : list of strings</span>
<span class="sd">        Names of any keywords that should be removed from the FITS before</span>
<span class="sd">        further processing.</span>
<span class="sd">    purged_flag_keyword : str, optional</span>
<span class="sd">        Name of the keyword which indicates whether bad keywords have already</span>
<span class="sd">        been purged. Default value is &#39;PURGED&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">fits_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">major_version</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">minor_version</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">bad_keywords</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">fits_keyword</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">purged_flag_keyword</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fits_name</span> <span class="o">=</span> <span class="n">fits_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">major_version</span> <span class="o">=</span> <span class="n">major_version</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minor_version</span> <span class="o">=</span> <span class="n">minor_version</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bad_keywords</span> <span class="o">=</span> <span class="n">bad_keywords</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fits_keyword</span> <span class="o">=</span> <span class="n">fits_keyword</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">purged_flag_keyword</span> <span class="o">=</span> <span class="n">purged_flag_keyword</span> <span class="ow">or</span> <span class="s">&quot;PURGED&quot;</span>

<div class="viewcode-block" id="ImageSoftware.created_this"><a class="viewcode-back" href="../../../api/msumastro.header_processing.feder.ImageSoftware.html#msumastro.header_processing.feder.ImageSoftware.created_this">[docs]</a>    <span class="k">def</span> <span class="nf">created_this</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version_string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indicate whether version string matches this software</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        version_string : str</span>
<span class="sd">            String from FITS header that indicates software version.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            ``True`` if the version string matches the software instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">version_string</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fits_name</span>

</div></div>
<div class="viewcode-block" id="MaximDL4"><a class="viewcode-back" href="../../../api/msumastro.header_processing.feder.MaximDL4.html#msumastro.header_processing.feder.MaximDL4">[docs]</a><span class="k">class</span> <span class="nc">MaximDL4</span><span class="p">(</span><span class="n">ImageSoftware</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents MaximDL version 4, all sub-versions</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fits_name</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;MaxIm DL Version 4.10&#39;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MaximDL4</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="s">&quot;MaxImDL&quot;</span><span class="p">,</span>
                                       <span class="n">fits_name</span><span class="o">=</span><span class="n">fits_name</span><span class="p">,</span>
                                       <span class="n">major_version</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                                       <span class="n">minor_version</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                                       <span class="n">bad_keywords</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;OBSERVER&#39;</span><span class="p">],</span>
                                       <span class="n">fits_keyword</span><span class="o">=</span><span class="s">&#39;SWCREATE&#39;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="MaximDL5"><a class="viewcode-back" href="../../../api/msumastro.header_processing.feder.MaximDL5.html#msumastro.header_processing.feder.MaximDL5">[docs]</a><span class="k">class</span> <span class="nc">MaximDL5</span><span class="p">(</span><span class="n">ImageSoftware</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents MaximDL version 5, all sub-versions.</span>

<span class="sd">    Subversions are included by listing the FITS names of all versions that</span>
<span class="sd">    have been used at Feder Observatory.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">bad_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;OBJECT&#39;</span><span class="p">,</span> <span class="s">&#39;JD&#39;</span><span class="p">,</span> <span class="s">&#39;JD-HELIO&#39;</span><span class="p">,</span> <span class="s">&#39;OBJCTALT&#39;</span><span class="p">,</span> <span class="s">&#39;OBJCTAZ&#39;</span><span class="p">,</span>
                    <span class="s">&#39;OBJCTHA&#39;</span><span class="p">,</span> <span class="s">&#39;AIRMASS&#39;</span><span class="p">,</span> <span class="s">&#39;OBSERVER&#39;</span><span class="p">]</span>
        <span class="n">fits_name</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;MaxIm DL Version 5.21 130912 01A17&#39;</span><span class="p">,</span>
                     <span class="s">&#39;MaxIm DL Version 5.21 120829 2R1M0&#39;</span><span class="p">,</span>
                     <span class="s">&#39;MaxIm DL Version 5.23 130912 01A17&#39;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MaximDL5</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="s">&quot;MaxImDL&quot;</span><span class="p">,</span>
                                       <span class="n">fits_name</span><span class="o">=</span><span class="n">fits_name</span><span class="p">,</span>
                                       <span class="n">major_version</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                                       <span class="n">minor_version</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span>
                                       <span class="n">bad_keywords</span><span class="o">=</span><span class="n">bad_keys</span><span class="p">,</span>
                                       <span class="n">fits_keyword</span><span class="o">=</span><span class="s">&#39;SWCREATE&#39;</span>
                                       <span class="p">)</span>

</div>
<span class="k">class</span> <span class="nc">Feder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class encapsulating site, instrument, and software information for Feder</span>
<span class="sd">    Observatory.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    site : feder.FederSite instance</span>
<span class="sd">    instrument : dict</span>
<span class="sd">        Instruments available; key is name, value is an :py:class:`Instrument`</span>
<span class="sd">    software : dict</span>
<span class="sd">        Software available; key is name, value is an :class:`ImageSoftware`</span>
<span class="sd">    software_FITS_keywords : list of str</span>
<span class="sd">        FITS names of all software available.</span>
<span class="sd">    keywords_for_all_files</span>
<span class="sd">    keywords_for_light_files</span>
<span class="sd">    keywords_for_overscan</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">FederSite</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apogee_alta_u9</span> <span class="o">=</span> <span class="n">ApogeeAltaU9</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_instrument_objects</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_apogee_alta_u9</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instruments</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">instrument</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_instrument_objects</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">instrument</span><span class="o">.</span><span class="n">fits_names</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">instruments</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">instrument</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_maximdl4</span> <span class="o">=</span> <span class="n">MaximDL4</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_maximdl5</span> <span class="o">=</span> <span class="n">MaximDL5</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_software_objects</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_maximdl4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maximdl5</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">software</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">software_FITS_keywords</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">software</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_software_objects</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">software</span><span class="o">.</span><span class="n">fits_name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">software</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">software</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">software_FITS_keywords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">software</span><span class="o">.</span><span class="n">fits_keyword</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">software_FITS_keywords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">software_FITS_keywords</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_all_files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_site_keywords_values</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_time_keywords_to_set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_light_files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_define_keywords_for_light_files</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_overscan_keywords</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_define_overscan_keywords</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keywords_for_all_files</span><span class="p">,</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">keywords_for_light_files</span><span class="p">,</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">keywords_for_overscan</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">name</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">)</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">keywords_for_all_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List of :class:`~msumastro.header_processing.fitskeyword.FITSKeyword` s</span>
<span class="sd">        whose values need to be set for all image types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_all_files</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">keywords_for_light_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List of :class:`~msumastro.header_processing.fitskeyword.FITSKeyword` s</span>
<span class="sd">        whose values need to be set only for light image types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_light_files</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">keywords_for_overscan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List of :class:`~msumastro.header_processing.fitskeyword.FITSKeyword` s</span>
<span class="sd">        related to overscan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overscan_keywords</span>

    <span class="k">def</span> <span class="nf">_define_keywords_for_light_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">RA</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ra&#39;</span><span class="p">,</span>
                         <span class="n">comment</span><span class="o">=</span><span class="s">&#39;Approximate RA at EQUINOX&#39;</span><span class="p">,</span>
                         <span class="n">synonyms</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;objctra&#39;</span><span class="p">])</span>

        <span class="n">Dec</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;DEC&#39;</span><span class="p">,</span>
                          <span class="n">comment</span><span class="o">=</span><span class="s">&#39;Approximate DEC at EQUINOX&#39;</span><span class="p">,</span>
                          <span class="n">synonyms</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;objctdec&#39;</span><span class="p">])</span>

        <span class="n">target_object</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;object&#39;</span><span class="p">,</span>
                                    <span class="n">comment</span><span class="o">=</span><span class="s">&#39;Target of the observations&#39;</span><span class="p">)</span>

        <span class="n">hour_angle</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ha&#39;</span><span class="p">,</span>
                                 <span class="n">comment</span><span class="o">=</span><span class="s">&#39;Hour angle&#39;</span><span class="p">)</span>

        <span class="n">airmass</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;airmass&#39;</span><span class="p">,</span>
                              <span class="n">comment</span><span class="o">=</span><span class="s">&#39;Airmass (Sec(Z)) at start of observation&#39;</span><span class="p">,</span>
                              <span class="n">synonyms</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;secz&#39;</span><span class="p">])</span>

        <span class="n">altitude</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;alt-obj&#39;</span><span class="p">,</span>
                               <span class="n">comment</span><span class="o">=</span><span class="s">&#39;[degrees] Altitude of object, no refraction&#39;</span><span class="p">)</span>

        <span class="n">azimuth</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;az-obj&#39;</span><span class="p">,</span>
                              <span class="n">comment</span><span class="o">=</span><span class="s">&#39;[degrees] Azimuth of object, no refraction&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_light_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">RA</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_light_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Dec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_light_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">target_object</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_light_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hour_angle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_light_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">airmass</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_light_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">altitude</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_light_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">azimuth</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_site_keywords_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">latitude</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;latitude&quot;</span><span class="p">,</span>
                               <span class="n">comment</span><span class="o">=</span><span class="s">&#39;[degrees] Observatory latitude&#39;</span><span class="p">,</span>
                               <span class="n">synonyms</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;sitelat&#39;</span><span class="p">])</span>

        <span class="n">longitude</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;longitud&#39;</span><span class="p">,</span>
                                <span class="n">comment</span><span class="o">=</span><span class="s">&#39;[degrees east] Observatory longitude&#39;</span><span class="p">,</span>
                                <span class="n">synonyms</span><span class="o">=</span><span class="s">&#39;sitelong&#39;</span><span class="p">)</span>
        <span class="n">obs_altitude</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;altitude&#39;</span><span class="p">,</span>
                                   <span class="n">comment</span><span class="o">=</span><span class="s">&#39;[meters] Observatory altitude&#39;</span><span class="p">)</span>
        <span class="n">latitude</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">latitude</span><span class="o">.</span><span class="n">getDmsStr</span><span class="p">(</span><span class="n">canonical</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">longitude</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">longitude</span><span class="o">.</span><span class="n">getDmsStr</span><span class="p">(</span><span class="n">canonical</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">obs_altitude</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">altitude</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_all_files</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span>
                                            <span class="n">obs_altitude</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_time_keywords_to_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">LST</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;LST&#39;</span><span class="p">,</span>
                          <span class="n">comment</span><span class="o">=</span><span class="s">&#39;Local Sidereal Time at start of observation&#39;</span><span class="p">)</span>

        <span class="n">JD</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;jd-obs&#39;</span><span class="p">,</span>
                         <span class="n">comment</span><span class="o">=</span><span class="s">&#39;Julian Date at start of observation&#39;</span><span class="p">)</span>

        <span class="n">MJD</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;mjd-obs&#39;</span><span class="p">,</span>
                          <span class="n">comment</span><span class="o">=</span><span class="s">&#39;Modified Julian date at start of observation&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords_for_all_files</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">LST</span><span class="p">,</span> <span class="n">JD</span><span class="p">,</span> <span class="n">MJD</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_define_overscan_keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">overscan_present</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;oscan&#39;</span><span class="p">,</span>
                                       <span class="n">comment</span><span class="o">=</span><span class="s">&#39;True if image has overscan region&#39;</span><span class="p">)</span>

        <span class="n">overscan_axis</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;oscanax&#39;</span><span class="p">,</span>
                                    <span class="n">comment</span><span class="o">=</span><span class="s">&#39;Overscan axis, 1 is NAXIS1, 2 is NAXIS 2&#39;</span><span class="p">)</span>

        <span class="n">overscan_start</span> <span class="o">=</span> <span class="n">FITSKeyword</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;oscanst&#39;</span><span class="p">,</span>
                                     <span class="n">comment</span><span class="o">=</span><span class="s">&#39;Starting pixel of overscan region&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_overscan_keywords</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">overscan_present</span><span class="p">,</span>
                                       <span class="n">overscan_axis</span><span class="p">,</span>
                                       <span class="n">overscan_start</span><span class="p">])</span>
</pre></div>

          <footer>
  

  <hr/>

  <p>
      &copy; Copyright 2011-2013, Matt Craig.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>