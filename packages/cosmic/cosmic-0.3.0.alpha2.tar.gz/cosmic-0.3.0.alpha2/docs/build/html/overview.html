<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Overview &mdash; Cosmic 0.1.4 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Cosmic 0.1.4 documentation" href="index.html" />
    <link rel="next" title="Guide" href="guide.html" />
    <link rel="prev" title="Cosmic in Python" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="guide.html" title="Guide"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Cosmic in Python"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Cosmic 0.1.4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>Before we dig in, here is a high-level overview of Cosmic.</p>
<div class="section" id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">¶</a></h2>
<p>We believe that using web APIs should be as easy as using native libraries.
Cosmic builds a native communication bridge across all supported languages,
while providing a well-documented, clean HTTP structure as a fallback.</p>
<p>We are tired of discussing HTTP, of arguments around how to structure URLs,
how to serialize query parameters, which headers to include and which codes to
return. We believe that these questions are simply not worth your time. Cosmic
attempts to gather the best conventions of HTTP APIs and abstracts them away.</p>
<p>When you write your API server using Cosmic, developers can use it in their
favorite language as if it was a locally installed library. In addition to
this, we are working on the Cosmic Registry, a centralized hub of richly
integrated Cosmic APIs with beautiful auto-generated documentation.</p>
</div>
<div class="section" id="the-universal-client">
<h2>The Universal Client<a class="headerlink" href="#the-universal-client" title="Permalink to this headline">¶</a></h2>
<p>You cannot escape writing API clients. On the provider side, the API library
or framework serves as glue between business code and HTTP. On the consumer
side, the burden of gluing HTTP to business logic lies on the shoulders of the
developer.</p>
<p>Writing a client for every API/language combination is a tremendous amount of
work (<tt class="docutils literal"><span class="pre">O(n^2)</span></tt>), only the most popular APIs and the most popular languages
have clients written for them. Cosmic brings the amount of work down to
<tt class="docutils literal"><span class="pre">O(n)</span></tt> by specifying a way of building universal clients. Such a client is
built from the description of an API in the form of a JSON spec.</p>
<p>If you port Cosmic to a new language, you do the equivalent of writing a
client for every existing Cosmic API. If you use Cosmic to build an API, you
get a number of clients for free. New client ports should motivate developers
to pick Cosmic as a server-side API framework. New Cosmic APIs should motivate
developers to write new clients.</p>
<p>As for the API spec, our approach differs from something like <a class="reference external" href="https://developers.helloreverb.com/swagger/">Swagger</a> as we are not trying to
describe an API in low-level detail. Instead, the JSON spec of a Cosmic API
tries to be high-level and semantic. For instance, in Swagger, every REST-ful
endpoint of a collection needs to be described separately, including the
method, URL format and response code. In Cosmic, these details are decided by
the framework, so the API spec only describes the data structure of the model.</p>
</div>
<div class="section" id="rest-and-rpc">
<h2>REST and RPC<a class="headerlink" href="#rest-and-rpc" title="Permalink to this headline">¶</a></h2>
<p>The definition of <a class="reference external" href="http://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> is a
controversial subject. For our purposes, these are the key elements:</p>
<ul class="simple">
<li>Objects are assigned unique URLs.</li>
<li>These URLs are used to link objects together.</li>
<li>Objects are manipulated by a set of standard methods (<a class="reference external" href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a>).</li>
</ul>
<p>It is fairly straightforward to create a REST API from a database table, but
other kinds of information can be expressed with REST as well. In general it
is a good idea to try, and fall back on <a class="reference external" href="http://en.wikipedia.org/wiki/Remote_procedure_call">RPC</a> only if REST is clearly
a bad fit.</p>
<p>RPC stands for &#8220;remote procedure call&#8221;. It is a simple interface where a
client sends a request to call a remote function with certain parameters and
gets the return value of the function in the response. You might find many
discussions online that are framed as &#8220;REST vs RPC&#8221;, but in reality they are
tools that complement each other.</p>
</div>
<div class="section" id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h2>
<p>Cosmic is a layer that sits between business code and HTTP. This is true for
both the client and server components. In fact, if you were to draw the client
and the server component, you&#8217;ll see that they are perfectly symmetrical.</p>
<p>Because of the above, and because API clients are to be built from a JSON spec
generated by the server, we decided to implement the API class as a
serializable type. When you serialize a server-side Cosmic API, you get the
JSON spec, when you deserialize it on a different machine, you get an API
client. The serialization is done by <a class="reference external" href="http://www.cosmic-api.com/docs/teleport/python/latest/">Teleport</a>.</p>
<p>Cosmic abstracts HTTP into endpoints. An endpoint is a rule for serving a
function via HTTP. It contains both the server and the client component. For
the server, it defines <tt class="xref py py-meth docutils literal"><span class="pre">parse_request()</span></tt> and <tt class="xref py py-meth docutils literal"><span class="pre">build_response()</span></tt>
methods. For the client, it defined <tt class="xref py py-meth docutils literal"><span class="pre">build_request()</span></tt> and
<tt class="xref py py-meth docutils literal"><span class="pre">parse_response()</span></tt>. The reason the server and the client components are
grouped in one object is that the client&#8217;s <tt class="xref py py-meth docutils literal"><span class="pre">build_request()</span></tt> method is
intimately related to the server&#8217;s <tt class="xref py py-meth docutils literal"><span class="pre">parse_request()</span></tt> method. Similarly,
<tt class="xref py py-meth docutils literal"><span class="pre">build_response()</span></tt> and <tt class="xref py py-meth docutils literal"><span class="pre">parse_response()</span></tt> are perfectly symmetrical.</p>
<p>Cosmic treats HTTP as an elaborate serialization scheme and takes full
responsibility for it, leaving you with natively-behaving functions.</p>
</div>
<div class="section" id="built-on-teleport">
<span id="id1"></span><h2>Built on Teleport<a class="headerlink" href="#built-on-teleport" title="Permalink to this headline">¶</a></h2>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">The <a class="reference external" href="/docs/teleport/python/latest/">Teleport documentation</a> is worth a
look if you are getting started with Cosmic.</p>
</div>
<p>Teleport is our very own library that is used for JSON serialization,
validation, and generating documentation. At first this might seem like an odd
set of features for a library, but they come quite naturally from the fact
that Teleport is essentially a very simple static type system. All information
that gets carried between Cosmic clients and servers is statically typed with
the help of Teleport.</p>
<p>Teleport is implemented as a collection of composable type objects. The
composition of these objects mirrors the data it is meant to serialize and
validate. One important feature of Teleport is that this composition, the
schema, is also serializable. This makes it possible to use Teleport to
serialize model properties and function definition, which are necessary to
serialize the API.</p>
<p>Teleport makes it easy to define custom types, a feature used by Cosmic.</p>
<p>The Teleport docs will teach you to import from the <tt class="xref py py-mod docutils literal"><span class="pre">teleport</span></tt> module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">teleport</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>In Cosmic, you should import from <tt class="xref py py-mod docutils literal"><span class="pre">cosmic.types</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">cosmic.types</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Apart from providing the standard Teleport types, this will give you custom
types defined by the Cosmic library as well as access to Cosmic models by
using the <tt class="docutils literal"><span class="pre">&lt;api&gt;.&lt;model&gt;</span></tt> syntax. For instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cosmic.types</span> <span class="kn">import</span> <span class="n">Schema</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">myapi</span> <span class="kn">import</span> <span class="n">MyModel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Schema</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
<span class="go">{u&#39;type&#39;: u&#39;myapi.MyModel&#39;}</span>
</pre></div>
</div>
</div>
<div class="section" id="built-on-flask">
<h2>Built on Flask<a class="headerlink" href="#built-on-flask" title="Permalink to this headline">¶</a></h2>
<p>For the server component, Cosmic relies on <a class="reference external" href="http://flask.pocoo.org/">Flask</a>,
a great Python web microframework. A Cosmic API server creates a complete
Flask application from scratch. Running this application means running your
API. When working on a Cosmic API, some knowledge of Flask may be necessary.
In particular, Flask provides some objects that could be useful to import:
<a class="reference external" href="http://flask.pocoo.org/docs/api/#flask.request">request</a> and <a class="reference external" href="http://flask.pocoo.org/docs/api/#flask.g">g</a>.</p>
</div>
<div class="section" id="hypermedia-with-json-hal">
<span id="hal"></span><h2>Hypermedia with JSON HAL<a class="headerlink" href="#hypermedia-with-json-hal" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://stateless.co/hal_specification.html">JSON HAL</a> is a compact
specification for linking REST-ful resources as well as returning multiple
embedded resources in one call (this is used by the <a class="reference internal" href="guide.html#get-list"><em>get_list</em></a> endpoint).
Note that HAL recommends <tt class="docutils literal"><span class="pre">application/hal+json</span></tt> for the <em>Content-Type</em>
header, but currently Cosmic responds only to <tt class="docutils literal"><span class="pre">application/json</span></tt>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#the-universal-client">The Universal Client</a></li>
<li><a class="reference internal" href="#rest-and-rpc">REST and RPC</a></li>
<li><a class="reference internal" href="#architecture">Architecture</a></li>
<li><a class="reference internal" href="#built-on-teleport">Built on Teleport</a></li>
<li><a class="reference internal" href="#built-on-flask">Built on Flask</a></li>
<li><a class="reference internal" href="#hypermedia-with-json-hal">Hypermedia with JSON HAL</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Cosmic in Python</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="guide.html"
                        title="next chapter">Guide</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="guide.html" title="Guide"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Cosmic in Python"
             >previous</a> |</li>
        <li><a href="index.html">Cosmic 0.1.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, 8313547 Canada Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>