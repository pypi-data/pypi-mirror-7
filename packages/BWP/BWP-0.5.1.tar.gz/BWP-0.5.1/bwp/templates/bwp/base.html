{% comment %}<!--
###############################################################################
# Copyright 2013 Grigoriy Kramarenko.
###############################################################################
# This file is part of BWP.
#
#    BWP is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, either version 3 of the License, or
#    (at your option) any later version.
#
#    BWP is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with BWP.  If not, see <http://www.gnu.org/licenses/>.
#
# Этот файл — часть BWP.
#
#   BWP - свободная программа: вы можете перераспространять ее и/или
#   изменять ее на условиях Стандартной общественной лицензии GNU в том виде,
#   в каком она была опубликована Фондом свободного программного обеспечения;
#   либо версии 3 лицензии, либо (по вашему выбору) любой более поздней
#   версии.
#
#   BWP распространяется в надежде, что она будет полезной,
#   но БЕЗО ВСЯКИХ ГАРАНТИЙ; даже без неявной гарантии ТОВАРНОГО ВИДА
#   или ПРИГОДНОСТИ ДЛЯ ОПРЕДЕЛЕННЫХ ЦЕЛЕЙ. Подробнее см. в Стандартной
#   общественной лицензии GNU.
#
#   Вы должны были получить копию Стандартной общественной лицензии GNU
#   вместе с этой программой. Если это не так, см.
#   <http://www.gnu.org/licenses/>.
###############################################################################
-->{% endcomment %}
{% load i18n l10n bwp_base bwp_static bwp_locale %}{% load url from future %}<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE|default:"en-us" }}" {% if LANGUAGE_BIDI %}dir="rtl"{% endif %}>
<head>
    <title>{% SETTINGS 'PROJECT_SHORTNAME' %}: {% block title %}{% filter force_escape %}{% SETTINGS 'PROJECT_DESCRIPTION' %}{% endfilter %}{% endblock %}</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
{% block shortcut_icons %}
    <link rel="icon" href="{{ STATIC_URL }}img/bwp/minilogo.svg" type="image/svg">
    <link rel="icon" href="{{ STATIC_URL }}img/bwp/favicon.png" type="image/png">
{% endblock %}
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% filter force_escape %}{% SETTINGS 'PROJECT_DESCRIPTION' %}{% endfilter %}">
    <meta name="author" content="{% filter force_escape %}{% AUTHORS %}{% endfilter %}">
    <meta name="version" content="{% SETTINGS 'BWP_VERSION' %}">

<!-- START: styles -->
    <link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap/{% SETTINGS 'BOOTSTRAP_VERSION' %}/bootstrap{% mini_library %}.css">
    {% block responsive_style %}<link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap/{% SETTINGS 'BOOTSTRAP_VERSION' %}/bootstrap-responsive{% mini_library %}.css">{% endblock %}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/bwp/{% SETTINGS 'BWP_VERSION' %}/bwp{% mini_library %}.css">
    
    <!-- for IE6-8 support of HTML5 elements -->
    <!--[if lte IE 9]>
      <script src="{{ STATIC_URL }}js/html5/3.6/html5.js"></script>
    <![endif]-->

<!-- START: block extrastyle -->
    {% block extrastyle %}{% endblock %}
<!-- END: block extrastyle -->

<!-- END: styles -->
</head>

<body class="{% block bodyclass %}home{% endblock %}">
<!-- START: block body -->
{% block body %}
<div id="wrap">
    {% include "bwp/for_IE.html" %}
    <!-- START: block modal -->
    {% block modal %}<div id="modal" class="modal hide fade"></div>{% endblock %}
    <!-- END: block modal -->

    <div class="container-fluid">
        <div class="row-fluid">
    <!-- START: block header -->
        {% block header %}{% endblock %}
    <!-- END: block header -->
        </div>
    </div>

    <div class="container-fluid">
        <div class="row-fluid">
    <!-- START: block content -->
            {% block content %}{% endblock %}
    <!-- END: block content -->
        </div>
    </div>
</div>
<div id="footer">
    <div class="container-fluid">
        <div class="row-fluid">
    <!-- START: block footer -->
            {% block footer %}
            <footer>
                <div class="mono align-center" >
                {% filter force_escape %}
                    {% SETTINGS 'COPYRIGHT' %}
                {% endfilter %} © {% COPYRIGHT_YEARS %}
                </div>
                <div class="mono align-center" >
                {% block footer_links %}
                    <a href="/">{% SETTINGS 'PROJECT_SHORTNAME' %}:<span title="{% SETTINGS 'VERSION_DATE' %}">{% SETTINGS 'VERSION' %}</span></a>
                    <a href="http://rosix.ru/project/9/">BWP:<span title="{% SETTINGS 'BWP_VERSION_DATE' %}">{% SETTINGS 'BWP_VERSION' %}</span></a>
                    <a href="{% url "bwp_api" %}">API:{% SETTINGS 'QUICKAPI_VERSION' %}</a>
                {% endblock %}
                </div>
            </footer>
            {% endblock %}
    <!-- END: block footer -->
        </div>
    </div>
</div>
{% endblock %}
<!-- END: block body -->

<!-- START: block jstemplates -->
    {% block jstemplates %}
    <!-- underscore -->
    <script type="text/x-underscore" id="underscore-alert">
        {% include "bwp/underscore/alert.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-menu-app">
        {% include "bwp/underscore/menu_app.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-collection">
        {% include "bwp/underscore/collection.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-layout-model">
        {% include "bwp/underscore/layout_model.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-layout-selector">
        {% include "bwp/underscore/layout_selector.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-layout-compose">
        {% include "bwp/underscore/layout_compose.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-layout-object">
        {% include "bwp/underscore/layout_object.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-layout-default">
        {% include "bwp/underscore/layout_default.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-tab">
        {% include "bwp/underscore/tab.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-modal">
        {% include "bwp/underscore/modal.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-modal-footer">
        {% include "bwp/underscore/modal_footer.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-filters">
        {% include "bwp/underscore/filters.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-filter">
        {% include "bwp/underscore/filter.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-filter-values">
        {% include "bwp/underscore/filter_values.html" %}
    </script>
    {% endblock %}
<!-- END: block jstemplates -->


<!-- START: block jsglobalvars -->
{% block jsglobalvars %}
    <script type="text/javascript">
        /* GLOBAL VARS */
        window.__bwp_media_prefix__ = "{% filter escapejs %}{% static "bwp/" %}{% endfilter %}";
        window.AJAX_TIMEOUT = 10000;
        window.BWP_API_URL = "{% filter escapejs %}{% url "bwp_api" %}{% endfilter %}";
        window.SETTINGS_UNIQUE_KEY = "{% filter escapejs %}{% SETTINGS 'PROJECT_SHORTNAME' %}__user_{{ user.id|default:0 }}{% endfilter %}";
        window.USER_ID = "{{ user.id|default:0 }}";
        window.USER_NAME = "{{ user.username }}";
        window.USER_LAST_NAME = "{{ user.last_name }}";
        window.USER_FIRST_NAME = "{{ user.first_name }}";
        window.USER = "{{ user }}";
        window.DEBUG = {% filter lower %}{% SETTINGS 'DEBUG' %}{% endfilter %};
        window.SERVER_TZ_OFFSET = {% SERVER_TZ_OFFSET_JS %};
    </script>
{% endblock %}
<!-- END: block jsglobalvars -->

<!-- START: block libjs -->
{% block libjs %}
    <script src="{{ STATIC_URL }}js/jquery/{% SETTINGS 'JQUERY_VERSION' %}/jquery{% mini_library %}.js"></script>
    <script src="{{ STATIC_URL }}js/jquery/json/2.4/jquery.json{% mini_library %}.js"></script>
    <script src="{{ STATIC_URL }}js/jquery/dateParser/0.2/jquery.dateParser{% mini_library %}.js"></script>
    <script src="{{ STATIC_URL }}js/moment/2.5.1/moment-with-langs{% mini_library %}.js"></script>
    <script src="{{ STATIC_URL }}js/underscore/1.6.0/underscore{% mini_library %}.js"></script>
    <script src="{{ STATIC_URL }}js/underscore/string/2.3.2/underscore.string{% mini_library %}.js"></script>
    <script src="{{ STATIC_URL }}js/bootstrap/{% SETTINGS 'BOOTSTRAP_VERSION' %}/bootstrap{% mini_library %}.js"></script>
    <script src="{{ STATIC_URL }}js/django/{% SETTINGS 'DJANGO_VERSION' %}/django-ajax-csrf{% mini_library %}.js"></script>
{% endblock %}
<!-- END: block libjs -->

<!-- START: block userjs -->
{% block userjs %}
{# Этот блок не должен исполняться на шаблонах авторизации #}
    {% if user.is_authenticated %}
        <script src="{{ STATIC_URL }}js/bwp/{% SETTINGS 'BWP_VERSION' %}/bwp{% mini_library %}.js"></script>
    {% endif %}
{% endblock %}
<!-- END: block userjs -->

<!-- START: block extrajs -->
    {% block extrajs %}{% endblock %}
<!-- END: block extrajs -->
</body></html>
