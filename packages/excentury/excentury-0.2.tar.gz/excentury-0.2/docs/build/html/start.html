

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; excentury 0.2b0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="excentury 0.2b0 documentation" href="index.html"/>
        <link rel="next" title="Excentury Format" href="format.html"/>
        <link rel="prev" title="Installing Excentury" href="installation.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> excentury</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="excentury.html"> What is Excentury?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="excentury.html#motivation">Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="excentury.html#stochastic-simulation-algorithm">Stochastic Simulation Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="excentury.html#compiled-code">Compiled Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="excentury.html#id1">Excentury</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html"> Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#the-easy-way">The Easy Way</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installing-on-nix-systems">Installing on *nix Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#excentury-executable">Excentury executable</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href=""> Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cpp">CPP</a></li>
<li class="toctree-l2"><a class="reference internal" href="#matlab">MATLAB</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python">Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="format.html"> Excentury Data Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="format.html#basic-types">Basic Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="format.html#xc-files">XC files</a></li>
<li class="toctree-l2"><a class="reference internal" href="format.html#structures">Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="format.html#tensors-multidimensional-arrays">Tensors: Multidimensional Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="format.html#summary">Summary</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cpp/debug.html"> Debugging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cpp/debug.html#level-1-exitif">Level 1: <tt class="docutils literal"><span class="pre">exitif</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp/debug.html#level-2-debug">Level 2: <tt class="docutils literal"><span class="pre">debug</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp/debug.html#level-3-trace">Level 3: <tt class="docutils literal"><span class="pre">trace</span></tt></a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">excentury</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Getting Started</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/start.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="getting-started">
<span id="start"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>Excentury aims to provide simple and intuitive tools which we can use
to develop packages with easy. What we wish to provide is a file
format where we can write C++ code and give accessibility from MATLAB
and Python at the same time.</p>
<p>Consider the excentury file <tt class="docutils literal"><span class="pre">sample.xcpp</span></tt>.</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84</pre></div></td><td class="code"><div class="highlight"><pre>&quot;&quot;&quot;Excentury Sample Package

This package contains only one function. The comments written in this
section should be used to give an overall description of the
excentury package being written.

&quot;&quot;&quot;
#include &lt;excentury/excentury.h&gt;
#define VECTOR excentury::DynamicTensor&lt;1, double&gt;
#define MATRIX excentury::DynamicTensor&lt;2, double&gt;
#define MTRAND excentury::MTRand

----------------------------------------------------------------------
@def{lotka_volterra}
    &quot;&quot;&quot;Generate a trajectory from the Lokta-Volterra model using
    Gillespie&#39;s Stochastic Simulation Algorithm. The output is a
    vector `t` and a matrix `v` where the first column contains the
    size of the prey population and the second column the size of the
    predator population. &quot;&quot;&quot;
    @param{double, A(1.0), &quot;birth rate of prey&quot;}
    @param{double, B(0.001), &quot;death rate of prey&quot;}
    @param{double, C(0.002), &quot;birth rate of predator&quot;}
    @param{double, D(1.0), &quot;death rate of predator&quot;}
    @param{int, x0(1000), &quot;initial prey population size&quot;}
    @param{int, y0(1000), &quot;initial predator population size&quot;}
    @param{int, num_points(50000), &quot;total number of points&quot;}
@body[[
    // z(m,n) is the change to the m-th population
    // due to the n-th event.
    MATRIX z(2, 4);
    z(0,0) = 1; z(0,1) = -1; z(0,2) = 0; z(0,3) =  0;
    z(1,0) = 0; z(1,1) =  0; z(1,2) = 1; z(1,3) = -1;

    // Random number generator
    MTRAND rg;

    double x = x0;
    double y = y0;
    
    double a[4], a0, tau, prop_sum, rand_num;
    int event;

    VECTOR t(num_points);
    MATRIX v(2, num_points);
    t[0] = 0;
    v(0,0) = x0;
    v(1,0) = y0;

    for (int point = 1; point &lt; num_points; ++point) {
        // Evaluating propensity functions
        a[0] = A*x;
        a[1] = B*x*y;
        a[2] = C*x*y;
        a[3] = D*y;
        // Sum of propensity functions
        a0 = 0;
        for (int i=0; i &lt; 4; ++i) a0 += a[i];
        if (a0 == 0) {
            break;
        }
        // Time between events
        tau = log(1/rg.rand())/a0;
        // Next event computation
        event = -1;
        prop_sum = 0;
        rand_num = rg.rand()*a0;
        while (prop_sum &lt; rand_num) {
            event = event + 1;
            prop_sum = prop_sum + a[event];
        }
        // Updating system
        x = x + z(0,event);
        y = y + z(1,event);
        // Storing point
        t[point] = t[point-1] + tau;
        v(0,point) = x;
        v(1,point) = y;
    }
]]
@ret[[
    @ret{t, &quot;t&quot;, t[0]}
    @ret{v, &quot;v&quot;, v[0]}
]]
----------------------------------------------------------------------
</pre></div>
</td></tr></table></div>
<p>The structure of this file goes as follows. Lines 1-7 provide a
description of the package. A package in this context is a collection
of functions. This section must start and end with three quotation
marks <tt class="docutils literal"><span class="pre">&quot;&quot;&quot;</span></tt>. In lines 8-12 we include the excentury header file.
This section follows immediately after the end of the package
description and ends at the encounter of three or more consecutive
dashes. In this section we have to provide all the includes as we
would in C++. You may define function or anything in C++ that you
want.</p>
<p>Lines 13-84 define a function. A function must be defined between two
lines of three or more consecutive dashes. To define a function we
must use the keyword <tt class="docutils literal"><span class="pre">&#64;def</span></tt>. Here you provide the name of the
function. This name must be valid in all scripting languages.
Excentury will not complain if we name our function
<tt class="docutils literal"><span class="pre">my-awesome-function</span></tt> but MATLAB will have something to say about
the used dashes in the name.</p>
<p>After the declaration of the name we have to provide a documentation
string. The documentation string can be found in lines 15-19. This
string should give a full description of the function followed by a
list of the input parameters. To provide a parameter we must provide
the type , the name and a description.</p>
<p>The body of the function can be found in lines 27-79. This section is
pure C++ code. Here we assume that the inputs declared previously are
available. The scripting language will be providing those inputs.</p>
<p>Finally, in lines 80-83 we define the return statements. This is
where we return our data back to the scripting language.</p>
<div class="section" id="cpp">
<h2>CPP<a class="headerlink" href="#cpp" title="Permalink to this headline">¶</a></h2>
<p>To try to run this example in cpp we can try the following:</p>
<div class="highlight-python"><div class="highlight"><pre>excentury sample.xcpp to cpp
</pre></div>
</div>
<p>This will create a valid cpp file which will then be compiled into a
binary which we can call.:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sample-lotka_volterra.run -h
usage: sample-lotka_volterra.run [-h] [-i] XC_CONTENT

program: sample-lotka_volterra

description:
    Generate a trajectory from the Lokta-Volterra model using
    Gillespie&#39;s Stochastic Simulation Algorithm. The output is a
    vector `t` and a matrix `v` where the first column contains the
    size of the prey population and the second column the size of the
    predator population.

parameters:
    `A`: birth rate of prey
    `B`: death rate of prey
    `C`: birth rate of predator
    `D`: death rate of predator
    `x0`: initial prey population size
    `y0`: initial predator population size
    `num_points`: total number of points

examples:

    generate an input file: sample-lotka_volterra.run -i &gt; input_file.xc
    use the file: sample-lotka_volterra.run &quot;`&lt; input_file.xc`&quot;
</pre></div>
</div>
<p>The help menu is important because it tells us how we can provide the inputs
to the program. In this case we can generate an input file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sample</span><span class="o">-</span><span class="n">lotka_volterra</span><span class="o">.</span><span class="n">run</span> <span class="o">-</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">input_file</span><span class="o">.</span><span class="n">xc</span>
</pre></div>
</div>
<p>Since the xcpp file declared default values we can leave the file as is
and run it as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>sample-lotka_volterra.run &quot;`&lt; input_file.xc`&quot; &gt; data.xc
</pre></div>
</div>
<p>Notice here that we redirected the output to the file data.xc. An
Excentury CPP program by default will create an executable which
takes input from the standard input and writes the output to the
standard output. If you do not redirect the output from the command
we presented above then expect to see a very long output. The output
generated by this file can then be used by matlab or python.</p>
</div>
<div class="section" id="matlab">
<h2>MATLAB<a class="headerlink" href="#matlab" title="Permalink to this headline">¶</a></h2>
<p>If we prefer to skip the middle guy we can compile the cpp file so that it may
be called directly from MATLAB:</p>
<div class="highlight-python"><div class="highlight"><pre>excentury sample.xcpp to matlab
</pre></div>
</div>
<p>Then in the MATLAB prompt we can do:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt; help sample.lotka_volterra
  sample.LOTKA_VOLTERRA generated on Sun Aug 17, 2014 11:57:01 PM by xcpp

      Generate a trajectory from the Lokta-Volterra model using
      Gillespie&#39;s Stochastic Simulation Algorithm. The output is a
      vector `t` and a matrix `v` where the first column contains the
      size of the prey population and the second column the size of the
      predator population.

      parameters:

        `A`: birth rate of prey
        `B`: death rate of prey
        `C`: birth rate of predator
        `D`: death rate of predator
        `x0`: initial prey population size
        `y0`: initial predator population size
        `num_points`: total number of points


&gt;&gt; [t, v] = sample.lotka_volterra(1, 0.001, 0.002, 1, 1000, 100, 50000);
&gt;&gt; plot(t, v)
</pre></div>
</div>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>Similary, we can do the same in Python:</p>
<div class="highlight-python"><div class="highlight"><pre>excentury sample.xcpp to python
</pre></div>
</div>
<p>You can view the help on the package:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sample</span>
<span class="n">help</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="format.html" class="btn btn-neutral float-right" title="Excentury Format"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="Installing Excentury"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Manuel Lopez.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2b0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>