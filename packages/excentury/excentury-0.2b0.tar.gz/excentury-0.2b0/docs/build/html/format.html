

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Excentury Format &mdash; excentury 0.2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="excentury 0.2 documentation" href="index.html"/>
        <link rel="next" title="Debugging" href="cpp/debug.html"/>
        <link rel="prev" title="Installing Excentury" href="installation.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> excentury</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="excentury.html"> What is Excentury?</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html"> Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#the-easy-way">The Easy Way</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installing-on-nix-systems">Installing on *nix Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#excentury-executable">Excentury executable</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href=""> Excentury Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-types">Basic Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#xc-files">XC files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#structures">Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tensors-multidimensional-arrays">Tensors: Multidimensional Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cpp/debug.html"> Debugging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cpp/debug.html#level-1-exitif">Level 1: <tt class="docutils literal"><span class="pre">exitif</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp/debug.html#level-2-debug">Level 2: <tt class="docutils literal"><span class="pre">debug</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp/debug.html#level-3-trace">Level 3: <tt class="docutils literal"><span class="pre">trace</span></tt></a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">excentury</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Excentury Format</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/format.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="excentury-format">
<span id="format"></span><h1>Excentury Format<a class="headerlink" href="#excentury-format" title="Permalink to this headline">¶</a></h1>
<p>To be able to seamlessly adapt a piece of C++ code to a script
language we need a way to communicate between C++ and the scripting
language. To understand how this communication process works we must
first examine the excentury file format.</p>
<div class="section" id="basic-types">
<h2>Basic Types<a class="headerlink" href="#basic-types" title="Permalink to this headline">¶</a></h2>
<p>In the C++ language there are several basic datatypes. These types
help us represent integers, real numbers and characters. To be able
to store information we need to be able to store the type of the
object we are storing along with its value. This could have been done
in several ways but for simplicity we have chosen to declare a
datatype by the type of object that is being stored along with the
number of bytes that it is required for it in memory.</p>
<p>There are several datatypes which represent integers, these are
<tt class="docutils literal"><span class="pre">signed</span> <span class="pre">char</span></tt>, <tt class="docutils literal"><span class="pre">short</span> <span class="pre">int</span></tt>, <tt class="docutils literal"><span class="pre">int</span></tt> and <tt class="docutils literal"><span class="pre">long</span> <span class="pre">int</span></tt>. To be able
to represent <tt class="docutils literal"><span class="pre">short</span> <span class="pre">int</span></tt> for instance we can state <tt class="docutils literal"><span class="pre">I2</span></tt>, meaning
an integer of 2 bytes. The following table shows all the basic
datatypes in C++ along with its excentury representation.</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="15%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type name</th>
<th class="head">Excentury</th>
<th class="head">Denotes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>char</strong></td>
<td><tt class="docutils literal"><span class="pre">C</span> <span class="pre">1</span></tt></td>
<td>character of 1 byte</td>
</tr>
<tr class="row-odd"><td><em>unsigned</em> <strong>char</strong></td>
<td><tt class="docutils literal"><span class="pre">N</span> <span class="pre">1</span></tt></td>
<td>natural number of 1 byte: 0 to 255</td>
</tr>
<tr class="row-even"><td><em>unsigned short</em> <strong>int</strong></td>
<td><tt class="docutils literal"><span class="pre">N</span> <span class="pre">2</span></tt></td>
<td>natural number of 2 bytes</td>
</tr>
<tr class="row-odd"><td><em>unsigned</em> <strong>int</strong></td>
<td><tt class="docutils literal"><span class="pre">N</span> <span class="pre">4</span></tt></td>
<td>natural number of 4 bytes</td>
</tr>
<tr class="row-even"><td><em>unsigned long</em> <strong>int</strong></td>
<td><tt class="docutils literal"><span class="pre">N</span> <span class="pre">8</span></tt></td>
<td>natural number of 8 bytes</td>
</tr>
<tr class="row-odd"><td><em>signed</em> <strong>char</strong></td>
<td><tt class="docutils literal"><span class="pre">I</span> <span class="pre">1</span></tt></td>
<td>integer of 1 byte: -128 to 127</td>
</tr>
<tr class="row-even"><td><em>short</em> <strong>int</strong></td>
<td><tt class="docutils literal"><span class="pre">I</span> <span class="pre">2</span></tt></td>
<td>integer of 2 bytes</td>
</tr>
<tr class="row-odd"><td><strong>int</strong></td>
<td><tt class="docutils literal"><span class="pre">I</span> <span class="pre">4</span></tt></td>
<td>integer of 4 bytes</td>
</tr>
<tr class="row-even"><td><em>long</em> <strong>int</strong></td>
<td><tt class="docutils literal"><span class="pre">I</span> <span class="pre">8</span></tt></td>
<td>integer of 8 bytes</td>
</tr>
<tr class="row-odd"><td><strong>float</strong></td>
<td><tt class="docutils literal"><span class="pre">R</span> <span class="pre">4</span></tt></td>
<td>real number of 4 bytes</td>
</tr>
<tr class="row-even"><td><strong>double</strong></td>
<td><tt class="docutils literal"><span class="pre">R</span> <span class="pre">8</span></tt></td>
<td>real number of 8 bytes</td>
</tr>
</tbody>
</table>
<p>These basic types are the building blocks for all possible datatypes
that we might need, these help us build structures which need to be
adapted to excentury in order to store them in a file.</p>
</div>
<div class="section" id="xc-files">
<h2>XC files<a class="headerlink" href="#xc-files" title="Permalink to this headline">¶</a></h2>
<p>The idea behind the excentury format is that the content of the file
must contain all the information so that we may load its data into a
scripting language. The following file for instance, does not contain
all the necessary information to load variables into a scripting
language.</p>
<div class="highlight-xc"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>-1 3.14
</pre></div>
</td></tr></table></div>
<p>Here we can tell that the file contains two values, the integer -1 and
the real number 3.14. This however, does not say how it was previously
stored in C++. One way to correct this is to write the file as follows</p>
<div class="highlight-xc"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre>2
a I 4 -1
b R 8 3.14
</pre></div>
</td></tr></table></div>
<p>The file states that are two variables. The first one is an integer
of 4 bytes with value -1 and it should be assigned the name <tt class="docutils literal"><span class="pre">a</span></tt>
when loaded. The second variable is a real number of 8 bytes of value
3.14 and should be named <tt class="docutils literal"><span class="pre">b</span></tt>.</p>
</div>
<div class="section" id="structures">
<h2>Structures<a class="headerlink" href="#structures" title="Permalink to this headline">¶</a></h2>
<p>To store structures we need to find a way of serializing its information with
the minimum amount of information. Suppose that we wish to store
two structures, a <tt class="docutils literal"><span class="pre">Point</span></tt> and a <tt class="docutils literal"><span class="pre">Line</span></tt>.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Point</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
    <span class="n">Point</span><span class="p">()</span><span class="o">:</span> <span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="mi">1</span><span class="p">){}</span>
    <span class="n">Point</span><span class="p">(</span><span class="kt">double</span> <span class="n">a1</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b2</span><span class="p">)</span><span class="o">:</span> <span class="n">x</span><span class="p">(</span><span class="n">a1</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">b2</span><span class="p">){}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Line</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Point</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
    <span class="n">Line</span><span class="p">()</span><span class="o">:</span> <span class="n">a</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">b</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{}</span>
    <span class="n">Line</span><span class="p">(</span><span class="kt">int</span> <span class="n">a1</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">a2</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b2</span><span class="p">)</span><span class="o">:</span>
        <span class="n">a</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">b1</span><span class="p">),</span> <span class="n">b</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="n">b2</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>For the moment, let us assume that we have taught excentury how
these two structures need to be serialized. A file containing a
<tt class="docutils literal"><span class="pre">Point</span></tt> named <tt class="docutils literal"><span class="pre">point_obj</span></tt> and a <tt class="docutils literal"><span class="pre">Line</span></tt> named <tt class="docutils literal"><span class="pre">line_obj</span></tt> may
possibly look as follows</p>
<div class="highlight-xc"><div class="highlight"><pre>2
Point x R 8 y R 8
Line a S Point b S Point
2
point_obj S Point 100.0 200.0
line_obj S Line 1.0 2.0 3.0 4.0
</pre></div>
</div>
<p>This file states that there are 2 structure definitions. The first
one is for <tt class="docutils literal"><span class="pre">Point</span></tt>. To read a definition we simply read pairs of
tokens: name and type. For a <tt class="docutils literal"><span class="pre">Point</span></tt> we have that its first member
is <tt class="docutils literal"><span class="pre">x</span></tt> and it is a real number of 8 bytes (<tt class="docutils literal"><span class="pre">R</span> <span class="pre">8</span></tt>). The second
member is <tt class="docutils literal"><span class="pre">y</span></tt> and it is a real number of 8 bytes. Here we have to
rely on the new line character to know that there are no other
members for <tt class="docutils literal"><span class="pre">Point</span></tt>. Similarly, for the <tt class="docutils literal"><span class="pre">Line</span></tt> definition we have
that its first member is named <tt class="docutils literal"><span class="pre">a</span></tt> and it is a <tt class="docutils literal"><span class="pre">Point</span></tt> structure
(<tt class="docutils literal"><span class="pre">S</span> <span class="pre">Point</span></tt>) while its second member is a <tt class="docutils literal"><span class="pre">Point</span></tt> structure named
<tt class="docutils literal"><span class="pre">b</span></tt>. This first section we just described is the dictionary for the
file. This part contains all the definitions of structures stored in
the file.</p>
<p>The second part contains the actual data. Here we can see that the
file contains 2 objects. The first one is called <tt class="docutils literal"><span class="pre">point_obj</span></tt>. This
is a structure of type <tt class="docutils literal"><span class="pre">Point</span></tt>. Since we now know the definition
for a <tt class="docutils literal"><span class="pre">Point</span></tt> we now know that we expect two values: a real number
<tt class="docutils literal"><span class="pre">x</span></tt> and a real number <tt class="docutils literal"><span class="pre">y</span></tt>. In this case these values are 100 and
200. The second object we have a <tt class="docutils literal"><span class="pre">Line</span></tt> structure. This one is made
up of two points. So we must first the first point <tt class="docutils literal"><span class="pre">a</span></tt> which has
members <tt class="docutils literal"><span class="pre">x</span></tt> and <tt class="docutils literal"><span class="pre">y</span></tt>, thus the member <tt class="docutils literal"><span class="pre">a</span></tt> has member <tt class="docutils literal"><span class="pre">x</span></tt> of
value 1 and member <tt class="docutils literal"><span class="pre">y</span></tt> of value 2. Similarly for the member <tt class="docutils literal"><span class="pre">b</span></tt> we
have values 3 and 4.</p>
<p>To store a structure we first need to tell Excentury how to store it.
This however, will be covered in a later section. For now, we must
mention one last object that is essential to the excentury format.</p>
</div>
<div class="section" id="tensors-multidimensional-arrays">
<h2>Tensors: Multidimensional Arrays<a class="headerlink" href="#tensors-multidimensional-arrays" title="Permalink to this headline">¶</a></h2>
<p>Arrays are essential to every programming language. Here we will give
a brief introduction on how we decided to store them in the excentury
format.</p>
<p>To store an array of integers of 4 bytes we could state the variable
name followed by <tt class="docutils literal"><span class="pre">A</span> <span class="pre">I</span> <span class="pre">4</span></tt> followed by the number of elements in the
array and their values. For instance</p>
<div class="highlight-xc"><div class="highlight"><pre>array_name A I 4 3 1 2 3
</pre></div>
</div>
<p>This was the original idea on how to store arrays. Similarly for
matrices we would use the letter <tt class="docutils literal"><span class="pre">M</span></tt> but this time we would use two
values to store its dimension.</p>
<div class="highlight-xc"><div class="highlight"><pre>matrix_name M I 4 2 3 1 2 3 4 5 6
</pre></div>
</div>
<p>One problem with this notation is that we assumed that the
information was stored in column major form. That is the matrix in
the previous file is</p>
<div class="math">
\[\begin{split}\left[ \begin{array}{cc}
1 &amp; 4 \\
2 &amp; 5 \\
3 &amp; 6
\end{array} \right]\end{split}\]</div>
<p>We can overcome this problem by adding a 0 if we want column major
or 1 if we want row major. The main problem when storing arrays and
matrices however is that if we continue naming these structures we
will soon find that we run out of names. For instance, an array is
simply a sequence of objects. An array of arrays is called a matrix.
An array of matrices is, well, a tensor of dimension 3. A
multidimensional array is a tensor.</p>
<p>To specify a tensor we can use <tt class="docutils literal"><span class="pre">T</span> <span class="pre">&lt;type&gt;</span></tt> where type is either a
basic type, a structure or a tensor. After that we must specify if it
is row major or column major followed by the number of dimensions of
the tensor and its dimensions. Finally we write the data.</p>
<p>To specify the previous array and matrix we would write the following
excentury file</p>
<div class="highlight-xc"><div class="highlight"><pre>0 2
array_name T I 4 0 1 3 1 2 3
matrix_name T I 4 0 2 2 3 1 2 3 4 5 6
</pre></div>
</div>
<p>There is one type of array which is special that treating it as a
tensor may be considered a waste of resources. A sequence of
characters is usually known as a <tt class="docutils literal"><span class="pre">string</span></tt>. This type of array is
special in excentury and it has been given the type <tt class="docutils literal"><span class="pre">W</span></tt>. For
instance to store the string <tt class="docutils literal"><span class="pre">&quot;hello</span> <span class="pre">world&quot;</span></tt> we can use:</p>
<div class="highlight-python"><div class="highlight"><pre>0 1
str_obj W 11 hello world
</pre></div>
</div>
<p>This says that <tt class="docutils literal"><span class="pre">str_obj</span></tt> is a word (<tt class="docutils literal"><span class="pre">W</span></tt>) of 11 characters.</p>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>The excentury file format takes the following form</p>
<div class="highlight-xc"><div class="highlight"><pre>&lt;number of definition&gt;
&lt;structure name&gt; [&lt;member name&gt; &lt;type&gt;] ...
...
&lt;number of objects&gt;
&lt;variable name&gt; &lt;type&gt; &lt;data&gt;
&lt;variable name&gt; T &lt;type&gt; &lt;row major:1, column major: 0&gt; &lt;dimension&gt; &lt;dimensions&gt; &lt;data&gt;
&lt;variable name&gt; W &lt;string size&gt; &lt;data&gt;
...
</pre></div>
</div>
<p>To write this file format we can use C++, Python or MATLAB. See each
of their sections for more information and examples on how to do it.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cpp/debug.html" class="btn btn-neutral float-right" title="Debugging"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="Installing Excentury"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Manuel Lopez.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>