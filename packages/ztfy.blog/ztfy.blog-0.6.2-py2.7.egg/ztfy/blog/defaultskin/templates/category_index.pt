<h1 tal:content="context/i18n:title" />
<div class="category" i18n:domain="ztfy.blog">
	<div class="heading nofloat" tal:define="heading context/i18n:heading;
											 renderer heading/html:renderer;"
								 tal:condition="heading"
								 tal:content="structure python:renderer.render('zope.source.rest',request)" />
	<div class="topics nofloat" tal:define="page_topics view/getTopics;
											topics page_topics/topics;
											pages page_topics/pages;
											current_page python:int(request.form.get('page',0));
											first_page python:max(0,current_page-3);
											last_page python:min(pages,current_page+4);">
		<div class="pages" tal:condition="python:pages > 1">
			<tal:if condition="python:first_page > 0">
				<a tal:attributes="href string:${request/URL}?page=0;"
				   title="First page" i18n:attributes="title">&lt;&lt;</a>
				<span>...</span>
			</tal:if>
			<a tal:repeat="page python:range(first_page,last_page)"
			   tal:attributes="href string:${request/URL}?page=${page};
							   class python:(current_page == page) and 'current' or '';
							   title python:'Page %d' % (page+1);"
			   tal:content="python:page+1">page</a>
			<tal:if condition="python:last_page < pages">
				<span>...</span>
				<a tal:define="last python:pages-1"
				   tal:attributes="href string:${request/URL}?page=${last};"
				   title="Last page" i18n:attributes="title">&gt;&gt;</a>
			</tal:if>
		</div>
		<div class="topic" tal:repeat="topic topics">
			<tal:var content="structure topic/@@preview" />
		</div>
		<div class="warning" tal:condition="not:topics">
			<span i18n:translate="">There is not any topic matching this tag.</span>
		</div>
		<div class="pages" tal:condition="python:pages > 1">
			<tal:if condition="python:first_page > 0">
				<a tal:attributes="href string:${request/URL}?page=0;"
				   title="First page" i18n:attributes="title">&lt;&lt;</a>
				<span>...</span>
			</tal:if>
			<a tal:repeat="page python:range(first_page,last_page)"
			   tal:attributes="href string:${request/URL}?page=${page};
							   class python:(current_page == page) and 'current' or '';
							   title python:'Page %d' % (page+1);"
			   tal:content="python:page+1">page</a>
			<tal:if condition="python:last_page < pages">
				<span>...</span>
				<a tal:define="last python:pages-1"
				   tal:attributes="href string:${request/URL}?page=${last};"
				   title="Last page" i18n:attributes="title">&gt;&gt;</a>
			</tal:if>
		</div>
	</div>
</div>