<div class="properties" i18n:domain="ztfy.blog"
	 tal:define="formatter python:request.locale.dates.getFormatter('dateTime','short')">
	<h2 i18n:translate="">Properties</h2>
	<div class="props">
		<div>
			<span class="label" i18n:translate="">Internal ID:</span>
			<span class="value" tal:content="view/oid" />
		</div>
		<div>
			<span class="label" i18n:translate="">Creator:</span>
			<span class="value" tal:content="view/creator/title" />
		</div>
		<div>
			<span class="label" i18n:translate="">Creation:</span>
			<span class="value" tal:content="python:formatter.format(view.created)" />
		</div>
		<div>
			<span class="label" i18n:translate="">Last update:</span>
			<span class="value" tal:content="python:formatter.format(view.modified)" />
		</div>
		<div tal:define="contribs view/contributors" tal:condition="contribs">
			<span class="label" i18n:translate="">Contributors:</span>
			<span class="value" tal:content="contribs" />
		</div>
		<div>
			<span class="label" i18n:translate="">Status:</span>
			<span class="value" i18n:translate="">
				<tal:var content="context/wf:status" i18n:name="status" /><br />
				&nbsp;&nbsp;- on <tal:var content="python:formatter.format(view.status_date)" i18n:name="date" /><br />
				&nbsp;&nbsp;- by <tal:var content="view/status_principal/title" i18n:name="user" />
			</span>
		</div>
		<div tal:define="date view/first_publication_date | nothing" tal:condition="date">
			<span class="label" i18n:translate="">First publication date:</span><br />&nbsp;&nbsp;
			<span class="value" i18n:translate="">
				on <tal:var content="python:formatter.format(date)" i18n:name="date" />
			</span>
		</div>
		<div tal:define="dates view/publication_dates | python:(None,None);
						 first python:dates[0];
						 last python:dates[1];" tal:condition="first">
			<span class="label" i18n:translate="">Publication dates:</span><br />&nbsp;&nbsp;
			<span class="value" tal:condition="last" i18n:translate="">
				from <tal:var content="python:formatter.format(first)" i18n:name="first" />
				to <tal:var content="python:formatter.format(last)" i18n:name="last" />
			</span>
			<span class="value" tal:condition="not:last" i18n:translate="">
				from <tal:var content="python:formatter.format(first)" i18n:name="first" />
			</span>
		</div>
	</div>
	<h2 class="inner" i18n:translate="">History</h2>
	<div class="history"
		 tal:define="history view/history;
					 first python:history[:-10];
					 last python:history[-10:];
					 tz python:modules['ztfy.utils.timezone'];">
		<div tal:condition="first">
			<div class="switcher" onclick="$.ZTFY.skin.switcher('DIV.switch', $(this).parents('DIV.first'));">...</div>
			<div class="switch">
				<tal:loop repeat="comment first">
					<div>
						<span class="label" tal:content="python:formatter.format(tz.tztime(comment.date))" /> - <tal:var content="python:view.principal(comment.principal_id).title" /><br />
						<tal:var content="structure comment/body/html:text" />
					</div>
					<hr />
				</tal:loop>
			</div>
		</div>
		<tal:loop repeat="comment last">
			<div>
				<span class="label" tal:content="python:formatter.format(tz.tztime(comment.date))" /> - <tal:var content="python:view.principal(comment.principal_id).title" /><br />
				<tal:var content="structure comment/body/html:text" />
			</div>
			<hr tal:condition="not:repeat/comment/end" />
		</tal:loop>
	</div>
</div>