
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5. Javascript docstrings &mdash; CubicWeb 3.18.3</title>
    
    <link rel="stylesheet" href="../_static/lglb-sphinx-doc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.18.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="CubicWeb 3.18.3" href="../index.html" />
    <link rel="up" title="Appendixes" href="index.html" />
    <link rel="prev" title="4. Installation dependencies" href="depends.html" /> 
  </head>
  <body>
<div class="header">
 <a href="http://www.cubicweb.org">
  <img alt="cubicweb logo" src="../_static/cubicweb.png"/>
 </a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="depends.html" title="4. Installation dependencies"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">CubicWeb 3.18.3</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Appendixes</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. Javascript docstrings</a><ul>
<li><a class="reference internal" href="#rest-generation">5.1. Rest generation</a></li>
<li><a class="reference internal" href="#docstring-structure">5.2. Docstring structure</a></li>
<li><a class="reference internal" href="#javscript-functions-docstring">5.3. Javscript functions docstring</a><ul>
<li><a class="reference internal" href="#function-directive">5.3.1. <cite>function</cite> directive</a></li>
<li><a class="reference internal" href="#function-parameters">5.3.2. Function parameters</a></li>
<li><a class="reference internal" href="#optional-parameter-specification">5.3.3. Optional parameter specification</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="depends.html"
                        title="previous chapter">4. Installation dependencies</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/annexes/docstrings-conventions.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="javascript-docstrings">
<h1>5. Javascript docstrings<a class="headerlink" href="#javascript-docstrings" title="Permalink to this headline">¶</a></h1>
<p>Whereas in Python source code we only need to include a module docstrings
using the directive <cite>.. automodule:: mypythonmodule</cite>, we will have to
explicitely define Javascript modules and functions in the doctrings since
there is no native directive to include Javascript files.</p>
<div class="section" id="rest-generation">
<h2>5.1. Rest generation<a class="headerlink" href="#rest-generation" title="Permalink to this headline">¶</a></h2>
<p><cite>pyjsrest</cite> is a small utility parsing Javascript doctrings and generating the
corresponding Restructured file used by Sphinx to generate HTML documentation.
This script will have the following structure:</p>
<div class="highlight-python"><pre>===========
filename.js
===========
.. module:: filename.js</pre>
</div>
<p>We use the <cite>.. module::</cite> directive to register a javascript library
as a Python module for Sphinx. This provides an entry in the module index.</p>
<p>The contents of the docstring found in the javascript file will be added as is
following the module declaration. No treatment will be done on the doctring.
All the documentation structure will be in the docstrings and will comply
with the following rules.</p>
</div>
<div class="section" id="docstring-structure">
<h2>5.2. Docstring structure<a class="headerlink" href="#docstring-structure" title="Permalink to this headline">¶</a></h2>
<p>Basically we document javascript with RestructuredText docstring
following the same convention as documenting Python code.</p>
<p>The doctring in Javascript files must be contained in standard
Javascript comment signs, starting with <cite>/**</cite> and ending with <cite>*/</cite>,
such as:</p>
<div class="highlight-python"><pre>/**
 * My comment starts here.
 * This is the second line prefixed with a `*`.
 * ...
 * ...
 * All the follwing line will be prefixed with a `*` followed by a space.
 * ...
 * ...
 */</pre>
</div>
<p>Comments line prefixed by <cite>//</cite> will be ignored. They are reserved for source
code comments dedicated to developers.</p>
</div>
<div class="section" id="javscript-functions-docstring">
<h2>5.3. Javscript functions docstring<a class="headerlink" href="#javscript-functions-docstring" title="Permalink to this headline">¶</a></h2>
<p>By default, the <cite>function</cite> directive describes a module-level function.</p>
<div class="section" id="function-directive">
<h3>5.3.1. <cite>function</cite> directive<a class="headerlink" href="#function-directive" title="Permalink to this headline">¶</a></h3>
<p>Its purpose is to define the function prototype such as:</p>
<div class="highlight-python"><pre>.. function:: loadxhtml(url, data, reqtype, mode)</pre>
</div>
<p>If any namespace is used, we should add it in the prototype for now,
until we define an appropriate directive:</p>
<div class="highlight-python"><pre>.. function:: jQuery.fn.loadxhtml(url, data, reqtype, mode)</pre>
</div>
</div>
<div class="section" id="function-parameters">
<h3>5.3.2. Function parameters<a class="headerlink" href="#function-parameters" title="Permalink to this headline">¶</a></h3>
<p>We will define function parameters as a bulleted list, where the
parameter name will be backquoted and followed by its description.</p>
<p>Example of a javascript function docstring:</p>
<div class="highlight-python"><pre>.. function:: loadxhtml(url, data, reqtype, mode)

cubicweb loadxhtml plugin to make jquery handle xhtml response

fetches `url` and replaces this's content with the result

Its arguments are:

* `url`

* `mode`, how the replacement should be done (default is 'replace')
   Possible values are :
       - 'replace' to replace the node's content with the generated HTML
       - 'swap' to replace the node itself with the generated HTML
       - 'append' to append the generated HTML to the node's content</pre>
</div>
</div>
<div class="section" id="optional-parameter-specification">
<h3>5.3.3. Optional parameter specification<a class="headerlink" href="#optional-parameter-specification" title="Permalink to this headline">¶</a></h3>
<p>Javascript functions handle arguments not listed in the function signature.
In the javascript code, they will be flagged using <cite>/* ... */</cite>. In the docstring,
we flag those optional arguments the same way we would define it in
Python:</p>
<div class="highlight-python"><pre>.. function:: asyncRemoteExec(fname, arg1=None, arg2=None)</pre>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="depends.html" title="4. Installation dependencies"
             >previous</a> |</li>
        <li><a href="../index.html">CubicWeb 3.18.3</a> &raquo;</li>
          <li><a href="index.html" >Appendixes</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2014, Logilab.
      Last updated on Mar 11, 2014.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>