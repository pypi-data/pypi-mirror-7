
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.1. Introduction &mdash; CubicWeb 3.18.3</title>
    
    <link rel="stylesheet" href="../../_static/lglb-sphinx-doc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.18.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="CubicWeb 3.18.3" href="../../index.html" />
    <link rel="up" title="2. Relation Query Language (RQL)" href="index.html" />
    <link rel="next" title="2.2. RQL syntax" href="language.html" />
    <link rel="prev" title="2. Relation Query Language (RQL)" href="index.html" /> 
  </head>
  <body>
<div class="header">
 <a href="http://www.cubicweb.org">
  <img alt="cubicweb logo" src="../../_static/cubicweb.png"/>
 </a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="language.html" title="2.2. RQL syntax"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="2. Relation Query Language (RQL)"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">CubicWeb 3.18.3</a> &raquo;</li>
          <li><a href="../index.html" >Appendixes</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">2. Relation Query Language (RQL)</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2.1. Introduction</a><ul>
<li><a class="reference internal" href="#goals-of-rql">2.1.1. Goals of RQL</a></li>
<li><a class="reference internal" href="#comparison-with-existing-languages">2.1.2. Comparison with existing languages</a><ul>
<li><a class="reference internal" href="#sql">2.1.2.1. SQL</a></li>
<li><a class="reference internal" href="#sparql">2.1.2.2. Sparql</a></li>
<li><a class="reference internal" href="#versa">2.1.2.3. Versa</a></li>
<li><a class="reference internal" href="#datalog">2.1.2.4. Datalog</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-different-types-of-queries">2.1.3. The different types of queries</a></li>
<li><a class="reference internal" href="#rql-relation-expressions">2.1.4. RQL relation expressions</a></li>
<li><a class="reference internal" href="#rql-operators">2.1.5. RQL Operators</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">2. Relation Query Language (RQL)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="language.html"
                        title="next chapter">2.2. RQL syntax</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/annexes/rql/intro.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="introduction">
<span id="rql-intro"></span><h1>2.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<div class="section" id="goals-of-rql">
<h2>2.1.1. Goals of RQL<a class="headerlink" href="#goals-of-rql" title="Permalink to this headline">¶</a></h2>
<p>The goal is to have a semantic language in order to:</p>
<ul class="simple">
<li>query relations in a clear syntax</li>
<li>empowers access to data repository manipulation</li>
<li>making attributes/relations browsing easy</li>
</ul>
<p>As such, attributes will be regarded as cases of special relations (in
terms of usage, the user should see no syntactic difference between an
attribute and a relation).</p>
</div>
<div class="section" id="comparison-with-existing-languages">
<h2>2.1.2. Comparison with existing languages<a class="headerlink" href="#comparison-with-existing-languages" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sql">
<h3>2.1.2.1. SQL<a class="headerlink" href="#sql" title="Permalink to this headline">¶</a></h3>
<p>RQL may remind of SQL but works at a higher abstraction level (the <em>CubicWeb</em>
framework generates SQL from RQL to fetch data from relation databases). RQL is
focused on browsing relations. The user needs only to know about the <em>CubicWeb</em>
data model he is querying, but not about the underlying SQL model.</p>
</div>
<div class="section" id="sparql">
<h3>2.1.2.2. Sparql<a class="headerlink" href="#sparql" title="Permalink to this headline">¶</a></h3>
<p>The query language most similar to RQL is <a class="reference external" href="http://www.w3.org/TR/rdf-sparql-query/">SPARQL</a>, defined by the W3C to serve
for the semantic web.</p>
</div>
<div class="section" id="versa">
<h3>2.1.2.3. Versa<a class="headerlink" href="#versa" title="Permalink to this headline">¶</a></h3>
<p>We should look in more detail, but here are already some ideas for the moment
... <a class="reference external" href="http://wiki.xml3k.org/Versa">Versa</a> is the language most similar to what we wanted to do, but the model
underlying data being RDF, there are some things such as namespaces or
handling of the RDF types which does not interest us. On the functionality
level, <a class="reference external" href="http://wiki.xml3k.org/Versa">Versa</a> is very comprehensive including through many functions of
conversion and basic types manipulation, which we may want to look at one time
or another.  Finally, the syntax is a little esoteric.</p>
</div>
<div class="section" id="datalog">
<h3>2.1.2.4. Datalog<a class="headerlink" href="#datalog" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/Datalog">Datalog</a> is a prolog derived query langage which applies to relational
databases. It is more expressive than RQL in that it accepts either
<a class="reference external" href="http://en.wikipedia.org/wiki/Extension_(predicate_logic)">extensional</a> and <a class="reference external" href="http://en.wikipedia.org/wiki/Intensional_definition">intensional</a> predicates (or relations). As of now,
RQL only deals with intensional relations.</p>
</div>
</div>
<div class="section" id="the-different-types-of-queries">
<h2>2.1.3. The different types of queries<a class="headerlink" href="#the-different-types-of-queries" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Search (<cite>Any</cite>)</dt>
<dd>Extract entities and attributes of entities.</dd>
<dt>Insert entities (<cite>INSERT</cite>)</dt>
<dd>Insert new entities or relations in the database.
It can also directly create relationships for the newly created entities.</dd>
<dt>Update entities, create relations (<cite>SET</cite>)</dt>
<dd>Update existing entities in the database,
or create relations between existing entities.</dd>
<dt>Delete entities or relationship (<cite>DELETE</cite>)</dt>
<dd>Remove entities or relations existing in the database.</dd>
</dl>
</div>
<div class="section" id="rql-relation-expressions">
<h2>2.1.4. RQL relation expressions<a class="headerlink" href="#rql-relation-expressions" title="Permalink to this headline">¶</a></h2>
<p>RQL expressions apply to a live database defined by a
<a class="reference internal" href="../../devrepo/datamodel/definition.html#datamodel-definition"><em>Yams schema</em></a>. Apart from the main type, or head, of the
expression (search, insert, etc.) the most common constituent of an
RQL expression is a (set of) relation expression(s).</p>
<p>An RQL relation expression contains three components:</p>
<ul class="simple">
<li>the subject, which is an entity type</li>
<li>the predicate, which is a relation definition (an arc of the schema)</li>
<li>the object, which is either an attribute or a relation to another entity</li>
</ul>
<img alt="&lt;subject&gt; &lt;predicate&gt; &lt;object&gt;" class="align-center" src="../../_images/Graph-ex.gif" />
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>A relation is always expressed in the order: <tt class="docutils literal"><span class="pre">subject</span></tt>,
<tt class="docutils literal"><span class="pre">predicate</span></tt>, <tt class="docutils literal"><span class="pre">object</span></tt>.</p>
<p>It is important to determine if the entity type is subject or object
to construct a valid expression. Inverting the subject/object is an
error since the relation cannot be found in the schema.</p>
<p class="last">If one does not have access to the code, one can find the order by
looking at the schema image in manager views (the subject is located
at the beginning of the arrow).</p>
</div>
<p>An example of two related relation expressions:</p>
<div class="highlight-python"><pre>P works_for C, P name N</pre>
</div>
<p>RQL variables represent typed entities. The type of entities is
either automatically inferred (by looking at the possible relation
definitions, see <a class="reference internal" href="../../devrepo/datamodel/definition.html#relationdefinition"><em>Relation definition</em></a>) or explicitely constrained
using the <tt class="docutils literal"><span class="pre">is</span></tt> meta relation.</p>
<p>In the example above, we barely need to look at the schema. If
variable names (in the RQL expression) and relation type names (in the
schema) are expresssively designed, the human reader can infer as much
as the <em>CubicWeb</em> querier.</p>
<p>The <tt class="docutils literal"><span class="pre">P</span></tt> variable is used twice but it always represent the same set
of entities. Hence <tt class="docutils literal"><span class="pre">P</span> <span class="pre">works_for</span> <span class="pre">C</span></tt> and <tt class="docutils literal"><span class="pre">P</span> <span class="pre">name</span> <span class="pre">N</span></tt> must be
compatible in the sense that all the Ps (which <em>can</em> refer to
different entity types) must accept the <tt class="docutils literal"><span class="pre">works_for</span></tt> and <tt class="docutils literal"><span class="pre">name</span></tt>
relation types. This does restrict the set of possible values of P.</p>
<p>Adding another relation expression:</p>
<div class="highlight-python"><pre>P works_for C, P name N, C name "logilab"</pre>
</div>
<p>This further restricts the possible values of P through an indirect
constraint on the possible values of <tt class="docutils literal"><span class="pre">C</span></tt>. The RQL-level <a class="reference external" href="http://en.wikipedia.org/wiki/Unification_(computing)">unification</a>
happening there is translated to one (or several) <a class="reference external" href="http://en.wikipedia.org/wiki/Join_(SQL)">joins</a> at the
database level.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In <em>CubicWeb</em>, the term <cite>relation</cite> is often found without ambiguity
instead of <cite>predicate</cite>.  This predicate is also known as the
<cite>property</cite> of the triple in <a class="reference external" href="http://www.w3.org/TR/rdf-concepts/">RDF concepts</a></p>
</div>
</div>
<div class="section" id="rql-operators">
<h2>2.1.5. RQL Operators<a class="headerlink" href="#rql-operators" title="Permalink to this headline">¶</a></h2>
<p>An RQL expression&#8217;s head can be completed using various operators such
as <tt class="docutils literal"><span class="pre">ORDERBY</span></tt>, <tt class="docutils literal"><span class="pre">GROUPBY</span></tt>, <tt class="docutils literal"><span class="pre">HAVING</span></tt>, <tt class="docutils literal"><span class="pre">LIMIT</span></tt> etc.</p>
<p>RQL relation expressions can be grouped with <tt class="docutils literal"><span class="pre">UNION</span></tt> or
<tt class="docutils literal"><span class="pre">WITH</span></tt>. Predicate oriented keywords such as <tt class="docutils literal"><span class="pre">EXISTS</span></tt>, <tt class="docutils literal"><span class="pre">OR</span></tt>,
<tt class="docutils literal"><span class="pre">NOT</span></tt> are available.</p>
<p>The complete zoo of RQL operators is described extensively in the
following chapter (<a class="reference internal" href="language.html#rql"><em>RQL syntax</em></a>).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="language.html" title="2.2. RQL syntax"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="2. Relation Query Language (RQL)"
             >previous</a> |</li>
        <li><a href="../../index.html">CubicWeb 3.18.3</a> &raquo;</li>
          <li><a href="../index.html" >Appendixes</a> &raquo;</li>
          <li><a href="index.html" >2. Relation Query Language (RQL)</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2014, Logilab.
      Last updated on Mar 11, 2014.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>