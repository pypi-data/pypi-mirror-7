
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>cubicweb.ajax.js &mdash; CubicWeb 3.18.3</title>
    
    <link rel="stylesheet" href="../../_static/lglb-sphinx-doc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.18.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="CubicWeb 3.18.3" href="../../index.html" />
    <link rel="up" title="&lt;no title&gt;" href="index.html" />
    <link rel="next" title="cubicweb.ajax.box.js" href="cubicweb.ajax.box.html" />
    <link rel="prev" title="cubicweb.htmlhelpers.js" href="cubicweb.htmlhelpers.html" /> 
  </head>
  <body>
<div class="header">
 <a href="http://www.cubicweb.org">
  <img alt="cubicweb logo" src="../../_static/cubicweb.png"/>
 </a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cubicweb.ajax.box.html" title="cubicweb.ajax.box.js"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cubicweb.htmlhelpers.html" title="cubicweb.htmlhelpers.js"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">CubicWeb 3.18.3</a> &raquo;</li>
          <li><a href="../index.html" >Web side development</a> &raquo;</li>
          <li><a href="../js.html" >Javascript</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">&lt;no title&gt;</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="cubicweb.htmlhelpers.html"
                        title="previous chapter">cubicweb.htmlhelpers.js</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="cubicweb.ajax.box.html"
                        title="next chapter">cubicweb.ajax.box.js</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/devweb/js_api/cubicweb.ajax.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-cubicweb.ajax.js">
<span id="cubicweb-ajax-js"></span><h1>cubicweb.ajax.js<a class="headerlink" href="#module-cubicweb.ajax.js" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="cubicweb.ajax.js.Deferred">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">Deferred</tt><big>(</big><big>)</big><a class="headerlink" href="#cubicweb.ajax.js.Deferred" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>dummy ultra minimalist implementation of deferred for jQuery</p>
<p>returns true if <cite>url</cite> is a mod_concat-like url
(e.g. <a class="reference external" href="http://..../data">http://..../data</a>??resource1.js,resource2.js)</p>
<p>decomposes a mod_concat-like url into its corresponding list of
resources&#8217; urls
&gt;&gt;&gt; _listResources(&#8216;<a class="reference external" href="http://foo.com/data/">http://foo.com/data/</a>??a.js,b.js,c.js&#8217;)
[&#8216;<a class="reference external" href="http://foo.com/data/a.js">http://foo.com/data/a.js</a>&#8216;, &#8216;<a class="reference external" href="http://foo.com/data/b.js">http://foo.com/data/b.js</a>&#8216;, &#8216;<a class="reference external" href="http://foo.com/data/c.js">http://foo.com/data/c.js</a>&#8216;]</p>
<dl class="function">
<dt>
<tt class="descname">function loadAjaxHtmlHead(response)</tt></dt>
<dd></dd></dl>

<p>inspect dom response (as returned by getDomFromResponse), search for
a &lt;div class=&#8221;ajaxHtmlHead&#8221;&gt; node and put its content into the real
document&#8217;s head.
This enables dynamic css and js loading and is used by replacePageChunk</p>
<dl class="function">
<dt id="cubicweb.ajax.js.ajaxFuncArgs">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">ajaxFuncArgs</tt><big>(</big><em>fname</em>, <em>form</em>, <em>*args</em><big>)</big><a class="headerlink" href="#cubicweb.ajax.js.ajaxFuncArgs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>extend <cite>form</cite> parameters to call the js_`fname` function of the json
controller with <cite>args</cite> arguments.</p>
<dl class="function">
<dt id="cubicweb.ajax.js.loadxhtml">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">loadxhtml</tt><big>(</big><em>url</em>, <em>form</em>, <em>reqtype='get'</em>, <em>mode='replace'</em>, <em>cursor=false</em><big>)</big><a class="headerlink" href="#cubicweb.ajax.js.loadxhtml" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>build url given by absolute or relative <cite>url</cite> and <cite>form</cite> parameters
(dictionary), fetch it using <cite>reqtype</cite> method, then evaluate the
returned XHTML and insert it according to <cite>mode</cite> in the
document. Possible modes are :</p>
<blockquote>
<div><ul class="simple">
<li>&#8216;replace&#8217; to replace the node&#8217;s content with the generated HTML</li>
<li>&#8216;swap&#8217; to replace the node itself with the generated HTML</li>
<li>&#8216;append&#8217; to append the generated HTML to the node&#8217;s content</li>
</ul>
</div></blockquote>
<p>If <cite>cursor</cite>, turn mouse cursor into &#8216;progress&#8217; cursor until the remote call
is back.</p>
<dl class="function">
<dt id="cubicweb.ajax.js.loadRemote">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">loadRemote</tt><big>(</big><em>url</em>, <em>form</em>, <em>reqtype='GET'</em>, <em>sync=false</em><big>)</big><a class="headerlink" href="#cubicweb.ajax.js.loadRemote" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Asynchronously (unless <cite>sync</cite> argument is set to true) load an url or path
and return a deferred whose callbacks args are decoded according to the
Content-Type response header. <cite>form</cite> should be additional form params
dictionary, <cite>reqtype</cite> the HTTP request type (get &#8216;GET&#8217; or &#8216;POST&#8217;).</p>
<dl class="function">
<dt id="cubicweb.ajax.js._">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">_</tt><big>(</big><em>message</em><big>)</big><a class="headerlink" href="#cubicweb.ajax.js._" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>emulation of gettext&#8217;s _ shortcut</p>
<dl class="function">
<dt id="cubicweb.ajax.js._loadDynamicFragments">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">_loadDynamicFragments</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#cubicweb.ajax.js._loadDynamicFragments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>finds each dynamic fragment in the page and executes the
the associated RQL to build them (Async call)</p>
<dl class="function">
<dt id="cubicweb.ajax.js.unregisterUserCallback">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">unregisterUserCallback</tt><big>(</big><em>cbname</em><big>)</big><a class="headerlink" href="#cubicweb.ajax.js.unregisterUserCallback" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>unregisters the python function registered on the server&#8217;s side
while the page was generated.</p>
<dl class="function">
<dt id="cubicweb.ajax.js.buildWysiwygEditors">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">buildWysiwygEditors</tt><big>(</big><em>parent</em><big>)</big><a class="headerlink" href="#cubicweb.ajax.js.buildWysiwygEditors" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>XXX: this function should go in edition.js but as for now, htmlReplace
references it.</p>
<p>replace all textareas with fckeditors.</p>
<dl class="function">
<dt id="cubicweb.ajax.js.stripEmptyTextNodes">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">stripEmptyTextNodes</tt><big>(</big><em>nodelist</em><big>)</big><a class="headerlink" href="#cubicweb.ajax.js.stripEmptyTextNodes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>takes a list of DOM nodes and removes all empty text nodes</p>
<dl class="function">
<dt id="cubicweb.ajax.js.getDomFromResponse">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">getDomFromResponse</tt><big>(</big><em>response</em><big>)</big><a class="headerlink" href="#cubicweb.ajax.js.getDomFromResponse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>convenience function that returns a DOM node based on req&#8217;s result.
XXX clarify the need to clone</p>
<dl class="function">
<dt id="cubicweb.ajax.js.reloadCtxComponentsSection">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">reloadCtxComponentsSection</tt><big>(</big><em>context</em>, <em>actualEid</em>, <em>creationEid=None</em><big>)</big><a class="headerlink" href="#cubicweb.ajax.js.reloadCtxComponentsSection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>reload all components in the section for a given <cite>context</cite>.</p>
<p>This is necessary for cases where the parent entity (on which the section
apply) has been created during post, hence the section has to be reloaded to
consider its new eid, hence the two additional arguments <cite>actualEid</cite> and
<cite>creationEid</cite>: <cite>actualEid</cite> is the eid of newly created top level entity and
<cite>creationEid</cite> the fake eid that was given as form creation marker (e.g. A).</p>
<p>You can still call this function with only the actual eid if you&#8217;re not in
such creation case.</p>
<dl class="function">
<dt id="cubicweb.ajax.js.reload">
<tt class="descclassname">cubicweb.ajax.js.</tt><tt class="descname">reload</tt><big>(</big><em>domid</em>, <em>compid</em>, <em>registry</em>, <em>formparams</em>, <em>*render_args</em><big>)</big><a class="headerlink" href="#cubicweb.ajax.js.reload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><cite>js_render</cite> based reloading of views and components.</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cubicweb.ajax.box.html" title="cubicweb.ajax.box.js"
             >next</a> |</li>
        <li class="right" >
          <a href="cubicweb.htmlhelpers.html" title="cubicweb.htmlhelpers.js"
             >previous</a> |</li>
        <li><a href="../../index.html">CubicWeb 3.18.3</a> &raquo;</li>
          <li><a href="../index.html" >Web side development</a> &raquo;</li>
          <li><a href="../js.html" >Javascript</a> &raquo;</li>
          <li><a href="index.html" >&lt;no title&gt;</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2014, Logilab.
      Last updated on Mar 11, 2014.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>