
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5. Creation of your first instance &mdash; CubicWeb 3.18.3</title>
    
    <link rel="stylesheet" href="../_static/lglb-sphinx-doc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.18.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="CubicWeb 3.18.3" href="../index.html" />
    <link rel="up" title="Administration" href="index.html" />
    <link rel="next" title="6. Configure an instance" href="instance-config.html" />
    <link rel="prev" title="4. cubicweb-ctl tool" href="cubicweb-ctl.html" /> 
  </head>
  <body>
<div class="header">
 <a href="http://www.cubicweb.org">
  <img alt="cubicweb logo" src="../_static/cubicweb.png"/>
 </a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="instance-config.html" title="6. Configure an instance"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cubicweb-ctl.html" title="4. cubicweb-ctl tool"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">CubicWeb 3.18.3</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Administration</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. Creation of your first instance</a><ul>
<li><a class="reference internal" href="#instance-creation">5.1. Instance creation</a></li>
<li><a class="reference internal" href="#instance-administration">5.2. Instance administration</a><ul>
<li><a class="reference internal" href="#start-stop">5.2.1. start / stop</a></li>
<li><a class="reference internal" href="#upgrade">5.2.2. upgrade</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="cubicweb-ctl.html"
                        title="previous chapter">4. <tt class="docutils literal docutils literal"><span class="pre">cubicweb-ctl</span></tt> tool</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="instance-config.html"
                        title="next chapter">6. Configure an instance</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/admin/create-instance.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creation-of-your-first-instance">
<h1>5. Creation of your first instance<a class="headerlink" href="#creation-of-your-first-instance" title="Permalink to this headline">¶</a></h1>
<div class="section" id="instance-creation">
<h2>5.1. Instance creation<a class="headerlink" href="#instance-creation" title="Permalink to this headline">¶</a></h2>
<p>Now that we created a cube, we can create an instance and access it via a web
browser. We will use a <cite>all-in-one</cite> configuration to simplify things</p>
<div class="highlight-python"><pre>cubicweb-ctl create -c all-in-one mycube myinstance</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please note that we created a new cube for a demo purpose but
you could have use an existing cube available in our standard library
such as blog or person for example.</p>
</div>
<p>A serie of questions will be prompted to you, the default answer is usually
sufficient. You can anyway modify the configuration later on by editing
configuration files. When a user/psswd is requested to access the database
please use the login you create at the time you configured the database
(<a class="reference internal" href="config.html#postgresqlconfiguration"><em>PostgreSQL</em></a>).</p>
<p>It is important to distinguish here the user used to access the database and the
user used to login to the cubicweb instance. When an instance starts, it uses
the login/psswd for the database to get the schema and handle low level
transaction. But, when <strong class="command">cubicweb-ctl create</strong> asks for a manager
login/psswd of <em>CubicWeb</em>, it refers to the user you will use during the
development to administrate your web instance. It will be possible, later on,
to use this user to create others users for your final web instance.</p>
</div>
<div class="section" id="instance-administration">
<h2>5.2. Instance administration<a class="headerlink" href="#instance-administration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="start-stop">
<h3>5.2.1. start / stop<a class="headerlink" href="#start-stop" title="Permalink to this headline">¶</a></h3>
<p>When this command is completed, the definition of your instance is
located in <tt class="file docutils literal"><span class="pre">~/etc/cubicweb.d/myinstance/*</span></tt>. To launch it, you
just type</p>
<div class="highlight-python"><pre>cubicweb-ctl start -D myinstance</pre>
</div>
<p>The option <cite>-D</cite> specifies the <em>debug mode</em> : the instance is not
running in server mode and does not disconnect from the terminal,
which simplifies debugging in case the instance is not properly
launched. You can see how it looks by visiting the URL
<cite>http://localhost:8080</cite> (the port number depends of your
configuration). To login, please use the cubicweb administrator
login/psswd you defined when you created the instance.</p>
<p>To shutdown the instance, Crtl-C in the terminal window is enough.
If you did not use the option <cite>-D</cite>, then type</p>
<div class="highlight-python"><pre>cubicweb-ctl stop myinstance</pre>
</div>
<p>This is it! All is settled down to start developping your data model...</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The output of <cite>cubicweb-ctl start -D myinstance</cite> can be
overwhelming. It is possible to reduce the log level with the
<cite>&#8211;loglevel</cite> parameter as in <cite>cubicweb-ctl start -D myinstance -l
info</cite> to filter out all logs under <cite>info</cite> gravity.</p>
</div>
</div>
<div class="section" id="upgrade">
<h3>5.2.2. upgrade<a class="headerlink" href="#upgrade" title="Permalink to this headline">¶</a></h3>
<p>The command is:</p>
<div class="highlight-python"><pre>cubicweb-ctl upgrade myinstance</pre>
</div>
<p>A series of questions will be asked. It always starts with a proposal
to make a backup of your sources (where it applies). Unless you know
exactly what you are doing (i.e. typically fiddling in debug mode, but
definitely NOT migrating a production instance), you should answer YES
to that.</p>
<p>The remaining questions concern the migration steps of <em>CubicWeb</em>,
then of the cubes that form the whole application, in reverse
dependency order.</p>
<p>In principle, if the migration scripts have been properly written and
tested, you should answer YES to all questions.</p>
<p>Somtimes, typically while debugging a migration script, something goes
wrong and the migration fails. Unfortunately the databse may be in an
incoherent state. You have two options here:</p>
<ul class="simple">
<li>fix the bug, restore the database and restart the migration process
from scratch (quite recommended in a production environement)</li>
<li>try to replay the migration up to the last successful commit, that
is answering NO to all question up to the step that failed, and
finish by answering YES to the remaining questions.</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="instance-config.html" title="6. Configure an instance"
             >next</a> |</li>
        <li class="right" >
          <a href="cubicweb-ctl.html" title="4. cubicweb-ctl tool"
             >previous</a> |</li>
        <li><a href="../index.html">CubicWeb 3.18.3</a> &raquo;</li>
          <li><a href="index.html" >Administration</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2014, Logilab.
      Last updated on Mar 11, 2014.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>