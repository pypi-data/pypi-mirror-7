
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>6. Configure an instance &mdash; CubicWeb 3.18.3</title>
    
    <link rel="stylesheet" href="../_static/lglb-sphinx-doc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.18.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="CubicWeb 3.18.3" href="../index.html" />
    <link rel="up" title="Administration" href="index.html" />
    <link rel="next" title="7. User interface for web site configuration" href="site-config.html" />
    <link rel="prev" title="5. Creation of your first instance" href="create-instance.html" /> 
  </head>
  <body>
<div class="header">
 <a href="http://www.cubicweb.org">
  <img alt="cubicweb logo" src="../_static/cubicweb.png"/>
 </a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="site-config.html" title="7. User interface for web site configuration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="create-instance.html" title="5. Creation of your first instance"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">CubicWeb 3.18.3</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Administration</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">6. Configure an instance</a><ul>
<li><a class="reference internal" href="#configuring-the-web-server">6.1. Configuring the Web server</a><ul>
<li><a class="reference internal" href="#https-configuration">6.1.1. Https configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-up-the-web-client">6.2. Setting up the web client</a></li>
<li><a class="reference internal" href="#rql-server-configuration">6.3. RQL server configuration</a></li>
<li><a class="reference internal" href="#pyro-configuration-for-the-instance">6.4. Pyro configuration for the instance</a></li>
<li><a class="reference internal" href="#configuring-e-mail">6.5. Configuring e-mail</a></li>
<li><a class="reference internal" href="#configuring-logging">6.6. Configuring logging</a></li>
<li><a class="reference internal" href="#configuring-persistent-properties">6.7. Configuring persistent properties</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="create-instance.html"
                        title="previous chapter">5. Creation of your first instance</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="site-config.html"
                        title="next chapter">7. User interface for web site configuration</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/admin/instance-config.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="configure-an-instance">
<h1>6. Configure an instance<a class="headerlink" href="#configure-an-instance" title="Permalink to this headline">¶</a></h1>
<p>While creating an instance, a configuration file is generated in:</p>
<div class="highlight-python"><pre>$ (CW_INSTANCES_DIR) / &lt;instance&gt; / &lt;configuration name&gt;.conf</pre>
</div>
<p>For example:</p>
<div class="highlight-python"><pre>/etc/cubicweb.d/myblog/all-in-one.conf</pre>
</div>
<p>It is a simple text file in the INI format
(<a class="reference external" href="http://en.wikipedia.org/wiki/INI_file">http://en.wikipedia.org/wiki/INI_file</a>). In the following description,
each option name is prefixed with its own section and followed by its
default value if necessary, e.g. &#8220;<cite>&lt;section&gt;.&lt;option&gt;</cite> [value].&#8221;</p>
<div class="section" id="configuring-the-web-server">
<span id="webserverconfig"></span><h2>6.1. Configuring the Web server<a class="headerlink" href="#configuring-the-web-server" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>web.auth-model</cite> [cookie]:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">authentication mode, cookie or http</td>
</tr>
<tr class="field-even field"><th class="field-name"><cite>web.realm</cite>:</th><td class="field-body">realm of the instance in http authentication mode</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>web.http-session-time</cite> [0]:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">period of inactivity of an HTTP session before it closes automatically.
Duration in seconds, 0 meaning no expiration (or more exactly at the
closing of the browser client)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2"><cite>main.anonymous-user</cite>, <cite>main.anonymous-password</cite>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">login and password to use to connect to the RQL server with
HTTP anonymous connection. CWUser account should exist.</td>
</tr>
<tr class="field-odd field"><th class="field-name"><cite>main.base-url</cite>:</th><td class="field-body">url base site to be used to generate the urls of web pages</td>
</tr>
</tbody>
</table>
<div class="section" id="https-configuration">
<h3>6.1.1. Https configuration<a class="headerlink" href="#https-configuration" title="Permalink to this headline">¶</a></h3>
<p>It is possible to make a site accessible for anonymous http connections
and https for authenticated users. This requires to
use apache (for example) for redirection and the variable <cite>main.https-url</cite>
of configuration file.</p>
<p>For this to work you have to activate the following apache modules :</p>
<ul class="simple">
<li>rewrite</li>
<li>proxy</li>
<li>http_proxy</li>
</ul>
<p>The command on Debian based systems for that is</p>
<div class="highlight-python"><pre>a2enmod rewrite http_proxy proxy
/etc/init.d/apache2 restart</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><p class="first">For an apache redirection of a site accessible via <cite>http://localhost/demo</cite>
and <cite>https://localhost/demo</cite> and actually running on port 8080, it
takes to the http::</p>
<div class="highlight-python"><pre>ProxyPreserveHost On
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/demo
RewriteRule ^/demo$ /demo/
RewriteRule ^/demo/(.*) http://127.0.0.1:8080/$1 [L,P]</pre>
</div>
<p>and for the https::</p>
<div class="highlight-python"><pre>ProxyPreserveHost On
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/ demo
RewriteRule ^/demo$/demo/
RewriteRule ^/demo/(.*) http://127.0.0.1:8080/https/$1 [L,P]</pre>
</div>
<p>and we will file in the all-in-one.conf of the instance::</p>
<div class="last highlight-python"><pre>base-url = http://localhost/demo
https-url = https://localhost/demo</pre>
</div>
</td>
</tr>
</tbody>
</table>
<p>Notice that if you simply want a site accessible through https, not <em>both</em> http
and https, simply set <cite>base-url</cite> to the https url and the first section into your
apache configuration (as you would have to do for an http configuration with an
apache front-end).</p>
</div>
</div>
<div class="section" id="setting-up-the-web-client">
<h2>6.2. Setting up the web client<a class="headerlink" href="#setting-up-the-web-client" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>web.embed-allowed</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">regular expression matching sites which could be &#8220;embedded&#8221; in
the site (controllers &#8216;embed&#8217;)</td>
</tr>
<tr class="field-even field"><th class="field-name"><cite>web.submit-url</cite>:</th><td class="field-body">url where the bugs encountered in the instance can be mailed to</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rql-server-configuration">
<h2>6.3. RQL server configuration<a class="headerlink" href="#rql-server-configuration" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name"><cite>main.host</cite>:</th><td class="field-body">host name if it can not be detected correctly</td>
</tr>
<tr class="field-even field"><th class="field-name"><cite>main.pid-file</cite>:</th><td class="field-body">file where will be written the server pid</td>
</tr>
<tr class="field-odd field"><th class="field-name"><cite>main.uid</cite>:</th><td class="field-body">user account to use for launching the server when it is
root launched by init</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2"><cite>main.session-time [30*60]</cite>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">timeout of a RQL session</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>main.query-log-file</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">file where all requests RQL executed by the server are written</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pyro-configuration-for-the-instance">
<h2>6.4. Pyro configuration for the instance<a class="headerlink" href="#pyro-configuration-for-the-instance" title="Permalink to this headline">¶</a></h2>
<p>Web server side:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>pyro.pyro-instance-id</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">pyro identifier of RQL server (e.g. the instance name)</td>
</tr>
</tbody>
</table>
<p>RQL server side:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>main.pyro-server</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">boolean to switch on/off pyro server-side</td>
</tr>
<tr class="field-even field"><th class="field-name"><cite>pyro.pyro-host</cite>:</th><td class="field-body">pyro host:port number. If no port is specified, it is assigned
automatically.</td>
</tr>
</tbody>
</table>
<p>RQL and web servers side:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>pyro.pyro-ns-host</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">hostname hosting pyro server name. If no value is
specified, it is located by a request from broadcast</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2"><cite>pyro.pyro-ns-group</cite>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">pyro group in which to save the instance (will default to &#8216;cubicweb&#8217;)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuring-e-mail">
<h2>6.5. Configuring e-mail<a class="headerlink" href="#configuring-e-mail" title="Permalink to this headline">¶</a></h2>
<p>RQL and web server side:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>email.mangle-mails [no]</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">indicates whether the email addresses must be displayed as is or
transformed</td>
</tr>
</tbody>
</table>
<p>RQL server side:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>email.smtp-host [mail]</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">hostname hosting the SMTP server to use for outgoing mail</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2"><cite>email.smtp-port [25]</cite>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">SMTP server port to use for outgoing mail</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>email.sender-name</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">name to use for outgoing mail of the instance</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2"><cite>email.sender-addr</cite>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">address for outgoing mail of the instance</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>email.default dest-addrs</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">destination addresses by default, if used by the configuration of the
dissemination of the model (separated by commas)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2"><cite>email.supervising-addrs</cite>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">destination addresses of e-mails of supervision (separated by
commas)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuring-logging">
<h2>6.6. Configuring logging<a class="headerlink" href="#configuring-logging" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>main.log-threshold</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">level of filtering messages (DEBUG, INFO, WARNING, ERROR)</td>
</tr>
<tr class="field-even field"><th class="field-name"><cite>main.log-file</cite>:</th><td class="field-body">file to write messages</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuring-persistent-properties">
<span id="persistentproperties"></span><h2>6.7. Configuring persistent properties<a class="headerlink" href="#configuring-persistent-properties" title="Permalink to this headline">¶</a></h2>
<p>Other configuration settings are in the form of entities <cite>CWProperty</cite>
in the database. It must be edited via the web interface or by
RQL queries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name"><cite>ui.encoding</cite>:</th><td class="field-body">Character encoding to use for the web</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2"><cite>navigation.short-line-size</cite>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">number of characters for &#8220;short&#8221; display</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>navigation.page-size</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">maximum number of entities to show per results page</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2"><cite>navigation.related-limit</cite>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">number of related entities to show up on primary entity view</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2"><cite>navigation.combobox-limit</cite>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">number of entities unrelated to show up on the drop-down lists of
the sight on an editing entity view</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="site-config.html" title="7. User interface for web site configuration"
             >next</a> |</li>
        <li class="right" >
          <a href="create-instance.html" title="5. Creation of your first instance"
             >previous</a> |</li>
        <li><a href="../index.html">CubicWeb 3.18.3</a> &raquo;</li>
          <li><a href="index.html" >Administration</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2001-2014, Logilab.
      Last updated on Mar 11, 2014.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>