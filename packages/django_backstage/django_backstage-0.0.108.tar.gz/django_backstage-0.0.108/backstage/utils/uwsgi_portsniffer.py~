import sys
"""uwsgi_portsniffer.py
Use a uwsgi log file to find the bound uwsgi port
"""

def main(argv):
    if len(argv) <> 2:
        print 'Usage: uwsgi_portsniffer.py [uwsgi log file]'
        return None
    print argv
    return None
    f = 'backstage-river-mfgis.log'
    fo = open(f,'r')

    current_port = 0
    for l in fo.readlines():
        if 'bound to TCP address' in l:
            before0,after0 = l.split('address')
            before1,after1 = after0.split('(port')
            before1=before1.strip()
            ip,port = before1.split(':')
            current_port = port
    fo.close()
    return current_port


if __name__ == '__main__':
    main(sys.argv)


