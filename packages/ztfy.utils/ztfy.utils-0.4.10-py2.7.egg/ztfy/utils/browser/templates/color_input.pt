<div class="colorSelector"
	 tal:attributes="id string:${view/id}_selector">
	<input type="hidden"
		   tal:attributes="id view/id;
						   name view/name;
						   lang view/lang;
						   value view/value;" />
	<div></div>
	<script type="text/javascript" tal:content="string:
		$$(document).ready(function() {
			$$('DIV[id=${view/id}_selector] div').css('backgroundColor', '#${view/value}');
			$$('DIV[id=${view/id}_selector]').ColorPicker({
				color: '#${view/value}',
				onShow: function (colpkr) {
					$$(colpkr).fadeIn(500);
					return false;
				},
				onHide: function (colpkr) {
					$$(colpkr).fadeOut(500);
					return false;
				},
				onChange: function (hsb, hex, rgb) {
					$$('DIV[id=${view/id}_selector] div').css('backgroundColor', '#' + hex);
					$$('INPUT[id=${view/id}]').val(hex);
				},
				onSubmit: function() {
					$$('DIV[id=${view/id}_selector]').ColorPickerHide();
				}
			});
		});
	"></script>
</div>