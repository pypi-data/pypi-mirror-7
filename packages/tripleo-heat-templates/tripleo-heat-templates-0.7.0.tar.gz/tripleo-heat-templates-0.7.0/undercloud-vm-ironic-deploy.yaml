Parameters:
  IronicPassword:
    Type: String
    Description: Ironic password for keystone access
    NoEcho: true
  NeutronPublicInterface:
    Default: eth0
    Description: What interface to bridge onto br-ex for network nodes.
    Type: String
  PowerSSHPrivateKey:
    Description: Private key for using to ssh to a virtual power host.
    Type: String
    NoEcho: true
Resources:
  01_undercloudNovaDeployment:
    Type: OS::Heat::StructuredDeployment
    Properties:
      config: {Ref: undercloudNovaConfig}
      server: {Ref: undercloud}
      signal_transport: NO_SIGNAL
      input_values:
        nova_service_password: {Ref: NovaPassword}
  02_undercloudIronicDeployment:
    Type: OS::Heat::StructuredDeployment
    Properties:
      config: {Ref: undercloudIronicConfig}
      server: {Ref: undercloud}
      signal_transport: NO_SIGNAL
      input_values:
        ironic_service_password: {Ref: IronicPassword}
        virtual_power_ssh_key: {Ref: PowerSSHPrivateKey}
