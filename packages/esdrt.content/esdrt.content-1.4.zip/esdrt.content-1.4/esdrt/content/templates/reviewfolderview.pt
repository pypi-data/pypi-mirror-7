<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="esdrt.content">

<body>
  <metal:main fill-slot="content-core">
    <metal:content-core define-macro="content-core">

      <div class="actions" tal:condition="view/can_add_observation">
        <a href="./++add++Observation"
          tal:attributes="href string:${here/absolute_url}/++add++Observation"
          class="standardButton">
            New observation
        </a>
      </div>

      <div id="no-content" tal:condition="not: view/get_questions">

        <p>
          There are no observations or questions to review.
        </p>

      </div>


      <table class="listing" tal:condition="view/get_questions">
        <thead>
          <tr>
            <th>
              Observation Ref. Number
            </th>
            <th>
              Status
            </th>
            <th>
              Country
            </th>
            <th>
              Sector
            </th>
            <th>
              Gas
            </th>
            <th>
              Modification date
            </th>
            <th>
              WF Location
            </th>
            <th tal:condition="view/is_secretariat">
              Author
            </th>
          </tr>
        </thead>

        <tbody>
          <tr tal:repeat="item view/get_questions"
              tal:attributes="class item/get_status|nothing">

            <tal:item condition="python:item.portal_type == 'Observation'">
              <tal:item define="observation nocall:item;
                                toLocalizedTime nocall:here/@@plone/toLocalizedTime;">
                <td>
                  <a href=""
                    tal:attributes="href observation/absolute_url">
                      <span class="ref-num"
                      tal:content="observation/getId">
                      UK-WAS-13-001
                    </span>
                    <br />
                    <span class="obs-title"
                      tal:content="observation/Title">
                      Observation title
                    </span>
                  </a>
                </td>
                <td tal:content="observation/get_status|nothing">
                  Observation title
                </td>
                <td tal:content="observation/country_value">
                  Observation title
                </td>
                <td tal:content="observation/ghg_source_sectors_value">
                  Observation title
                </td>
                <td tal:content="observation/gas_value">
                  Observation title
                </td>
                <td tal:content="python:toLocalizedTime(observation.modified(), True)">
                  Observation title
                </td>
                <td tal:content="observation/wf_location">
                  Review Expert
                </td>
                <td tal:condition="view/is_secretariat">
                  <span tal:replace="python:view.get_author_name(observation.Creator())" />
                </td>
              </tal:item>
            </tal:item>

            <tal:item condition="python:item.portal_type == 'Question'" tal:replace="nothing">
              <tal:item define="question nocall:item;
                                observation question/get_observation;
                                toLocalizedTime nocall:here/@@plone/toLocalizedTime;">
                <td>
                  <a href=""
                    tal:attributes="href observation/absolute_url"
                    tal:content="observation/getId">
                    UK-WAS-13-001
                  </a><br />
                  <a href=""
                    tal:attributes="href observation/absolute_url"
                    tal:content="observation/Title">
                    Observation title
                  </a>
                </td>
                <td tal:content="question/get_status|nothing">
                  Observation title
                </td>
                <td tal:content="observation/country_value">
                  Observation title
                </td>
                <td tal:content="observation/ghg_source_sectors_value">
                  Observation title
                </td>
                <td tal:content="observation/crf_code_value">
                  Observation title
                </td>
                <td tal:content="python:toLocalizedTime(question.modified(), True)">
                  Observation title
                </td>

              </tal:item>
            </tal:item>
          </tr>
        </tbody>

      </table>
      <div class="actions" tal:condition="view/can_add_observation">
        <a href="./++add++Observation"
          tal:attributes="href string:${here/absolute_url}/++add++Observation"
          class="standardButton">
            New observation
        </a>
      </div>

    </metal:content-core>
  </metal:main>

</body>
</html>

