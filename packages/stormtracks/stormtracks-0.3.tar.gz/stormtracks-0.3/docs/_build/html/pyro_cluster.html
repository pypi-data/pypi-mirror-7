<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>stormtracks Running in Cluster Mode &mdash; stormtracks 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="stormtracks 0.1 documentation" href="index.html" />
    <link rel="up" title="stormtracks API" href="api.html" />
    <link rel="next" title="stormtracks Testing" href="tests.html" />
    <link rel="prev" title="stormtracks API" href="api.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tests.html" title="stormtracks Testing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="api.html" title="stormtracks API"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">stormtracks 0.1 documentation</a> &raquo;</li>
          <li><a href="api.html" accesskey="U">stormtracks API</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="stormtracks-running-in-cluster-mode">
<h1>stormtracks Running in Cluster Mode<a class="headerlink" href="#stormtracks-running-in-cluster-mode" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-stormtracks.pyro_cluster.pyro_nameserver">
<span id="stormtracks-pyro-cluster-pyro-nameserver-runs-a-pyro4-nameserver"></span><h2><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_nameserver" title="stormtracks.pyro_cluster.pyro_nameserver"><tt class="xref py py-mod docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_nameserver</span></tt></a> &#8211; Runs a Pyro4 Nameserver<a class="headerlink" href="#module-stormtracks.pyro_cluster.pyro_nameserver" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="stormtracks.pyro_cluster.pyro_nameserver.main">
<tt class="descclassname">stormtracks.pyro_cluster.pyro_nameserver.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_nameserver.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Launches a Pyro4 nameserver</p>
</dd></dl>

</div>
<div class="section" id="module-stormtracks.pyro_cluster.pyro_starter">
<span id="stormtracks-pyro-cluster-pyro-starter-launches-all-pyro-workers"></span><h2><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_starter" title="stormtracks.pyro_cluster.pyro_starter"><tt class="xref py py-mod docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_starter</span></tt></a> &#8211; Launches All pyro_workers<a class="headerlink" href="#module-stormtracks.pyro_cluster.pyro_starter" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="stormtracks.pyro_cluster.pyro_starter.main">
<tt class="descclassname">stormtracks.pyro_cluster.pyro_starter.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_starter.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts all pyro_workers defined in pyro_settings.pyro_workers</p>
<p>ssh&#8217;s into each computer and issues a command to start pyro_worker</p>
</dd></dl>

</div>
<div class="section" id="module-stormtracks.pyro_cluster.pyro_manager">
<span id="stormtracks-pyro-cluster-pyro-manager-manages-all-pyro-workers"></span><h2><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_manager" title="stormtracks.pyro_cluster.pyro_manager"><tt class="xref py py-mod docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_manager</span></tt></a> &#8211; Manages All pyro_workers<a class="headerlink" href="#module-stormtracks.pyro_cluster.pyro_manager" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="stormtracks.pyro_cluster.pyro_manager.main">
<tt class="descclassname">stormtracks.pyro_cluster.pyro_manager.</tt><tt class="descname">main</tt><big>(</big><em>task_name='tracking_analysis'</em><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_manager.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Established communication with all pyro_workers</p>
<p>N.B. pyro_nameserver must be set up first, and pyro workers must be running
on each of the servers defined by pyro_settings.worker servers (either by running
pyro_start.py or by manually starting them).</p>
<p>Starts off by finding each of the pyro_workers, then generates a task schedule before
handing over to run_tasks(...).</p>
</dd></dl>

<dl class="function">
<dt id="stormtracks.pyro_cluster.pyro_manager.run_tasks">
<tt class="descclassname">stormtracks.pyro_cluster.pyro_manager.</tt><tt class="descname">run_tasks</tt><big>(</big><em>year</em>, <em>task_provider</em>, <em>workers</em>, <em>free_workers</em>, <em>task_name</em><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_manager.run_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the given task_provider and list of workers and farms out the various tasks.</p>
</dd></dl>

</div>
<div class="section" id="module-stormtracks.pyro_cluster.pyro_ender">
<span id="stormtracks-pyro-cluster-pyro-ender-stops-all-pyro-workers"></span><h2><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_ender" title="stormtracks.pyro_cluster.pyro_ender"><tt class="xref py py-mod docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_ender</span></tt></a> &#8211; Stops All pyro_workers<a class="headerlink" href="#module-stormtracks.pyro_cluster.pyro_ender" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="stormtracks.pyro_cluster.pyro_ender.main">
<tt class="descclassname">stormtracks.pyro_cluster.pyro_ender.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_ender.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Kills all pyro_workers defined in pyro_settings.pyro_workers</p>
<p>ssh&#8217;s into each computer and issues a command to kill pyro_worker</p>
</dd></dl>

</div>
<div class="section" id="module-stormtracks.pyro_cluster.pyro_worker">
<span id="stormtracks-pyro-cluster-pyro-worker-processes-data"></span><h2><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_worker" title="stormtracks.pyro_cluster.pyro_worker"><tt class="xref py py-mod docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_worker</span></tt></a> &#8211; Processes Data<a class="headerlink" href="#module-stormtracks.pyro_cluster.pyro_worker" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="stormtracks.pyro_cluster.pyro_worker.PyroWorker">
<em class="property">class </em><tt class="descclassname">stormtracks.pyro_cluster.pyro_worker.</tt><tt class="descname">PyroWorker</tt><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_worker.PyroWorker" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs on each of the worker servers</p>
<p>Listens for do_work requests by pyro_manager, on receiving of a test
does the required work and saves it to disk using a results manager.</p>
<dl class="method">
<dt id="stormtracks.pyro_cluster.pyro_worker.PyroWorker.do_work">
<tt class="descname">do_work</tt><big>(</big><em>year</em>, <em>ensemble_member</em>, <em>task_name</em>, <em>task_data</em><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_worker.PyroWorker.do_work" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work required by pyro_manager</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>year</strong> &#8211; year to analyse</li>
<li><strong>ensemble_member</strong> &#8211; ensemble_member to analyse</li>
<li><strong>task</strong> &#8211; task to do (currently must be &#8216;vort_track&#8217;)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dict containing details of task</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="stormtracks.pyro_cluster.pyro_worker.main">
<tt class="descclassname">stormtracks.pyro_cluster.pyro_worker.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_worker.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up a PyroWorker and starts its event loop to wait for calls from a pyro_manager</p>
</dd></dl>

</div>
<div class="section" id="module-stormtracks.pyro_cluster.pyro_task">
<span id="stormtracks-pyro-cluster-pyro-task-helps-keep-track-of-outstanding-tasks"></span><h2><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_task" title="stormtracks.pyro_cluster.pyro_task"><tt class="xref py py-mod docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_task</span></tt></a> &#8211; Helps Keep Track of Outstanding Tasks<a class="headerlink" href="#module-stormtracks.pyro_cluster.pyro_task" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroResultsAnalysis">
<em class="property">class </em><tt class="descclassname">stormtracks.pyro_cluster.pyro_task.</tt><tt class="descname">PyroResultsAnalysis</tt><big>(</big><em>year</em><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroResultsAnalysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Keeps track of all tracking analysis tasks to be done, and can issue the next outstanding class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>year</strong> &#8211; year to analyse</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroResultsAnalysis.get_next_outstanding">
<tt class="descname">get_next_outstanding</tt><big>(</big><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroResultsAnalysis.get_next_outstanding" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the next outstanding task, None if there are no more</p>
</dd></dl>

<dl class="method">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroResultsAnalysis.get_progress">
<tt class="descname">get_progress</tt><big>(</big><em>transpose=True</em><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroResultsAnalysis.get_progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string representing the progress for current ensemble member</p>
</dd></dl>

<dl class="method">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroResultsAnalysis.print_progress">
<tt class="descname">print_progress</tt><big>(</big><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroResultsAnalysis.print_progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the current progress</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroTask">
<em class="property">class </em><tt class="descclassname">stormtracks.pyro_cluster.pyro_task.</tt><tt class="descname">PyroTask</tt><big>(</big><em>year</em>, <em>ensemble_member</em>, <em>name</em>, <em>data=None</em><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents on task that is to be done</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>year</strong> &#8211; year of task</li>
<li><strong>ensemble_member</strong> &#8211; ensemble_member of task</li>
<li><strong>name</strong> &#8211; name of the task to be done</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroTask.name">
<tt class="descname">name</tt><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroTask.name" title="Permalink to this definition">¶</a></dt>
<dd><p>What name this is doing</p>
</dd></dl>

<dl class="attribute">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroTask.status">
<tt class="descname">status</tt><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroTask.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Current status of task, must be in STATUSES</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroVortTracking">
<em class="property">class </em><tt class="descclassname">stormtracks.pyro_cluster.pyro_task.</tt><tt class="descname">PyroVortTracking</tt><big>(</big><em>start_year=2000</em>, <em>end_year=2012</em>, <em>num_ensemble_members=56</em><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroVortTracking" title="Permalink to this definition">¶</a></dt>
<dd><p>Keeps track of all vort tracking tasks to be done, and can issue the next outstanding class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start_year</strong> &#8211; year from which to start tasks</li>
<li><strong>end_year</strong> &#8211; year from which to end tasks (inclusive)</li>
<li><strong>num_ensemble_members</strong> &#8211; how many ensemble members to keep tasks for</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroVortTracking.get_next_outstanding">
<tt class="descname">get_next_outstanding</tt><big>(</big><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroVortTracking.get_next_outstanding" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the next outstanding task, None if there are no more</p>
</dd></dl>

<dl class="method">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroVortTracking.get_progress">
<tt class="descname">get_progress</tt><big>(</big><em>years=None</em>, <em>include_year=False</em><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroVortTracking.get_progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string representing the progress for all years</p>
</dd></dl>

<dl class="method">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroVortTracking.get_progress_for_year">
<tt class="descname">get_progress_for_year</tt><big>(</big><em>year</em>, <em>include_year=True</em><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroVortTracking.get_progress_for_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string representing the progress of the year</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">-</span></tt> :task to be done</li>
<li><tt class="docutils literal"><span class="pre">W</span></tt> :task being worked on</li>
<li><tt class="docutils literal"><span class="pre">+</span></tt> :task complete</li>
<li><tt class="docutils literal"><span class="pre">F</span></tt> :task failure</li>
<li><tt class="docutils literal"><span class="pre">T</span></tt> :task timeout</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="stormtracks.pyro_cluster.pyro_task.PyroVortTracking.print_years">
<tt class="descname">print_years</tt><big>(</big><em>years=None</em>, <em>include_year=True</em><big>)</big><a class="headerlink" href="#stormtracks.pyro_cluster.pyro_task.PyroVortTracking.print_years" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints progress</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">stormtracks Running in Cluster Mode</a><ul>
<li><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_nameserver"><tt class="docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_nameserver</span></tt> &#8211; Runs a Pyro4 Nameserver</a></li>
<li><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_starter"><tt class="docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_starter</span></tt> &#8211; Launches All pyro_workers</a></li>
<li><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_manager"><tt class="docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_manager</span></tt> &#8211; Manages All pyro_workers</a></li>
<li><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_ender"><tt class="docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_ender</span></tt> &#8211; Stops All pyro_workers</a></li>
<li><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_worker"><tt class="docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_worker</span></tt> &#8211; Processes Data</a></li>
<li><a class="reference internal" href="#module-stormtracks.pyro_cluster.pyro_task"><tt class="docutils literal"><span class="pre">stormtracks.pyro_cluster.pyro_task</span></tt> &#8211; Helps Keep Track of Outstanding Tasks</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="api.html"
                        title="previous chapter">stormtracks API</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tests.html"
                        title="next chapter">stormtracks Testing</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/pyro_cluster.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tests.html" title="stormtracks Testing"
             >next</a> |</li>
        <li class="right" >
          <a href="api.html" title="stormtracks API"
             >previous</a> |</li>
        <li><a href="index.html">stormtracks 0.1 documentation</a> &raquo;</li>
          <li><a href="api.html" >stormtracks API</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Mark Muetzelfeldt.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>