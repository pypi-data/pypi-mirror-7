[tox]
envlist = py26,py27,ansible14,ansible15

[testenv]
deps =
    ansible>=1.6
    coverage
    mock
    pytest
    pytest-capturelog
    pytest-pep8
    pytest-flakes
    snot
commands =
    coverage run {envbindir}/py.test {posargs} {envsitepackagesdir}/ploy_ansible
    coverage report --include {envsitepackagesdir}/ploy_ansible/*
    coverage html --include {envsitepackagesdir}/ploy_ansible/*

[testenv:ansible14]
deps =
    ansible>1.4,<1.5
    coverage
    mock
    pytest
    pytest-capturelog
    pytest-pep8
    pytest-flakes
    snot

[testenv:ansible15]
deps =
    ansible>1.5,<1.6
    coverage
    mock
    pytest
    pytest-capturelog
    pytest-pep8
    pytest-flakes
    snot

[pytest]
addopts = --pep8 --flakes --tb=native
pep8ignore = E501
