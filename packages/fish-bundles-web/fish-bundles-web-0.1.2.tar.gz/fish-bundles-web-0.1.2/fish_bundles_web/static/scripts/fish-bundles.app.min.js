var CreateCtrl,HeaderCtrl,MainCtrl,ctrl,header;MainCtrl=(function(){function MainCtrl(test){this.test=test;}
return MainCtrl;})();ctrl=new MainCtrl("b");CreateCtrl=(function(){function CreateCtrl(element){this.element=element;this.selectedRepository=null;this.createDataTables();this.bindEvents();}
CreateCtrl.prototype.createDataTables=function(){this.tbl=this.element.find('#tbl-repositories');this.tbl.dataTable({"info":false});return this.tbl.on('click','tr',(function(_this){return function(ev){var row;_this.tbl.$('tr.selected').removeClass('selected');row=$(ev.currentTarget);row.addClass('selected');return _this.selectedRepository=row.attr('data-selected-id');};})(this));};CreateCtrl.prototype.bindEvents=function(){this.elements={category:this.element.find('#bundle-category'),warning:this.element.find('#duplicate-name'),noConfig:this.element.find('#no-config'),noRepo:this.element.find('#no-repo')};return this.element.find('.create-bundle-button').bind('click',(function(_this){return function(ev){var obj;obj={repository:_this.selectedRepository,category:_this.elements.category.val()};return _this.createNewBundle(obj);};})(this));};CreateCtrl.prototype.createNewBundle=function(obj){this.elements.warning.hide();this.elements.noConfig.hide();if(this.selectedRepository==null){this.elements.noRepo.show();this.elements.noRepo.fadeIn();return;}
this.elements.noRepo.hide();return $.ajax({type:"POST",url:'/save-bundle',data:{obj:JSON.stringify(obj)},success:(function(_this){return function(result){var resultObj;resultObj=JSON.parse(result);if(resultObj.result==='duplicate_name'){_this.elements.warning.fadeIn();return;}
if(resultObj.result==='no_config'){_this.elements.noConfig.fadeIn();return;}
return window.location="/bundles/"+resultObj.slug;};})(this)});};return CreateCtrl;})();ctrl=new CreateCtrl($('.create-bundle'));HeaderCtrl=(function(){function HeaderCtrl(element){this.element=element;this.elements={};this.gatherElements();this.bindEvents();}
HeaderCtrl.prototype.gatherElements=function(){this.elements.installButton=$('.install-button');this.elements.installInstructions=$('.install-instructions');return this.elements.mainContent=$('.main-content');};HeaderCtrl.prototype.bindEvents=function(){return this.elements.installButton.on('click',(function(_this){return function(ev){_this.element.toggleClass('show-install');_this.elements.installInstructions.toggleClass('show');return _this.elements.mainContent.toggleClass('show-install');};})(this));};return HeaderCtrl;})();header=new HeaderCtrl($('header'));