<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<body>

    <div metal:fill-slot="main">
    <metal:main-macro define-macro="main"
                      tal:define="kssClassesView context/@@kss_field_decorator_view;
                                  getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;
                                  templateId template/getId;
                                  selectedCategories request/Subject | nothing">

        <div tal:replace="structure provider:plone.abovecontenttitle" />

        <!--h1 metal:use-macro="here/kss_generic_macros/macros/generic_title_view">
            Title or id
        </h1-->

        <div tal:replace="structure provider:plone.belowcontenttitle" />

        <p metal:use-macro="here/kss_generic_macros/macros/generic_description_view">
            Description
        </p>

  <div tal:replace="structure provider:plone.abovecontentbody" />

        <metal:listingmacro define-macro="listing">
        <tal:foldercontents define="contentFilter contentFilter|request/contentFilter|nothing;
                            limit_display limit_display|request/limit_display|nothing;
          limit_display python:limit_display and int(limit_display) or None;
                            more_url more_url|request/more_url|string:folder_contents;
                            folderContents python:selectedCategories is not None and view.getResultsForCategoryList(selectedCategories) or selectedCategories is None and view.getAllResultsHere(context) or [];
                            use_view_action site_properties/typesUseViewActionInListings|python:();
          b_start python:request.get('b_start', 0);
                            over_limit python: limit_display and len(folderContents) > limit_display;
                            folderContents python: (over_limit and folderContents[:limit_display]) or folderContents;
                            Batch python:modules['Products.CMFPlone'].Batch;
          batch python:isinstance(folderContents, Batch) and folderContents or Batch(folderContents, limit_display or 10, int(b_start), orphan=1);">

        <tal:block repeat="item batch">

        <div class="tileItemWrapper">
        <div class="tileItem visualIEFloatFix vevent"
                     tal:define="item_url item/getURL|item/absolute_url;
               normalizeString nocall:context/@@plone/normalizeString;
                                       item_id item/getId|item/id;
                                       item_title_or_id item/pretty_title_or_id;
                                       item_description item/Description;
                                       item_type item/portal_type;
                                       item_type_title item/Type;
                                       item_type_class python: 'contenttype-' + normalizeString(item_type);
                                       item_modified item/ModificationDate;
                                       item_created item/CreationDate;
                                       item_wf_state        item/review_state|python: wtool.getInfoFor(item, 'review_state', '');
                                       item_wf_state_class python:'state-' + normalizeString(item_wf_state);
                                       item_creator item/Creator;
                                       item_start item/start/ISO|item/StartDate|nothing;
                                       item_end item/end/ISO|item/EndDate|nothing;
                                       item_has_leadimage item/hasContentLeadImage;
                                       item_object item/getObject;
                                   "
                     tal:attributes="class python:'tileItem visualIEFloatFix vevent' + item_type_class + ' ' + (repeat['item'].even() and 'tileEven' or 'tileOdd')">



          <div class="imgWrapper">
            <a href="#"
               tal:condition="python:item_type != 'Link'"
               tal:attributes="href python:item_type in use_view_action and item_url+'/view' or item_url">
                <img src="" alt=""
                     tal:condition="exists:item_object/image_preview"
                     tal:replace="structure python: path('nocall:item_object/tag')(scale='preview', css_class='tileImage')" />
                <img src="" alt=""
                     tal:condition="exists:item_has_leadimage"
                     tal:replace="structure python:view.tag(item_object, css_class='tileImage')" />
                <img src="" alt=""
                     tal:condition="python: item.portal_type == 'InfoBlad'"
                     tal:replace="structure python:view.getFirstImage(item)" />
            </a>


            <a href="#"
               class="link-plain"
               tal:condition="python:item_type == 'Link'"
               tal:attributes="href item/getRemoteUrl">
                <img src="" alt=""
                     tal:condition="exists:item_object/image_preview"
                     tal:replace="structure python: path('nocall:item_object/tag')(scale='preview', css_class='tileImage')" />
                <img src="" alt=""
                     tal:condition="exists:item_has_leadimage"
                     tal:replace="structure python:view.tag(item_object, css_class='tileImage')" />
            </a>
          </div>


          <div class="infoWrapper">

            <div class="thema-tag"
                tal:define="
                    tagInfo python: context.restrictedTraverse('virtualTreeTag').tag(item.Subject);
                    "
                tal:condition="tagInfo">
              <span tal:define="
                    tagId tagInfo/id;
                    tagTitle tagInfo/title;
                    "
                  tal:attributes="class string:tag-${tagId}"
                  tal:content="tagTitle">
                Tag
              </span>
            </div>

            <div class="news-date" tal:define="toLocalizedTime nocall:context/@@plone/toLocalizedTime;">
                <!-- span i18n:translate="published">Published</span : --> <span tal:content="python:toLocalizedTime(item.Date)" tal:omit-tag="">
                Date
                </span>
            </div>

             <h2 class="tileHeadline"
                metal:define-macro="listitem">
                <a href="#"
                   class="summary url"
                   tal:condition="python:item_type != 'Link'"
                   tal:attributes="href python:item_type in use_view_action and item_url+'/view' or item_url"
                   tal:content="item_title_or_id">
                    Item Title
                </a>

                <a href="#"
                   class="link-plain"
                   tal:condition="python:item_type == 'Link'"
                   tal:content="item_title_or_id"
                   tal:attributes="href item/getRemoteUrl;">
                    External Link
                </a>
            </h2>


            <p class="tileBody">
                <span tal:omit-tag="" tal:content="python:view.trimDescription(item.Description, 150)">
                    &nbsp;
                </span>
            </p>


          </div>







                    <div class="documentByLine">
                    <tal:event condition="python: item_type == 'Event'">
                         <span tal:condition="python: item_type == 'Event'"
                               i18n:translate="label_event_byline">
        <div class="EventDateInfo" tal:condition="python: item.end >= view.currenttime()">
          <div class="futureEventDateFrom">
            <div class="eventDayInfo" tal:content="item/start/day">02</div>
            <div class="eventMonthInfo" tal:content="python:item.start.strftime('%b %Y').capitalize()">Jun</div>
          </div>
          <span tal:condition="python:item.start.strftime('%d - %m - %Y') != item.end.strftime('%d - %m - %Y')" tal:omit-tag="" >
          <div class="futureEventDateUntil">
            <div class="eventDayInfo" tal:content="item/end/day">02</div>
            <div class="eventMonthInfo" tal:content="python:item.end.strftime('%b %Y').capitalize()">Jun</div>
          </div>
          <div class="visualClearLeft"><!-- --></div>
          </span>
        </div>
        <div class="EventDateInfo" tal:condition="python: item.end < view.currenttime()">
          <div class="pastEventDateFrom">
            <div class="eventDayInfo" tal:content="item/start/day">02</div>
            <div class="eventMonthInfo" tal:content="python:item.start.strftime('%b %Y').capitalize()">Jun</div>
          </div>
          <span tal:condition="python:item.start.strftime('%d - %m - %Y') != item.end.strftime('%d - %m - %Y')" tal:omit-tag="">
          <div class="pastEventDateUntil">
            <div class="eventDayInfo" tal:content="item/end/day">02</div>
            <div class="eventMonthInfo" tal:content="python:item.end.strftime('%b %Y').capitalize()">Jun</div>
          </div>
          <div class="visualClearLeft"><!-- --></div>
          </span>
        </div>
                         </span>
                    </tal:event>
                    <tal:newsitem condition="python: item_type == 'News Item'">
                    </tal:newsitem>
                    </div>





                    <div class="visualClear"><!-- --></div>

               <!-- <div class="addthis_toolbox addthis_default_style"
      tal:attributes="addthis:url python:(item.portal_type == 'File' or item.portal_type == 'Image') and item_url + '/view' or item_url;
                addthis:title item_title_or_id;
                addthis:description python:view.trimDescription(item_description, 250);">
            <a class="addthis_button_linkedin addthisButton">
            </a>
            <a class="addthis_button_email addthisButton">
            </a>
          </div>-->
    </div>

    <div class="visualClear" tal:condition="repeat/item/odd" class="visualClear columnBreak"><!-- --></div>
            </tal:block>
      <div class="visualClear"><!-- --></div>
      <!-- Navigation -->
            <div metal:use-macro="here/batch_macros/macros/navigation" />

      </tal:foldercontents>
      </metal:listingmacro>


<!--  <script type="text/javascript">
      var addthis_config = {"data_track_clickback":true};
      var addthis_share = {templates: { twitter: '{{title}}: {{url}} via @wmowonen' }}
  </script>
        <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username=intk"></script>-->

    </metal:main-macro>
    </div>
</body>
</html>



<!--
Subject%3Alist=Gebouw&Subject%3Alist=Kavel

                    <ul>
                        <li tal:repeat="item python:view.getResultsForCategoryList((cat ,))">
                            <span tal:replace="item/id">item</span>
                        </li>
                    </ul>
-->